<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <script data-ad-client="ca-pub-5032777697872834" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <title>
        
        Creating Web UI with Razor Pages - Anran&#39;s Coding Elephant
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 4.2.1"></head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> Sometimes rewarding, always fun </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="/img/avatar1.png" />
        </div>
        <div class="name">
            <i>Anran Niu</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>HOME</span>
                </a>
            </li>
            
                <li>
                    <a id="search">
                        <i class="iconfont icon-sousuo1"></i>
                        <span>SEARCH</span>
                    </a>
                </li>
            
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>TAGS</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>ARCHIVES</span>
                </a>
            </li>


            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>ABOUT</span>
                </a>
            </li>

        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Razor-Pages"><span class="toc-text">Razor Pages</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#PageModel-cshtml-cs"><span class="toc-text">PageModel (.cshtml.cs)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DataAnnotations"><span class="toc-text">DataAnnotations</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#The-Pages-directory-structure-and-routing-requests"><span class="toc-text">The Pages directory structure and routing requests</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Razor-Syntax"><span class="toc-text">Razor Syntax</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Reserved-Razor-keywords"><span class="toc-text">Reserved Razor keywords:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#page"><span class="toc-text">@page</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#model"><span class="toc-text">@model</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#C-code"><span class="toc-text">C# code</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Razor-Tag-Helpers"><span class="toc-text">Razor Tag Helpers</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Label-Tag-Helper"><span class="toc-text">The Label Tag Helper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Input-Tag-Helper"><span class="toc-text">The Input Tag Helper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Validation-Message-Tag-Helper"><span class="toc-text">The Validation Message Tag Helper</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#PageModel"><span class="toc-text">PageModel</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Typed-HTTPClient-service-architecture"><span class="toc-text">Typed HTTPClient service architecture</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">search</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> Sometimes rewarding, always fun </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        Creating Web UI with Razor Pages
    </div>

    <div class="post-meta">
        <span class="attr">Post：<span>2020-07-19 21:24:19</span></span>
        
        <span class="attr">Tags：/
        
        <a class="tag" href="/tags/#Web Development" title="Web Development">Web Development</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#ASP.NET" title="ASP.NET">ASP.NET</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">Visit：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <p>I was learning the Microsoft Learn Module - <a href="https://docs.microsoft.com/en-gb/learn/modules/create-razor-pages-aspnet-core/" target="_blank" rel="noopener">Create a web UI with ASP.NET Core</a>.</p>
<p>Razor Pages is a server-side, page-centric programming model for building rich web UI with ASP.NET Core. Razor Pages makes it easy to get started building dynamic web applications when all you need is to define UI logic using a combination of HTML, CSS, and C#.</p>
<p><strong>Razor pages have the extension <code>.cshtml</code></strong>. Razor syntax is a combination of HTML and C# where the C# code defines the dynamic rendering logic for the page.</p>
<p>In a webpage that uses the Razor syntax, there can be two kinds of content: client content and server code:</p>
<ul>
<li>Client content: Contains what you’re used to in webpages: HTML markup (elements), style information such as CSS, maybe some client script such as JavaScript, and plain text.</li>
<li>Server code: Razor syntax lets you add server code to your client content. <strong>If there is server code in the page, the server runs that code first, before it sends the page to the browser.</strong> From the browser’s perspective, client content that’s generated by your server code is no different than any other client content.</li>
</ul>
<h1 id="Razor-Pages"><a href="#Razor-Pages" class="headerlink" title="Razor Pages"></a>Razor Pages</h1><p>Each Razor page is a pair of files:</p>
<ul>
<li>A .cshtml file that contains markup with C# code using Razor syntax.</li>
<li>A .cshtml.cs PageModel class file that defines:<ul>
<li>Page handlers for requests sent to the page.</li>
<li>Data used to render the page.</li>
</ul>
</li>
</ul>
<h1 id="PageModel-cshtml-cs"><a href="#PageModel-cshtml-cs" class="headerlink" title="PageModel (.cshtml.cs)"></a>PageModel (.cshtml.cs)</h1><p>A model object defines data properties and encapsulates logic or operations related to those data properties. A PageModel is essentially the same thing, but is a model that <strong>more specifically encapsulates the data properties and logic operations scoped just to its Razor page</strong>.</p>
<h1 id="DataAnnotations"><a href="#DataAnnotations" class="headerlink" title="DataAnnotations"></a>DataAnnotations</h1><p>Models in ASP.NET Core often make use of data annotations to <strong>constrain or customize model properties</strong>.<br>Data annotations are attributes used to specify behavior that you want to enforce on the model properties to which they’re applied.<br>For example, a range of minimum and maximum acceptable values.</p>
<h1 id="The-Pages-directory-structure-and-routing-requests"><a href="#The-Pages-directory-structure-and-routing-requests" class="headerlink" title="The Pages directory structure and routing requests"></a>The Pages directory structure and routing requests</h1><p>Razor Pages uses the directory structure within the Pages directory as the convention for <strong>routing requests</strong> by default. An index page located in the root of the Pages directory, for example, is the default page for the app’s site.</p>
<h1 id="Razor-Syntax"><a href="#Razor-Syntax" class="headerlink" title="Razor Syntax"></a>Razor Syntax</h1><p>Razor syntax uses the <code>@</code> symbol to transition from HTML to C#.</p>
<ul>
<li>If the @ symbol is followed by a Razor reserved keyword, it transitions into Razor-specific markup;</li>
<li>otherwise, it transitions to C#. Razor evaluates the C# expressions and renders them in the HTML output.</li>
</ul>
<h2 id="Reserved-Razor-keywords"><a href="#Reserved-Razor-keywords" class="headerlink" title="Reserved Razor keywords:"></a>Reserved Razor keywords:</h2><h3 id="page"><a href="#page" class="headerlink" title="@page"></a><code>@page</code></h3><p>The @page directive is what makes this a Razor page. It indicates this page can handle HTTP requests. The @page directive must be the first directive on a Razor page.</p>
<h3 id="model"><a href="#model" class="headerlink" title="@model"></a><code>@model</code></h3><p>The @model directive is Razor syntax specifying the type of the model made available to the Razor page.</p>
<h2 id="C-code"><a href="#C-code" class="headerlink" title="C# code"></a>C# code</h2><p>The <code>@</code> character starts single-statement C# blocks. Multi-statement C# blocks can be created when using @{}. For example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@&#123;</span><br><span class="line">	var pageTitle &#x3D; &quot;Home page&quot;;</span><br><span class="line">	ViewData[&quot;Title&quot;] &#x3D; pageTitle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Razor-Tag-Helpers"><a href="#Razor-Tag-Helpers" class="headerlink" title="Razor Tag Helpers"></a>Razor Tag Helpers</h1><p>Here’s the example <code>Pages/Products/Create.cshtml</code> file:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@page</span><br><span class="line">   @model ContosoPets.Ui.Pages.Products.CreateModel</span><br><span class="line">   @&#123;</span><br><span class="line">       ViewData[&quot;Title&quot;] &#x3D; &quot;Create&quot;;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   &lt;h1&gt;Create Product&lt;&#x2F;h1&gt;</span><br><span class="line"></span><br><span class="line">   &lt;form method&#x3D;&quot;post&quot;&gt;</span><br><span class="line">       &lt;div class&#x3D;&quot;form-group&quot;&gt;</span><br><span class="line">           &lt;label asp-for&#x3D;&quot;Product.Name&quot; class&#x3D;&quot;control-label&quot;&gt;&lt;&#x2F;label&gt;</span><br><span class="line">           &lt;input asp-for&#x3D;&quot;Product.Name&quot; class&#x3D;&quot;form-control&quot; &#x2F;&gt;</span><br><span class="line">           &lt;span asp-validation-for&#x3D;&quot;Product.Name&quot; class&#x3D;&quot;text-danger&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">       &lt;&#x2F;div&gt;</span><br><span class="line">       &lt;div class&#x3D;&quot;form-group&quot;&gt;</span><br><span class="line">           &lt;label asp-for&#x3D;&quot;Product.Price&quot; class&#x3D;&quot;control-label&quot;&gt;&lt;&#x2F;label&gt;</span><br><span class="line">           &lt;input asp-for&#x3D;&quot;Product.Price&quot; class&#x3D;&quot;form-control&quot; &#x2F;&gt;</span><br><span class="line">           &lt;span asp-validation-for&#x3D;&quot;Product.Price&quot; class&#x3D;&quot;text-danger&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">       &lt;&#x2F;div&gt;</span><br><span class="line">       &lt;div class&#x3D;&quot;form-group&quot;&gt;</span><br><span class="line">           &lt;input type&#x3D;&quot;submit&quot; value&#x3D;&quot;Save&quot; class&#x3D;&quot;btn btn-primary&quot; &#x2F;&gt;</span><br><span class="line">       &lt;&#x2F;div&gt;</span><br><span class="line">   &lt;&#x2F;form&gt;</span><br></pre></td></tr></table></figure>

<p>Tag Helpers are components for automating HTML generation in ASP.NET Core web applications. By design, they’re reusable, customizable building blocks that save you time. Most built-in Tag Helpers extend standard HTML elements you’re familiar with and provide additional <strong>server-side attributes</strong> for the element, making them more robust.</p>
<h2 id="The-Label-Tag-Helper"><a href="#The-Label-Tag-Helper" class="headerlink" title="The Label Tag Helper"></a>The Label Tag Helper</h2><p><code>&lt;label asp-for=&quot;Product.Name&quot; class=&quot;control-label&quot;&gt;&lt;/label&gt;</code><br>The Label Tag Helper extends the standard HTML element. As is common for many Razor Tag Helpers, it uses an asp-for attribute which takes a specified PageModel property. The PageModel property is defined in C#. In this case, the value of the PageModel Name property will be rendered as the content for an HTML <label> element. The <code>asp-for</code> attribute is scoped to the PageModel for the Razor page, so the @ symbol isn’t used. The label is dynamic as is needed here, but remains compact and easy to add in your markup.</p>
<h2 id="The-Input-Tag-Helper"><a href="#The-Input-Tag-Helper" class="headerlink" title="The Input Tag Helper"></a>The Input Tag Helper</h2><p>In <code>Create.cshtml</code>:<br><code>&lt;input asp-for=&quot;Product.Name&quot; class=&quot;form-control&quot; /&gt;</code><br>Generated output:<br><code>&lt;input name=&quot;Product.Name&quot; class=&quot;form-control&quot; id=&quot;Product_Name&quot; type=&quot;text&quot; value=&quot;&quot; data-val-required=&quot;The Name field is required.&quot; data-val=&quot;true&quot;&gt;</code></p>
<ul>
<li>It evaluates the Product.Name property defined in the PageModel in C#, adds an id and name based on that property and sets the input type appropriately.</li>
<li>It provides client-side validation using JQuery <strong>based on the model’s data annotation attributes provided through the PageModel</strong>.</li>
</ul>
<h2 id="The-Validation-Message-Tag-Helper"><a href="#The-Validation-Message-Tag-Helper" class="headerlink" title="The Validation Message Tag Helper"></a>The Validation Message Tag Helper</h2><p>The following markup uses the Validation Message Tag Helper. It displays a validation message for a single property on your model.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span asp-validation-for&#x3D;&quot;Product.Price&quot; class&#x3D;&quot;text-danger&quot;&gt;&lt;&#x2F;span&gt;</span><br></pre></td></tr></table></figure>

<p>Generated output:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">  <span class="attr">name</span>=<span class="string">"Product.Price"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">"form-control"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">"Product_Price"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">type</span>=<span class="string">"text"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">value</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-val-required</span>=<span class="string">"The Price field is required."</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-val</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-val-range-min</span>=<span class="string">"0.01"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-val-range-max</span>=<span class="string">"9999.99"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-val-range</span>=<span class="string">"The field Price must be between 0.01 and 9999.99."</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-val-number</span>=<span class="string">"The field Price must be a number."</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>

<p>The type, data-val-range-min, data-val-range-max and error response are dynamically set by the model’s data annotations for the model’s Product.Price property.</p>
<h1 id="PageModel"><a href="#PageModel" class="headerlink" title="PageModel"></a>PageModel</h1><p>A Razor Page’s PageModel class file defines any page handlers for requests sent to the page, and data used to render the page.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">using ContosoPets.Ui.Models;</span><br><span class="line">using ContosoPets.Ui.Services;</span><br><span class="line">using Microsoft.AspNetCore.Mvc;</span><br><span class="line">using Microsoft.AspNetCore.Mvc.RazorPages;</span><br><span class="line">using System.Threading.Tasks;</span><br><span class="line"></span><br><span class="line">namespace ContosoPets.Ui.Pages.Products</span><br><span class="line">&#123;</span><br><span class="line">    public class CreateModel : PageModel</span><br><span class="line">    &#123;</span><br><span class="line">        private readonly ProductService _productService;</span><br><span class="line"></span><br><span class="line">        [BindProperty]</span><br><span class="line">        public Product Product &#123; get; set; &#125;</span><br><span class="line"></span><br><span class="line">        public CreateModel(ProductService productService)</span><br><span class="line">&#x2F;&#x2F; Injecting the ContosoPets.UI ProductService service that handles HTTP requests</span><br><span class="line">        &#123;</span><br><span class="line">            _productService &#x3D; productService;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public async Task&lt;IActionResult&gt; OnPostAsync()</span><br><span class="line">        &#123;</span><br><span class="line">            if (!ModelState.IsValid)</span><br><span class="line">            &#123;</span><br><span class="line">                return Page();</span><br><span class="line">            &#125; &#x2F;&#x2F; Built-in server-side model validation using ASP.NET Core data annotations</span><br><span class="line"></span><br><span class="line">            await _productService.CreateProduct(Product);</span><br><span class="line"></span><br><span class="line">            return RedirectToPage(&quot;Index&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Typed-HTTPClient-service-architecture"><a href="#Typed-HTTPClient-service-architecture" class="headerlink" title="Typed HTTPClient service architecture"></a>Typed HTTPClient service architecture</h1><p><a href="https://docs.microsoft.com/en-gb/learn/modules/create-razor-pages-aspnet-core/7-lifecycle-httpclient" target="_blank" rel="noopener">Typed HTTPClient service architecture</a> is responsible for managing HTTP requests to the web API.<br><strong>Provided as a typed service you have the advantage of injecting it as a constructor parameter directly into the PageModel classes in this project.</strong><br>Using this architecture provides the advantage of letting the framework take on the responsibility of creating an instance of the HttpClient class and disposing of it when it’s no longer needed. This is a great feature for a project such as this one which will make use of HttpClient instances for each CRUD operation.</p>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        <span style="font-size:1rem;font-weight:lighter">Link with Anran at:</span>
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/niuniuanran">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        
        <li>
            <a target="_blank"  href="https://www.linkedin.com/in/anran-niu-897b4b197">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-linkedin"></i>
                            </span>
            </a>
        </li>
        

    </ul>
    
    <p>
        Created With <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud" target="_blank" rel="noopener">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
