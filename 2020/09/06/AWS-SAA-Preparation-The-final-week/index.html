<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <script data-ad-client="ca-pub-5032777697872834" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <title>
        
        AWS SAA Preparation: The final week - Coding Elephant
        
    </title><meta name="robots" content="noindex">

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 4.2.1"></head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> Sometimes rewarding, always fun </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="/img/avatar1.png" />
        </div>
        <div class="name">
            <i>Anran</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>HOME</span>
                </a>
            </li>
            
                <li>
                    <a id="search">
                        <i class="iconfont icon-sousuo1"></i>
                        <span>SEARCH</span>
                    </a>
                </li>
            
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>TAGS</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>ARCHIVES</span>
                </a>
            </li>


            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>ABOUT</span>
                </a>
            </li>

        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Patch-my-EC2-Knowledge"><span class="toc-text">Patch my EC2 Knowledge</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Inspector"><span class="toc-text">Inspector</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Options-to-Connect-to-instance"><span class="toc-text">Options to Connect to instance</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#A-standalone-SSH-Client"><span class="toc-text">A standalone SSH Client</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Session-Manager"><span class="toc-text">Session Manager</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EC2-Instance-Connect-Browser-based-SSH-connect"><span class="toc-text">EC2 Instance Connect (Browser-based SSH connect)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#EC2-Launch-Types"><span class="toc-text">EC2 Launch Types</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Dedicated-Instances"><span class="toc-text">Dedicated Instances</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Pricing"><span class="toc-text">Pricing</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dedicated-Hosts"><span class="toc-text">Dedicated Hosts</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Pricing-1"><span class="toc-text">Pricing</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spot-Instance-Lifecycle"><span class="toc-text">Spot Instance Lifecycle</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spot-Instance-Request-States"><span class="toc-text">Spot Instance Request States</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#End-of-lifecycle-States"><span class="toc-text">End of lifecycle States:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#If-you-terminate-an-instance"><span class="toc-text">If you terminate an instance:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#One-time-request"><span class="toc-text">One-time request:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Persistent-request"><span class="toc-text">Persistent request:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spot-Fleet"><span class="toc-text">Spot Fleet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spot-Block"><span class="toc-text">Spot Block</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Security-Group"><span class="toc-text">Security Group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Elastic-IP"><span class="toc-text">Elastic IP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Bootstrapping"><span class="toc-text">Bootstrapping</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Instance-Types"><span class="toc-text">Instance Types</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Burstable-Instances-T2-T3"><span class="toc-text">Burstable Instances (T2&#x2F;T3)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Important-Families"><span class="toc-text">Important Families</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AMI"><span class="toc-text">AMI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AMI-Storage"><span class="toc-text">AMI Storage</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Copy-AMI"><span class="toc-text">Copy AMI</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Placement-Group"><span class="toc-text">Placement Group</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Spread"><span class="toc-text">Spread</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Partition"><span class="toc-text">Partition</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cluster"><span class="toc-text">Cluster</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Elastic-Network-Interfaces-ENI"><span class="toc-text">Elastic Network Interfaces(ENI)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hibernate"><span class="toc-text">Hibernate</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AWS-Directory-Service"><span class="toc-text">AWS Directory Service</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Scalability-Availability-Fault-Tolerance"><span class="toc-text">Scalability, Availability, Fault Tolerance</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Elastic-Load-Balancing"><span class="toc-text">Elastic Load Balancing</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ELB-is-Managed-Service"><span class="toc-text">ELB is Managed Service</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ELB-Pre-Warm"><span class="toc-text">ELB Pre-Warm</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ELB-Monitoring"><span class="toc-text">ELB Monitoring</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ALB-Trouble-Shooting"><span class="toc-text">ALB Trouble Shooting</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ALB-v2-features"><span class="toc-text">ALB (v2) features</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ALB-Listeners"><span class="toc-text">ALB Listeners</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Listener-Rules"><span class="toc-text">Listener Rules</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Rule-Priority"><span class="toc-text">Rule Priority</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Rule-Actions"><span class="toc-text">Rule Actions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Rule-Condition-Types"><span class="toc-text">Rule Condition Types</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ALB-Target-Groups"><span class="toc-text">ALB Target Groups</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ALB-Slow-Start"><span class="toc-text">ALB Slow Start</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Visibility-of-Request-source"><span class="toc-text">Visibility of Request source</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NLB-features"><span class="toc-text">NLB features</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Static-IP-addressing"><span class="toc-text">Static IP addressing</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Load-Balancer-Stickiness"><span class="toc-text">Load Balancer Stickiness</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Availability-Zones-and-Load-Balancer-Nodes"><span class="toc-text">Availability Zones and Load Balancer Nodes</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Cross-Zone-Load-Blancing-for-different-types"><span class="toc-text">Cross-Zone Load Blancing for different types</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IP-addresses-of-Load-Balancer-Nodes"><span class="toc-text">IP addresses of Load Balancer Nodes</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SNI"><span class="toc-text">SNI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SNI-Available-in-ALB-NLB-CloudFront"><span class="toc-text">SNI Available in ALB, NLB, CloudFront</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTPS-listener-of-an-ALB"><span class="toc-text">HTTPS listener of an ALB</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SNI-only-supported-in-ALB-and-NLB"><span class="toc-text">SNI only supported in ALB and NLB</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ALB-Target-Group"><span class="toc-text">ALB Target Group</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Deregistration-Delay"><span class="toc-text">Deregistration Delay</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sticky-Sessions"><span class="toc-text">Sticky Sessions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lambda-functions-as-targets"><span class="toc-text">Lambda functions as targets</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Target-Group-Deregistration-Delay"><span class="toc-text">Target Group Deregistration Delay</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ASG"><span class="toc-text">ASG</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Launch-Template"><span class="toc-text">Launch Template</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Launch-Configuration"><span class="toc-text">Launch Configuration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ASG-with-multiple-instance-types-and-purchase-options"><span class="toc-text">ASG with multiple instance types and purchase options</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ASG-Health-Check"><span class="toc-text">ASG Health Check</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#EC2-Status-checks"><span class="toc-text">EC2 Status checks</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Elastic-Load-Balancing-ELB-Health-Checks"><span class="toc-text">Elastic Load Balancing (ELB) Health Checks</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Custom-Health-Checks"><span class="toc-text">Custom Health Checks</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Health-check-grace-period"><span class="toc-text">Health check grace period</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Replacing-Unhealthy-Instances"><span class="toc-text">Replacing Unhealthy Instances</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Compare-the-times-related-with-ELB-ASG"><span class="toc-text">Compare the times related with ELB&#x2F;ASG</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Scale-in-related-periods"><span class="toc-text">Scale-in related periods</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scale-out-related-periods"><span class="toc-text">Scale-out related periods</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Standby-state-in-Auto-Scaling-group"><span class="toc-text">Standby state in Auto Scaling group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Suspending-and-resuming-scaling-processes"><span class="toc-text">Suspending and resuming scaling processes</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Better-Alternatives"><span class="toc-text">Better Alternatives</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scaling-Processes"><span class="toc-text">Scaling Processes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Choosing-to-Suspend"><span class="toc-text">Choosing to Suspend</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#How-Amazon-EC2-Auto-Scaling-works-with-IAM"><span class="toc-text">How Amazon EC2 Auto Scaling works with IAM</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Scaling-Specific-Cooldown-Period"><span class="toc-text">Scaling-Specific Cooldown Period</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ASG-Default-Termination-Policy"><span class="toc-text">ASG Default Termination Policy</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#EBS"><span class="toc-text">EBS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#EBS-Volume-Types"><span class="toc-text">EBS Volume Types</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#EBS-Snapshots"><span class="toc-text">EBS Snapshots</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#EBS-v-s-Instance-Store"><span class="toc-text">EBS v.s. Instance Store</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#EBS-RAID-options"><span class="toc-text">EBS RAID options</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#RAID-0-Increase-Performance"><span class="toc-text">RAID 0 (Increase Performance)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RAID-1-Increase-Fault-Tolerance"><span class="toc-text">RAID 1 (Increase Fault Tolerance)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#EFS"><span class="toc-text">EFS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#EFS-Scale"><span class="toc-text">EFS Scale</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Performance-Mode"><span class="toc-text">Performance Mode</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Storage-Tiers"><span class="toc-text">Storage Tiers</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#RDS-amp-Aurora"><span class="toc-text">RDS &amp; Aurora</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Amazon-RDS-Backup-and-Restore"><span class="toc-text">Amazon RDS Backup and Restore</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Automated-Backups"><span class="toc-text">Automated Backups</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Point-in-time-Restores"><span class="toc-text">Point-in-time Restores</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Database-Snapshots"><span class="toc-text">Database Snapshots</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Snapshot-Copies"><span class="toc-text">Snapshot Copies</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Read-Replica-for-Read-Scalability"><span class="toc-text">Read Replica for Read Scalability</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Read-Replica-for-both-non-Aurora-and-Aurora-RDS"><span class="toc-text">Read Replica for both non-Aurora and Aurora RDS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Non-Aurora-Read-Replica"><span class="toc-text">Non-Aurora Read Replica</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Aurora-Read-Replica"><span class="toc-text">Aurora Read Replica</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Network-Cost"><span class="toc-text">Network Cost</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RDS-multi-AZ-for-Availability"><span class="toc-text">RDS multi-AZ for Availability</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IAM-user-with-full-administrator-access"><span class="toc-text">IAM user with full administrator access</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CloudFront-Key-Pairs"><span class="toc-text">CloudFront Key Pairs</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#S3-Lifecycle-Transitions"><span class="toc-text">S3 Lifecycle Transitions</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Cross-Zone-load-balancing"><span class="toc-text">Cross-Zone load balancing</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ALB-Routing-Conditions"><span class="toc-text">ALB Routing Conditions</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Amazon-Kinesis-Data-Streams-v-s-SQS"><span class="toc-text">Amazon Kinesis Data Streams v.s. SQS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Amazon-Kinesis-Data-Streams-Recommended-Cases"><span class="toc-text">Amazon Kinesis Data Streams Recommended Cases</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Amazon-SQS-Recommended-Cases"><span class="toc-text">Amazon SQS Recommended Cases</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SQS-FIFO-Queue-Important-IDs"><span class="toc-text">SQS FIFO Queue Important IDs</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Message-Group-ID"><span class="toc-text">Message Group ID</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Message-deduplication-ID"><span class="toc-text">Message deduplication ID</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Multiple-Consumers-of-SQS-and-Kinesis-Data-Stream"><span class="toc-text">Multiple Consumers of SQS and Kinesis Data Stream</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Kinesis-Data-Firehose-user-case"><span class="toc-text">Kinesis Data Firehose user case</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#EC2-Auto-Scaling-Lifecycle-Hooks"><span class="toc-text">EC2 Auto Scaling Lifecycle Hooks</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Amazon-MQ"><span class="toc-text">Amazon MQ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AWS-Storage-Gateway-File-Gateways"><span class="toc-text">AWS Storage Gateway - File Gateways</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Auto-Scaling-Scheduled-Action-desired-min-max"><span class="toc-text">Auto Scaling Scheduled Action: desired, min, max</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DynamoDB-Capacity-setting"><span class="toc-text">DynamoDB Capacity setting</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Provisioned-Mode-default-free-tier-eligible"><span class="toc-text">Provisioned Mode (default, free-tier eligible)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#On-Demand-Mode"><span class="toc-text">On-Demand Mode</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ElastiCache-Redis-vs-Memcached"><span class="toc-text">ElastiCache Redis vs Memcached</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Amazon-FSx-for-Lustre"><span class="toc-text">Amazon FSx for Lustre</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Linked-with-S3-buckets"><span class="toc-text">Linked with S3 buckets</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FSx-for-Windows"><span class="toc-text">FSx for Windows</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AWS-Glue"><span class="toc-text">AWS Glue</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Route-53-Private-Hosted-Zones"><span class="toc-text">Route 53 Private Hosted Zones</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#VPC-Config"><span class="toc-text">VPC Config</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Supported-routing-policies-for-records-in-a-private-hosted-zone"><span class="toc-text">Supported routing policies for records in a private hosted zone</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Lambda"><span class="toc-text">Lambda</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Supported-Languages"><span class="toc-text">Supported Languages</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Limits"><span class="toc-text">Limits</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Alternative-Serverless-Compute-Fargate"><span class="toc-text">Alternative Serverless Compute: Fargate</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cold-Starts"><span class="toc-text">Cold Starts</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IAM-Permissions-Boundaries"><span class="toc-text">IAM Permissions Boundaries</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Goal-Delegate-permission-management-to-developers"><span class="toc-text">Goal: Delegate permission management to developers</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Elastic-Fabric-Adapter"><span class="toc-text">Elastic Fabric Adapter</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#High-levels-of-inter-node-communications-and-high-network-traffic-Combo"><span class="toc-text">High levels of inter-node communications and high network traffic Combo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cluster-v-s-Partition"><span class="toc-text">Cluster v.s. Partition</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HPC-Workloads-Cluster"><span class="toc-text">HPC Workloads: Cluster</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CloudFront-Access-Control"><span class="toc-text">CloudFront Access Control</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Signed-URLs-and-Signed-Cookies"><span class="toc-text">Signed URLs and Signed Cookies</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Geo-Restriction"><span class="toc-text">Geo-Restriction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Origin-Access-Identity-OAI"><span class="toc-text">Origin Access Identity (OAI)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#VPC-Peering"><span class="toc-text">VPC Peering</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Connection"><span class="toc-text">Connection</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Inter-Region-VPC-Peering"><span class="toc-text">Inter-Region VPC Peering</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#No-Transitive-Peering"><span class="toc-text">No Transitive Peering</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#No-CIDR-Overlapping"><span class="toc-text">No CIDR Overlapping</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DynamoDB-Accelerator"><span class="toc-text">DynamoDB Accelerator</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#S3-Performance-with-Prefix"><span class="toc-text">S3 Performance with Prefix</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AMI-Copying"><span class="toc-text">AMI Copying</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Auto-Scaling-Activities-Rebalancing-v-s-Scaling"><span class="toc-text">Auto Scaling Activities: Rebalancing v.s. Scaling</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Rebalancing"><span class="toc-text">Rebalancing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Replace-Unhealthy"><span class="toc-text">Replace Unhealthy</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#KMS-Deleting-Customer-Master-Key"><span class="toc-text">KMS Deleting Customer Master Key</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Amazon-Redshift-Spectrum"><span class="toc-text">Amazon Redshift Spectrum</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#v-s-Athena"><span class="toc-text">v.s. Athena</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AWS-Direct-Connect-VPN-Combine-performance-and-encryption"><span class="toc-text">AWS Direct Connect + VPN : Combine performance and encryption</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AWS-Transit-Gateway"><span class="toc-text">AWS Transit Gateway</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#S3-Data-Consistency"><span class="toc-text">S3 Data Consistency</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#read-after-write-consistency-for-PUTS"><span class="toc-text">read-after-write consistency for PUTS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#eventual-consistency-for-overwrite-PUTS-and-DELETES-in-all-Regions"><span class="toc-text">eventual consistency for overwrite PUTS and DELETES in all Regions</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Amazon-Glacier-and-Glacier-Deep-Archive-Retrieval"><span class="toc-text">Amazon Glacier and Glacier Deep Archive Retrieval</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#S3-Glacier"><span class="toc-text">S3 Glacier</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Expedited-Retrieval"><span class="toc-text">Expedited Retrieval</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Standard-Retrieval"><span class="toc-text">Standard Retrieval</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bulk-Retrieval"><span class="toc-text">Bulk Retrieval</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#S3-Glacier-Deep-Archieve"><span class="toc-text">S3 Glacier Deep Archieve</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Standard"><span class="toc-text">Standard</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bulk"><span class="toc-text">Bulk</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#RDS-encryption"><span class="toc-text">RDS encryption</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#RDS-Multi-AZ"><span class="toc-text">RDS Multi- AZ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Active-Instances"><span class="toc-text">Active Instances?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Backup"><span class="toc-text">Backup?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Replication"><span class="toc-text">Replication?</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Accessing-S3-data"><span class="toc-text">Accessing S3 data</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Byte-Range-Fetch"><span class="toc-text">Byte Range Fetch</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#S3-Select"><span class="toc-text">S3 Select</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#S3-Select-ScanRange"><span class="toc-text">S3 Select ScanRange</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Glacier-Select"><span class="toc-text">Glacier Select</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SQS-FIFO-vs-Kinesis-Data-Stream"><span class="toc-text">SQS FIFO vs Kinesis Data Stream</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQS-GroupID"><span class="toc-text">SQS GroupID</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Kinesis-Data-Firehose"><span class="toc-text">Kinesis Data Firehose</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Retrieving-instance-metadata"><span class="toc-text">Retrieving instance metadata</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Available-in-metadata"><span class="toc-text">Available in metadata:</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Snowball-mobile-Capcity"><span class="toc-text">Snowball, mobile Capcity</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Snowball-Edge-Storage-Optimized"><span class="toc-text">Snowball Edge Storage Optimized</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Snowball-Edge-Compute-Optimized"><span class="toc-text">Snowball Edge Compute Optimized</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#S3"><span class="toc-text">S3</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#S3-Security"><span class="toc-text">S3 Security</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hosting-Static-website-on-S3"><span class="toc-text">Hosting Static website on S3</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#URL-of-your-index-page"><span class="toc-text">URL of your index page</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Configure-Permissions"><span class="toc-text">Configure Permissions</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SQS-Short-Polling-and-Long-Polling"><span class="toc-text">SQS Short Polling and Long Polling</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Short-Polling"><span class="toc-text">Short Polling</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Long-Polling"><span class="toc-text">Long Polling</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Roles-for-EC2-Instances"><span class="toc-text">Roles for EC2 Instances</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#EC2-Data-transfer-pricing"><span class="toc-text">EC2 Data transfer pricing</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Out-to-Internet"><span class="toc-text">Out to Internet</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Using-Public-IPv4-IPv6-incurs-a-unified-charge"><span class="toc-text">Using Public IPv4&#x2F;IPv6 incurs a unified charge</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Across-AZ"><span class="toc-text">Across AZ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#EC2-gt-Services-Free-transfer"><span class="toc-text">EC2 -&gt; Services Free transfer</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Security-Group-Rules"><span class="toc-text">Security Group Rules</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Outbound-Rule-Port"><span class="toc-text">Outbound Rule Port</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Default-Security-Group"><span class="toc-text">Default Security Group</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Default-SG-Rules"><span class="toc-text">Default SG Rules:</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Default-Rules-of-a-user-created-Security-Group"><span class="toc-text">Default Rules of a user-created Security Group</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IAM-Policies"><span class="toc-text">IAM Policies</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Resource-field-of-a-Policy"><span class="toc-text">Resource field of a Policy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Policy-Conditions"><span class="toc-text">Policy Conditions</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#aws-SourceIp"><span class="toc-text">aws:SourceIp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aws-calledVia"><span class="toc-text">aws: calledVia</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aws-CurrentTime"><span class="toc-text">aws:CurrentTime</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aws-MultiFactorAuthAge"><span class="toc-text">aws:MultiFactorAuthAge</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aws-PrincipalAccount"><span class="toc-text">aws:PrincipalAccount</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aws-RequestedRegion"><span class="toc-text">aws:RequestedRegion</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aws-SourceVpc"><span class="toc-text">aws:SourceVpc</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Consider-the-timeout-of-your-job-when-choosing-Lambda"><span class="toc-text">Consider the timeout of your job when choosing Lambda</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Lambda-15-min-time-out"><span class="toc-text">Lambda: 15 min time out</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spot-Blocks-Cheap-solution-for-jobs-above-15-mins"><span class="toc-text">Spot Blocks: Cheap solution for jobs above 15 mins</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Fargate"><span class="toc-text">Fargate</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Automated-Reboot"><span class="toc-text">Automated Reboot</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Reboot-upon-Instance-Health-Check-failure"><span class="toc-text">Reboot upon Instance Health Check failure</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Recover-upon-System-Health-Check-failure"><span class="toc-text">Recover upon System Health Check failure</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Amazon-S3-notification"><span class="toc-text">Amazon S3 notification</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Amazon-S3-notification-supported-Destinations"><span class="toc-text">Amazon S3 notification supported Destinations</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Amazon-Aurora-Global-Database"><span class="toc-text">Amazon Aurora Global Database</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DynamoDB-Global-Tables"><span class="toc-text">DynamoDB Global Tables</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Sharing-Resources-across-accounts-VPC"><span class="toc-text">Sharing Resources across accounts&#x2F;VPC</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#AWS-Resource-Access-Manager-RAM-cross-account-same-region"><span class="toc-text">AWS Resource Access Manager (RAM): cross-account, same region</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Resource-Access-Manager-v-s-VPC-Peering"><span class="toc-text">Resource Access Manager v.s. VPC Peering</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RAM-v-s-Transit-Gateway"><span class="toc-text">RAM v.s. Transit Gateway</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VPC-Peering-v-s-Transit-Gateway"><span class="toc-text">VPC Peering v.s. Transit Gateway</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Transit-Gateway-hub-and-spoke-model"><span class="toc-text">Transit Gateway hub and spoke model</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AWS-Glue-1"><span class="toc-text">AWS Glue</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#RDS-multi-AZ-multi-region-read-replica"><span class="toc-text">RDS multi-AZ, multi-region, read-replica</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Recover-from-AZ-failure-for-ONE-server"><span class="toc-text">Recover from AZ failure for ONE server</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Minimise-Bootstrap-Time"><span class="toc-text">Minimise Bootstrap Time</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#AMI-saves-installation-time"><span class="toc-text">AMI saves installation time</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hibernate-saves-time-to-start-an-application"><span class="toc-text">Hibernate saves time to start an application</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#WAF-to-defense-against-traffic-pattern-IP"><span class="toc-text">WAF to defense against traffic pattern&#x2F;IP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Rate-based-rule"><span class="toc-text">Rate-based rule</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IP-match-conditions"><span class="toc-text">IP match conditions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WAF-Geo-Match"><span class="toc-text">WAF Geo Match</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#v-s-AWS-Shield"><span class="toc-text">v.s. AWS Shield</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Transactional-Processing-gt-Relational-Database"><span class="toc-text">Transactional Processing -&gt; Relational Database</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Choose-Load-Balancer-for-bastion-hosts"><span class="toc-text">Choose Load Balancer for bastion hosts</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Migrate-an-account-from-one-Organisation-to-Another"><span class="toc-text">Migrate an account from one Organisation to Another</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AWS-DataSync"><span class="toc-text">AWS DataSync</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#User-Cases"><span class="toc-text">User Cases</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Performance"><span class="toc-text">Performance</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Automation"><span class="toc-text">Automation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Outcome"><span class="toc-text">Outcome</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Security"><span class="toc-text">Security</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Service-Integration"><span class="toc-text">Service Integration</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AWS-Transfers-Family"><span class="toc-text">AWS Transfers Family</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Route-53-Resolver-Resolving-DNS-queries-between-VPCs-and-your-network"><span class="toc-text">Route 53 Resolver: Resolving DNS queries between VPCs and your network</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Inbound-endpoint"><span class="toc-text">Inbound endpoint</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Outbound-endpoint"><span class="toc-text">Outbound endpoint</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Regional"><span class="toc-text">Regional</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#S3-Glacier-default-automatic-encryption"><span class="toc-text">S3 Glacier default automatic encryption</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AWS-CloudFormation-StackSets-and-templates"><span class="toc-text">AWS CloudFormation StackSets and templates</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Templates"><span class="toc-text">Templates</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Stack"><span class="toc-text">Stack</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#StackSets"><span class="toc-text">StackSets</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Administrator-and-target-accounts"><span class="toc-text">Administrator and target accounts</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stack-instances-reference-to-a-stack"><span class="toc-text">Stack instances: reference to a stack</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AWS-Config"><span class="toc-text">AWS Config</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AWS-Database-Migration-Service-DMS"><span class="toc-text">AWS Database Migration Service (DMS)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Homogeneous-Migrations"><span class="toc-text">Homogeneous Migrations</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#into-Data-Warehouse"><span class="toc-text">into Data Warehouse</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Continuous-Data-Replication"><span class="toc-text">Continuous Data Replication</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Pricing-2"><span class="toc-text">Pricing</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Aurora-v-s-Aurora-Serverless"><span class="toc-text">Aurora v.s. Aurora Serverless</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Aurora-Serverless"><span class="toc-text">Aurora Serverless</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Serverless"><span class="toc-text">Serverless</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#User-case"><span class="toc-text">User case</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Billing"><span class="toc-text">Billing</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Migration"><span class="toc-text">Migration</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#VPN-CloudHub-Providing-secure-communication-between-sites"><span class="toc-text">VPN CloudHub: Providing secure communication between sites</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#User-Case"><span class="toc-text">User Case</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-it-works"><span class="toc-text">How it works</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Kinesis-Enhanced-Fan-out"><span class="toc-text">Kinesis Enhanced Fan-out</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Kinesis-Data-Firehose-Destination-limination"><span class="toc-text">Kinesis Data Firehose Destination limination</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SQS-Standard-gt-FIFO"><span class="toc-text">SQS Standard-&gt;FIFO</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#FIFO-naming"><span class="toc-text">FIFO naming</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Things-that-you-cannot-edit-convert-and-have-to-recreate"><span class="toc-text">Things that you cannot edit&#x2F;convert, and have to recreate</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Service-Control-Policies-SCP"><span class="toc-text">Service Control Policies (SCP)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#S3-Glacier-Vault-and-Vault-Lock"><span class="toc-text">S3 Glacier Vault and Vault Lock</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#S3-object-metadata-is-not-encrypted"><span class="toc-text">S3 object metadata is not encrypted</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AWS-Step-Functions"><span class="toc-text">AWS Step Functions</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AWS-Amazon-Simple-Workflow-Service-SWF"><span class="toc-text">AWS Amazon Simple Workflow Service (SWF)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Amazon-SWF-vs-AWS-Step-Functions"><span class="toc-text">Amazon SWF vs. AWS Step Functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Amazon-SWF-v-s-Amazon-SQS"><span class="toc-text">Amazon SWF v.s. Amazon SQS</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#NAT-gateway-v-s-NAT-instance"><span class="toc-text">NAT gateway v.s. NAT instance</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Snowball-or-Snowmobile"><span class="toc-text">Snowball or Snowmobile</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Default-EC2-monitoring"><span class="toc-text">Default EC2 monitoring</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#VPC-Sharing"><span class="toc-text">VPC Sharing</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Global-Accelerator-v-s-CloudFront"><span class="toc-text">Global Accelerator v.s. CloudFront</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Schema-Conversion-Tool-of-DMS"><span class="toc-text">Schema Conversion Tool of DMS</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#File-Gateway-v-s-Volume-Gateway"><span class="toc-text">File Gateway v.s. Volume Gateway</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#File-Gateway"><span class="toc-text">File Gateway</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Volume-Gateway"><span class="toc-text">Volume Gateway</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Tape-Gateway"><span class="toc-text">Tape Gateway</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Site-to-Site-VPN-terms"><span class="toc-text">Site-to-Site VPN terms</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Basic-Schema-Copy-of-DMS"><span class="toc-text">Basic Schema Copy of DMS</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Limitations-to-changing-tenancy"><span class="toc-text">Limitations to changing tenancy</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SQS-Delay-Queues"><span class="toc-text">SQS Delay Queues</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#VPC-Wizard-Configs"><span class="toc-text">VPC Wizard Configs</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#EFS-is-POSIX-compliant"><span class="toc-text">EFS is POSIX-compliant</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#VPC-Sharing-1"><span class="toc-text">VPC Sharing</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DataSync"><span class="toc-text">DataSync</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">search</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> Sometimes rewarding, always fun </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        AWS SAA Preparation: The final week
    </div>

    <div class="post-meta">
        <span class="attr">Post<span>2020-09-06 11:45:16</span></span>
        
        <span class="attr">Tags/
        
        <a class="tag" href="/tags/#AWS" title="AWS">AWS</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#AWS SAA" title="AWS SAA">AWS SAA</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">Visit<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <p>For the upcoming week (7 Sep - 13 Sep) I will put my first priority on passing the SAA Exam  And patch the knowledge gap as much as I can.</p>
<h1 id="Patch-my-EC2-Knowledge"><a href="#Patch-my-EC2-Knowledge" class="headerlink" title="Patch my EC2 Knowledge"></a>Patch my EC2 Knowledge</h1><h2 id="Inspector"><a href="#Inspector" class="headerlink" title="Inspector"></a>Inspector</h2><ul>
<li>Installed into EC2 instances as an agent; </li>
<li>Run automated tests</li>
<li>Generate PDF report</li>
</ul>
<h2 id="Options-to-Connect-to-instance"><a href="#Options-to-Connect-to-instance" class="headerlink" title="Options to Connect to instance"></a>Options to Connect to instance</h2><h3 id="A-standalone-SSH-Client"><a href="#A-standalone-SSH-Client" class="headerlink" title="A standalone SSH Client"></a>A standalone SSH Client</h3><p>Done that.</p>
<h3 id="Session-Manager"><a href="#Session-Manager" class="headerlink" title="Session Manager"></a>Session Manager</h3><ul>
<li><a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager.html" target="_blank" rel="noopener">AWS Systems Manager Session Manager</a></li>
<li>Manage your EC2 instances, on-premises instances, and virtual machines (VMs) through an interactive one-click browser-based shell or through the AWS CLI)</li>
</ul>
<h3 id="EC2-Instance-Connect-Browser-based-SSH-connect"><a href="#EC2-Instance-Connect-Browser-based-SSH-connect" class="headerlink" title="EC2 Instance Connect (Browser-based SSH connect)"></a>EC2 Instance Connect (Browser-based SSH connect)</h3><ul>
<li>Connect to your EC2 instance within your browser</li>
<li>A temporary key managed by AWS</li>
</ul>
<h2 id="EC2-Launch-Types"><a href="#EC2-Launch-Types" class="headerlink" title="EC2 Launch Types"></a>EC2 Launch Types</h2><h3 id="Dedicated-Instances"><a href="#Dedicated-Instances" class="headerlink" title="Dedicated Instances"></a>Dedicated Instances</h3><p>May share hardware with other instances from the <strong>same AWS account</strong> that are not Dedicated instances. </p>
<h4 id="Pricing"><a href="#Pricing" class="headerlink" title="Pricing"></a>Pricing</h4><p>Dedicated Instance can be on-demand or reserved (1 or 3 years)<br>Dedicated Instance pricing has two components: </p>
<ul>
<li>(1) an hourly per instance usage fee. Slightly more expensive than on-demand fee.</li>
<li>(2) a dedicated per region fee (note that you pay this once per hour regardless of how many Dedicated Instances youre running). $2 per hour.</li>
</ul>
<h3 id="Dedicated-Hosts"><a href="#Dedicated-Hosts" class="headerlink" title="Dedicated Hosts"></a>Dedicated Hosts</h3><ul>
<li>BYOL</li>
<li>Targeted/Automatic instance placement</li>
<li>Visibility of socket, host ID, core</li>
<li>Affinity between a host and instance</li>
<li>When you no longer need to use a host, if it is an On-Demand Dedicated Host, you first need to stop or terminate all of the instances running on the host, and then you can release the host using the ReleaseHosts API or the AWS Management Console.</li>
</ul>
<h4 id="Pricing-1"><a href="#Pricing-1" class="headerlink" title="Pricing"></a>Pricing</h4><ul>
<li>The price for a Dedicated Host varies by instance <strong>family</strong>, region, and payment option. </li>
<li>Regardless of the quantity or the size of instances that you choose to launch on a particular Dedicated Host you only pay for each active Dedicated Host.</li>
<li>Can be on-demand or reserved. You can also purchase saving plans.</li>
</ul>
<h3 id="Spot-Instance-Lifecycle"><a href="#Spot-Instance-Lifecycle" class="headerlink" title="Spot Instance Lifecycle"></a>Spot Instance Lifecycle</h3><img src="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/images/spot_lifecycle.png" alt="spot lifecycle" width="400px"/>

<h3 id="Spot-Instance-Request-States"><a href="#Spot-Instance-Request-States" class="headerlink" title="Spot Instance Request States"></a>Spot Instance Request States</h3><img src="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/images/spot_request_states.png" alt="request stats" width="400px"/>

<h4 id="End-of-lifecycle-States"><a href="#End-of-lifecycle-States" class="headerlink" title="End of lifecycle States:"></a>End of lifecycle States:</h4><ul>
<li>Failed</li>
<li>Closed (one-time)</li>
<li>Cancelled (persistent)</li>
</ul>
<h4 id="If-you-terminate-an-instance"><a href="#If-you-terminate-an-instance" class="headerlink" title="If you terminate an instance:"></a>If you terminate an instance:</h4><ul>
<li>Disabled (For persistent request)</li>
<li>Closed (For one-time request)</li>
</ul>
<h4 id="One-time-request"><a href="#One-time-request" class="headerlink" title="One-time request:"></a>One-time request:</h4><ul>
<li>open  The request is waiting to be fulfilled.</li>
<li>active  The request is fulfilled and has an associated Spot Instance.</li>
<li>closed  The Spot <strong>Instance</strong> was interrupted or terminated (One-time request)</li>
</ul>
<h4 id="Persistent-request"><a href="#Persistent-request" class="headerlink" title="Persistent request:"></a>Persistent request:</h4><ul>
<li>open  The request is waiting to be fulfilled.</li>
<li>active  The request is fulfilled and has an associated Spot Instance.</li>
<li>disabled  You <strong>stopped</strong> the Spot Instance.</li>
<li>cancelled  You canceled the request, or the request expired.</li>
</ul>
<h3 id="Spot-Fleet"><a href="#Spot-Fleet" class="headerlink" title="Spot Fleet"></a>Spot Fleet</h3><p>Launch and manage an entire fleet of Spot Instances with one request.</p>
<ul>
<li><p>The Spot Fleet will try to meet the target capacity with price constraints</p>
<ul>
<li>Define possible launch pools: instance type (m5.large), OS, Availability Zone</li>
<li>Can have multiple launch pools, so that the fleet can choose</li>
<li>Spot Fleet <strong>stops</strong> launching instances when reaching capacity or max cost</li>
</ul>
</li>
<li><p>Strategies to allocate Spot Instances:</p>
<ul>
<li>lowestPrice: from the pool with the lowest price (cost optimization, short workload)</li>
<li>diversified: distributed across all pools (great for availability, long workloads)</li>
<li>capacityOptimized: pool with the optimal capacity for the number of instances</li>
</ul>
</li>
</ul>
<p><strong>Spot Fleets allow us to automatically request Spot Instances with the lowest price</strong></p>
<h3 id="Spot-Block"><a href="#Spot-Block" class="headerlink" title="Spot Block"></a>Spot Block</h3><p>Use the new <code>BlockDuration parameter</code> to specify the number of hours your want your instance(s) to run. </p>
<h2 id="Security-Group"><a href="#Security-Group" class="headerlink" title="Security Group"></a>Security Group</h2><p>(Points taken from <a href="https://www.udemy.com/course/aws-certified-solutions-architect-associate-saa-c02/" target="_blank" rel="noopener">Stephanes Udemy Course</a>)</p>
<ul>
<li>Works outside the EC2: EC2 instance wont know about the blocked traffic</li>
<li>Good to maintain a separate security group for SSH access</li>
<li>If your application is <strong>not accessible (time out)</strong>, then its a security group issue</li>
<li>If your application gives a <strong>connection refused error</strong>, then its an application error, or its not launched</li>
</ul>
<h2 id="Elastic-IP"><a href="#Elastic-IP" class="headerlink" title="Elastic IP"></a>Elastic IP</h2><p>(Points taken from <a href="https://www.udemy.com/course/aws-certified-solutions-architect-associate-saa-c02/" target="_blank" rel="noopener">Stephanes Udemy Course</a>)<br>Try to avoid using Elastic IP:</p>
<ul>
<li>They often reflect poor architectural decisions</li>
<li>Instead, use a random public IP and register a DNS name to it</li>
<li>Or, as well see later, use a Load Balancer and dont use a public IP</li>
</ul>
<h2 id="Bootstrapping"><a href="#Bootstrapping" class="headerlink" title="Bootstrapping"></a>Bootstrapping</h2><ul>
<li>Bootstrapping means launching commands when a machine starts</li>
<li>Run once at the instance first start</li>
<li>The EC2 User Data Script runs with the root user</li>
</ul>
<p>Related Concept:</p>
<ul>
<li><a href="https://niuniuanran.github.io/2020/04/23/Architecting-for-the-Cloud-AWS-Best-Practices-Whitepaper-reading-notes/#Instantiating-Compute-Resources">Instantiating Compute Resources</a></li>
<li>Another approach of bootstrapping: AWS OpsWorks (Chef and Puppet)</li>
<li>Golden Image: AMI, RDS Snapshot, EBS Snapshot</li>
<li>Compared to the bootstrapping approach, a golden image:<ul>
<li>faster start times</li>
<li>removes dependencies to configuration services or third-party repositories.</li>
</ul>
</li>
</ul>
<h2 id="Instance-Types"><a href="#Instance-Types" class="headerlink" title="Instance Types"></a>Instance Types</h2><h3 id="Burstable-Instances-T2-T3"><a href="#Burstable-Instances-T2-T3" class="headerlink" title="Burstable Instances (T2/T3)"></a>Burstable Instances (T2/T3)</h3><ul>
<li>If the machine bursts, it utilizes burst credits</li>
<li>If all the credits are gone, the CPU becomes BAD</li>
<li>If your instance consistently runs low on credit, you need to move to a different kind of non-burstable instance</li>
<li>T2/T3 Unlimited: Pay extra if going over credit balance, but you dont lose performance. Careful: could be very costly if you dont monitor how much youve bursted.</li>
</ul>
<h3 id="Important-Families"><a href="#Important-Families" class="headerlink" title="Important Families"></a>Important Families</h3><p>C: Compute<br>G: GPU, video rendering/ML<br>M: Medium/Balanced, General purpose/Web APP<br>R: RAM, in-memory caches<br>I: I/O optimised (<strong>Instance Storage</strong>), Databases</p>
<h2 id="AMI"><a href="#AMI" class="headerlink" title="AMI"></a>AMI</h2><h3 id="AMI-Storage"><a href="#AMI-Storage" class="headerlink" title="AMI Storage"></a>AMI Storage</h3><ul>
<li>AMI lives in S3.</li>
<li>Amazon S3 is a durable, cheap and resilient storage where most of your backups will live (but you wont see them in the S3 console).</li>
<li>By default, your AMIs are private, and locked for your account / region.</li>
<li>You get charged for the storage space that AMI takes in S3.</li>
<li>Remove AMIs you dont use.</li>
</ul>
<h3 id="Copy-AMI"><a href="#Copy-AMI" class="headerlink" title="Copy AMI"></a>Copy AMI</h3><ul>
<li>If you copy an AMI shared with you, you are the owner of the new AMI, and you specify its region.</li>
<li>You cant copy an AMI with an associated <code>billingProduct</code> code that was shared with you from another account. This includes Windows AMIs and AMIs from the AWS Marketplace. </li>
<li>To copy a shared AMI with a <code>billingProduct</code> code, launch an EC2 instance in your account using the shared AMI and then create an AMI from the instance.</li>
<li>You cant copy an encrpyted AMI shared with you.</li>
<li>If you have the underlying snapshot and encryption key were shared with you, you can copy the snapshot while re-encrypting it with a key of your own. You own the copied snapshot, and can register it as a new AMI.</li>
</ul>
<h2 id="Placement-Group"><a href="#Placement-Group" class="headerlink" title="Placement Group"></a>Placement Group</h2><ul>
<li><strong>FREE</strong>: There is no charge for creating a placement group.</li>
<li>Instances with a tenancy of host cannot be launched in placement groups.</li>
</ul>
<h3 id="Spread"><a href="#Spread" class="headerlink" title="Spread"></a>Spread</h3><ul>
<li>Each instance placed on distinct racks</li>
<li>Each rack having its own network and power source</li>
<li>Reduce correlated failures</li>
<li>Can span multiple AZ in the same Region. </li>
<li>Maximum of <strong>7</strong> running instances per AZ per group (limited by number of racks available). If 3 AZ in a region, you can have at most 21 instances in the group.</li>
<li>If you need to have more than seven instances in an Availability Zone, then the recommendation is to use <strong>multiple spread placement groups</strong>. </li>
<li>Spread placement groups are not supported for Dedicated Instances or Dedicated Hosts.</li>
<li>Maximum availability requirement, isolated from failure of each other</li>
</ul>
<img src="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/images/placement-group-spread.png" alt="spread" width="400px"/>

<h3 id="Partition"><a href="#Partition" class="headerlink" title="Partition"></a>Partition</h3><ul>
<li>Amazon EC2 divides each group into logical segments called partitions. </li>
<li>Amazon EC2 ensures that <strong>each partition</strong> within a placement group has its <strong>own set of racks</strong>.</li>
<li>A partition placement group can have a maximum of 7 partitions per Availability Zone (limited by number of racks available). </li>
<li>A partition placement group with Dedicated Instances can have a maximum of two partitions (If you dont want to share the rack with other accounts, you can only be assigned 2 racks for your partitions).</li>
<li>Large <strong>distributed and replicated workloads</strong>: Hadoop Distributed File System (HDFS), HBase (a non-relational distributed database), Cassandra (NoSQL database), Kafka (stream-processing)</li>
</ul>
<img src="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/images/placement-group-partition.png" alt="partition" width="400px"/>

<h3 id="Cluster"><a href="#Cluster" class="headerlink" title="Cluster"></a>Cluster</h3><ul>
<li>A cluster placement group can span <strong>peered VPCs</strong> in the same Region. </li>
<li>Higher per-flow throughput limit of up to 10 Gbps for TCP/IP traffic </li>
<li>Placed in the same high-bisection bandwidth segment of the network.</li>
<li>Low network latency, high network throughput</li>
<li>Big Data job that needs to complete fast; Application that needs extremely low latency and high network throughput</li>
</ul>
<img src="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/images/placement-group-cluster.png" alt="cluster" width="300px"/>

<h2 id="Elastic-Network-Interfaces-ENI"><a href="#Elastic-Network-Interfaces-ENI" class="headerlink" title="Elastic Network Interfaces(ENI)"></a>Elastic Network Interfaces(ENI)</h2><ul>
<li>Every instance in a VPC has a default network interface/primary network interface. You cannot detach a primary network interface from an instance. </li>
<li>Logical component in a VPC that represents a virtual network card</li>
<li>You can create ENI independently and attach them on the fly (move them) on EC2 instances for failover. </li>
<li>The maximum number of network interfaces that you can use varies by instance type. </li>
<li>Bound to AZ</li>
<li>An ENI can have the following attributes:<ul>
<li>A primary private IPv4 address from the IPv4 address range of your VPC</li>
<li>One public IPv4 address (or it can have none)</li>
<li>One or more secondary private IPv4 addresses from the IPv4 address range of your VPC</li>
<li>One Elastic IP address (IPv4) per private IPv4 address</li>
<li>One or more IPv6 addresses</li>
<li><strong>One or more security groups</strong></li>
<li>A MAC address</li>
<li>A source/destination check flag</li>
<li>A description</li>
</ul>
</li>
</ul>
<img src="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/images/EC2_ENI_management_network.png" alt="ENI"/>

<p>eth0 is web servers jumpbox to external Internet, and eth1 is web servers jumpbox to Corporate Data centre.</p>
<h2 id="Hibernate"><a href="#Hibernate" class="headerlink" title="Hibernate"></a>Hibernate</h2><img src="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/images/hibernation-flow.png" alt="hibernate"/>

<ul>
<li>Hibernation saves the contents from the instance memory (RAM) to your <strong>Amazon EBS root volume</strong>.</li>
<li>You EBS root volume must be <strong>encrypted</strong>.</li>
<li>User Cases:<ol>
<li>Pre-Warm. If an instance or application takes a long time to bootstrap and build a memory footprint to become fully productive, you can use hibernation to <strong>pre-warm</strong> the instance. To pre-warm the instance, you:<ol>
<li>Launch it with hibernation enabled.</li>
<li>Bring it to a desired state.</li>
<li>Hibernate it, ready to be resumed to the same state as needed.</li>
</ol>
</li>
<li>Long-running processing on Spot instance.</li>
</ol>
</li>
<li>Prerequisites to hibernate an instance:<ol>
<li>Supported instance families: C3, C4, C5, M3, M4, M5, R3, R4, and R5.</li>
<li>Instance RAM size: must be less than 150 GB.</li>
<li>Instance size: not supported for bare metal instances</li>
<li>Supported EBS volume types: General Purpose SSD (gp2) or Provisioned IOPS SSD (io1 or io2). </li>
<li><strong>Have to enable hibernation at launch</strong>: You cannot enable hibernation on an existing instance (running or stopped).</li>
<li>Root volume has to be encrypted.</li>
</ol>
</li>
<li>We do not support keeping an instance hibernated for more than 60 days. To keep the instance for longer than 60 days, you must start the hibernated instance, stop the instance, and start it.</li>
<li>You cannot hibernate an instance that is in an <strong>Auto Scaling group</strong> or used by <strong>Amazon ECS</strong>.</li>
<li>You cant stop or hibernate instance store-backed instances.</li>
<li>The following actions are not supported for hibernation:<ol>
<li>Changing the instance type or size of a hibernated instance</li>
<li>Creating snapshots or AMIs from instances for which <strong>hibernation is enabled</strong></li>
<li>Creating snapshots or AMIs from hibernated instances </li>
</ol>
</li>
</ul>
<h1 id="AWS-Directory-Service"><a href="#AWS-Directory-Service" class="headerlink" title="AWS Directory Service"></a>AWS Directory Service</h1><p>AWS Managed Microsoft AD is built on actual Microsoft AD and does not require you to synchronize or replicate data from your existing Active Directory to the cloud.</p>
<p>Related concepts:</p>
<ul>
<li>IAM Federation, SSO</li>
<li>SAML Standard</li>
</ul>
<h1 id="Scalability-Availability-Fault-Tolerance"><a href="#Scalability-Availability-Fault-Tolerance" class="headerlink" title="Scalability, Availability, Fault Tolerance"></a>Scalability, Availability, Fault Tolerance</h1><ul>
<li>Vertical scalability is very common for non distributed systems, such as a database.</li>
<li>RDS, ElastiCache are services that can scale vertically.</li>
<li>Horizontal scaling implies distributed systems.</li>
<li>The goal of high availability is to survive a data center(AZ) loss. </li>
<li>High availability can be passive (RDS Multi-AZ) or active(horizontal scaling)</li>
<li>See <a href="https://niuniuanran.github.io/2020/07/06/AWS-SAA-Exam-Readiness-note/#high-availability-and-fault-tolerance">my other journal for HA v.s. Fault Tolerance</a></li>
</ul>
<h2 id="Elastic-Load-Balancing"><a href="#Elastic-Load-Balancing" class="headerlink" title="Elastic Load Balancing"></a>Elastic Load Balancing</h2><ul>
<li>Expose a single point of access (DNS) to your application. </li>
<li>Provide SSL termination (HTTPS) for your websites</li>
<li>Seamlessly mask failure of downstream instances</li>
<li>Enforce stickiness with cookies (ALB, CLB)</li>
<li>Host name: <code>[name]-[id].region.elb.amazonaws.com</code></li>
</ul>
<h3 id="ELB-is-Managed-Service"><a href="#ELB-is-Managed-Service" class="headerlink" title="ELB is Managed Service"></a>ELB is Managed Service</h3><ul>
<li>AWS Managed, guaranteed working</li>
<li>AWS manages upgrades, maintenance, inherently HA.</li>
</ul>
<h3 id="ELB-Pre-Warm"><a href="#ELB-Pre-Warm" class="headerlink" title="ELB Pre-Warm"></a>ELB Pre-Warm</h3><ul>
<li>Amazon ELB is able to handle the vast majority of use cases for our customers without requiring pre-warming (configuring the load balancer to have the appropriate level of capacity based on expected traffic). </li>
<li>In certain scenarios, such as when flash traffic is expected, or in the case where a load test cannot be configured to gradually increase traffic, we recommend that you contact us to have your load balancer pre-warmed.</li>
</ul>
<h3 id="ELB-Monitoring"><a href="#ELB-Monitoring" class="headerlink" title="ELB Monitoring"></a>ELB Monitoring</h3><ul>
<li>ELB access logs will log all access requests</li>
<li>CloudWatch Metrics gives you aggregated statistics</li>
</ul>
<h3 id="ALB-Trouble-Shooting"><a href="#ALB-Trouble-Shooting" class="headerlink" title="ALB Trouble Shooting"></a>ALB Trouble Shooting</h3><ol>
<li>4**: client induced</li>
<li>5**: application induced</li>
<li><strong>503</strong>: Service unavailable. <ol>
<li>Insufficient capacity in the load balancer</li>
<li>No registered instances</li>
<li>No healthy instances</li>
<li>Surge queue if full.</li>
</ol>
</li>
</ol>
<h3 id="ALB-v2-features"><a href="#ALB-v2-features" class="headerlink" title="ALB (v2) features"></a>ALB (v2) features</h3><ul>
<li>Layer 7: HTTP/HTTPS</li>
<li>Support redirects, e.g. HTTP to HTTPS</li>
<li>Support HTTP/2 and WebSocket</li>
<li>Can load balance to multiple applications on the same machine. </li>
<li>Port mapping to dynamic ports on ECS.</li>
<li>Can load balance to multiple HTTP applications across machines (target groups).</li>
<li>Great for microservices and containers.</li>
</ul>
<h3 id="ALB-Listeners"><a href="#ALB-Listeners" class="headerlink" title="ALB Listeners"></a>ALB Listeners</h3><p>Listeners support the following protocols and ports:</p>
<ul>
<li>Protocols: HTTP, HTTPS</li>
<li>Ports: 1-65535</li>
</ul>
<h4 id="Listener-Rules"><a href="#Listener-Rules" class="headerlink" title="Listener Rules"></a>Listener Rules</h4><ul>
<li>Each listener has a <strong>default rule</strong>.<ol>
<li>Default rules cant have conditions. </li>
<li>If the conditions for none of a listeners rules are met, then the action for the default rule is performed.</li>
</ol>
</li>
<li>You can optionally define additional rules. Each rule consists of:<ol>
<li>a priority, </li>
<li>one or more actions, </li>
<li>one or more conditions. </li>
</ol>
</li>
</ul>
<h4 id="Rule-Priority"><a href="#Rule-Priority" class="headerlink" title="Rule Priority"></a>Rule Priority</h4><ul>
<li>Each rule has a priority. </li>
<li>Rules are evaluated in priority order, from the <strong>lowest value to the highest value</strong>. </li>
<li>The default rule is evaluated last. </li>
<li>You can change the priority of a nondefault rule at any time. You cannot change the priority of the default rule.</li>
</ul>
<h4 id="Rule-Actions"><a href="#Rule-Actions" class="headerlink" title="Rule Actions"></a>Rule Actions</h4><p>Each rule action has <strong>a type</strong>, <strong>an order</strong>, and the <strong>information required</strong> to perform the action. </p>
<p>Action types:</p>
<ul>
<li><p><code>authenticate-cognito</code> (HTTPS)</p>
</li>
<li><p><code>authenticate-oidc</code> (HTTPS)</p>
</li>
<li><p><code>fixed-response</code></p>
</li>
<li><p><code>forward</code> Forward requests to the specified target groups.</p>
</li>
<li><p><code>redirect</code> Redirect requests from one URL to another.</p>
</li>
<li><p>The action with the <strong>lowest order value</strong> is performed first. </p>
</li>
<li><p>Each rule must include exactly one of the following actions: <code>forward</code>, <code>redirect</code>, or <code>fixed-response</code>, and it must be the <strong>last</strong> action to be performed.</p>
</li>
</ul>
<h4 id="Rule-Condition-Types"><a href="#Rule-Condition-Types" class="headerlink" title="Rule Condition Types"></a>Rule Condition Types</h4><ul>
<li>HTTP header</li>
<li>HTTP Request method</li>
<li>Host</li>
<li>Path</li>
<li>Query string</li>
<li>Source IP</li>
</ul>
<h3 id="ALB-Target-Groups"><a href="#ALB-Target-Groups" class="headerlink" title="ALB Target Groups"></a>ALB Target Groups</h3><ol>
<li>What could be in a target group:<ul>
<li>EC2 instances (could be managed by ASG)</li>
<li>ECS tasks (managed by Elastic Container Service)</li>
<li>Lambda functions, HTTP request is translated into a JSON event.</li>
<li>IP Address, must be <strong>private IPs</strong>.</li>
</ul>
</li>
<li>ALB can route to multiple target groups</li>
<li><strong>Each Target Group</strong> has its own <strong>Health Check settings</strong>.</li>
<li>Application Load Balancer periodically sends requests to its registered <strong>targets</strong> to test their status. </li>
</ol>
<h3 id="ALB-Slow-Start"><a href="#ALB-Slow-Start" class="headerlink" title="ALB Slow Start"></a>ALB Slow Start</h3><ol>
<li>Application Load Balancers now support a slow start mode that allows you to add new targets without overwhelming them with a flood of requests. </li>
<li>With the slow start mode, targets warm up before accepting their fair share of requests based on a ramp-up period that you specify.</li>
<li>Slow start mode can be enabled by target group and can be configured for a duration of 30 seconds to 15 minutes. </li>
<li>The load balancer linearly increases the number of requests sent to a new target in a target group up to its fair share during the slow start ramp-up window.</li>
</ol>
<h3 id="Visibility-of-Request-source"><a href="#Visibility-of-Request-source" class="headerlink" title="Visibility of Request source"></a>Visibility of Request source</h3><ul>
<li>The application servers dont see the clients IP directly<ul>
<li>Client IP is inserted in the header <code>X-Forwarded-For</code></li>
<li>Port: <code>X-Forwarded-Port</code></li>
<li>Proto: <code>X-Forwarded-Proto</code></li>
</ul>
</li>
</ul>
<h3 id="NLB-features"><a href="#NLB-features" class="headerlink" title="NLB features"></a>NLB features</h3><ul>
<li>~100ms latency (ALB: 400ms)</li>
<li>Used for extreme performance, TCP or UDP traffic</li>
<li>Not in free-tier</li>
<li>NLB enables <strong>static IP addresses</strong> for each Availability Zone. These static addresses <strong>dont change</strong>, so they are good for our firewalls whitelisting.</li>
</ul>
<h3 id="Static-IP-addressing"><a href="#Static-IP-addressing" class="headerlink" title="Static IP addressing"></a>Static IP addressing</h3><ul>
<li>ALB scale automatically to adapt to changes in your traffic. This makes planning for growth easy, but it has a side effect of <strong>changing the IP addresses</strong> that clients connect to. </li>
<li>NLB enables <strong>static IP addresses</strong> for each Availability Zone. These static addresses <strong>dont change</strong>, so they are good for our firewalls whitelisting.</li>
<li>To solve the problem: Put an <strong>internal Application Load Balancer</strong> behind a <strong>Network Load Balancer</strong>.</li>
</ul>
<h3 id="Load-Balancer-Stickiness"><a href="#Load-Balancer-Stickiness" class="headerlink" title="Load Balancer Stickiness"></a>Load Balancer Stickiness</h3><ul>
<li>Stickiness: The same client is always redirected to the same instance behind a load balancer</li>
<li>Supported by CLB and ALB</li>
<li>The cookie for stickiness has an expiration date you control</li>
<li>May bring imbalance to the load over the backend EC2 instances.</li>
</ul>
<h3 id="Availability-Zones-and-Load-Balancer-Nodes"><a href="#Availability-Zones-and-Load-Balancer-Nodes" class="headerlink" title="Availability Zones and Load Balancer Nodes"></a>Availability Zones and Load Balancer Nodes</h3><ul>
<li>Each ELB has multiple nodes.</li>
<li>When you <strong>enable an Availability Zone</strong> for your load balancer, Elastic Load Balancing creates a <strong>load balancer node</strong> in the <strong>Availability Zone</strong>. </li>
<li>We recommend you enable multiple AZ (ALB requires multiple AZ)</li>
<li>If you register targets in an Availability Zone but do not enable the Availability Zone, these registered targets do not receive traffic. </li>
<li>If one Availability Zone becomes unavailable or has no healthy targets, the load balancer can route traffic to the healthy targets in another Availability Zone.<br>Cross-zone load balancing enabled:</li>
</ul>
<img src="https://docs.aws.amazon.com/elasticloadbalancing/latest/userguide/images/cross_zone_load_balancing_enabled.png" alt="" width="600px"/>

<p>Cross-zone load balancing disabled:</p>
<img src="https://docs.aws.amazon.com/elasticloadbalancing/latest/userguide/images/cross_zone_load_balancing_disabled.png" alt="disabled"/>

<h4 id="Cross-Zone-Load-Blancing-for-different-types"><a href="#Cross-Zone-Load-Blancing-for-different-types" class="headerlink" title="Cross-Zone Load Blancing for different types"></a>Cross-Zone Load Blancing for different types</h4><ul>
<li>CLB: Disabled by default, no charges for inter AZ data if enabled</li>
<li>ALB: always on, cant be disabled, no charge for inter AZ data</li>
<li>NLB, disabled by default, charges apply for inner AZ data.</li>
</ul>
<h4 id="IP-addresses-of-Load-Balancer-Nodes"><a href="#IP-addresses-of-Load-Balancer-Nodes" class="headerlink" title="IP addresses of Load Balancer Nodes"></a>IP addresses of Load Balancer Nodes</h4><ul>
<li>Each node of an internet-facing load balancer has a public IP address. The DNS name of an internet-facing load balancer is publicly resolvable to the public IP addresses of the nodes. </li>
<li>The node of an internal load balancer has only private IP addresses. The DNS name of an internal load balancer is publicly resolvable to the private IP addresses of the nodes. </li>
<li>Both internet-facing and internal load balancers route requests to your targets using private IP addresses.</li>
<li>CLB for EC2-Classic must be internet-facing.</li>
</ul>
<h2 id="SNI"><a href="#SNI" class="headerlink" title="SNI"></a>SNI</h2><ul>
<li>Support for <strong>multiple SSL certificates</strong> on Load Balancers using <strong>Server Name Indication (SNI)</strong>. </li>
<li>You can now host multiple secure (HTTPS) applications, each with its own SSL certificate, behind one load balancer. </li>
<li>With SNI support, host multiple secure (HTTPS) applications, each with its own SSL certificate, behind one load balancer. </li>
</ul>
<h3 id="SNI-Available-in-ALB-NLB-CloudFront"><a href="#SNI-Available-in-ALB-NLB-CloudFront" class="headerlink" title="SNI Available in ALB, NLB, CloudFront"></a>SNI Available in ALB, NLB, CloudFront</h3><ul>
<li>Client indicates the hostname of the target server in the initial SSL handshake (<code>ClientHello</code>).</li>
<li>The server will then find the correct certificate, or return the default one.</li>
</ul>
<h3 id="HTTPS-listener-of-an-ALB"><a href="#HTTPS-listener-of-an-ALB" class="headerlink" title="HTTPS listener of an ALB"></a>HTTPS listener of an ALB</h3><ul>
<li>You manage certificates using ACM (AWS Certificate Manager)</li>
<li>You must specify a default certificate.</li>
<li>Client can use SNI (Server Name Indicator) to specify the hostname they reach.</li>
</ul>
<h3 id="SNI-only-supported-in-ALB-and-NLB"><a href="#SNI-only-supported-in-ALB-and-NLB" class="headerlink" title="SNI only supported in ALB and NLB"></a>SNI only supported in ALB and NLB</h3><ul>
<li>CLB:<ol>
<li>Support only ONE SSL certificate</li>
<li>Must use multiple CLBs for multiple hostnames with multiple SSL certificates</li>
</ol>
</li>
<li>NLB and ALB<ol>
<li>Support multiple listners with multiple SSL certificates</li>
<li>Use SNI to make it work: clients specify the hostname of the target server in the initial SSL handshake</li>
<li>The server will then find the correct certificate, or return the <strong>default</strong> one.</li>
<li>SNI is integrated with <strong>AWS Certificate Manager (ACM)</strong> and <strong>AWS Identity and Access Management (IAM)</strong> for certificate management. You can associate up to <strong>25 certificates</strong> to a load balancer <strong>in addition to a default certificate</strong> per listener.  </li>
</ol>
</li>
</ul>
<h2 id="ALB-Target-Group"><a href="#ALB-Target-Group" class="headerlink" title="ALB Target Group"></a>ALB Target Group</h2><h3 id="Deregistration-Delay"><a href="#Deregistration-Delay" class="headerlink" title="Deregistration Delay"></a>Deregistration Delay</h3><p><a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-target-groups.html#deregistration-delay" target="_blank" rel="noopener">Deregistration delay</a> help in-flight requests to the target to complete. You enable it at Target Group level.</p>
<ul>
<li>If a deregistering target has no in-flight requests and no active connections, Elastic Load Balancing immediately completes the deregistration process, without waiting for the deregistration delay to elapse. </li>
<li>However, even though target deregistration is complete, the status of the target will be displayed as draining until the deregistration delay elapses.</li>
</ul>
<h3 id="Sticky-Sessions"><a href="#Sticky-Sessions" class="headerlink" title="Sticky Sessions"></a>Sticky Sessions</h3><p><a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-target-groups.html#sticky-sessions" target="_blank" rel="noopener">Sticky Sessions</a> are a mechanism to route requests to the same target in a target group. This is useful for servers that <strong>maintain state information in order to provide a continuous experience to clients</strong>.</p>
<ul>
<li>Implemented by Cookie on client side. </li>
<li>Enabled at <strong>Target Group</strong> level.</li>
<li>When a load balancer first receives a request from a client, it routes the request to a target, <strong>generates a cookie named <code>AWSALB</code> that encodes information about the selected target</strong>, encrypts the cookie, and includes the cookie in the response to the client.</li>
</ul>
<h3 id="Lambda-functions-as-targets"><a href="#Lambda-functions-as-targets" class="headerlink" title="Lambda functions as targets"></a>Lambda functions as targets</h3><ul>
<li>You can <strong>register</strong> your Lambda functions as targets and configure a listener rule to forward requests to the target group for your Lambda function. When the load balancer forwards the request to a target group with a Lambda function as a target, it invokes your Lambda function and passes the content of the request to the Lambda function, in <strong>JSON</strong> format.</li>
<li>The Lambda function and target group must be in the same account and in the same Region.</li>
<li>The maximum size of the request body that you can send to a Lambda function is <strong>1 MB</strong>.</li>
<li>The maximum size of the response JSON that the Lambda function can send is <strong>1 MB</strong>.</li>
<li><strong>WebSockets are not supported</strong>. Upgrade requests are rejected with an HTTP 400 code.</li>
</ul>
<h2 id="Target-Group-Deregistration-Delay"><a href="#Target-Group-Deregistration-Delay" class="headerlink" title="Target Group Deregistration Delay"></a>Target Group Deregistration Delay</h2><p>Same feature different naming:</p>
<ul>
<li><p>CLB: Connection Draining</p>
</li>
<li><p>Target Group: Deregistration Delay</p>
</li>
<li><p>The time to complete in-flight requests while the instance is de-registering or unhealthy</p>
</li>
<li><p>ELB stop sending new requests while de-registering</p>
</li>
<li><p>0 to 3600sec, default 300 sec</p>
</li>
<li><p>Set to a low value if your requests are short</p>
</li>
</ul>
<h2 id="ASG"><a href="#ASG" class="headerlink" title="ASG"></a>ASG</h2><ul>
<li>ASG automatically registers new instances to an ELB</li>
<li>Metrics are computed for the <strong>overall ASG instances</strong>. During the warm-up period of an instance, it is not counted into the metrics.</li>
</ul>
<h3 id="Launch-Template"><a href="#Launch-Template" class="headerlink" title="Launch Template"></a>Launch Template</h3><p><strong>AWS recommend that you create Auto Scaling groups from launch templates to ensure that youre getting the latest features from Amazon EC2.</strong></p>
<ul>
<li>A launch template is similar to a launch configuration, in that it specifies instance configuration information. Included are the ID of the Amazon Machine Image (AMI), the instance type, a key pair, security groups, and the other parameters that you use to launch EC2 instances. </li>
<li>However, defining a launch template instead of a launch configuration allows you to have multiple <strong>versions</strong> of a template. </li>
<li>With versioning, you can create a subset of the full set of parameters and then reuse it to create other templates or template versions. </li>
<li>Can mix and match multiple instance types and purchase options.</li>
<li>For T2/T3 Unlimited, you can choose whether to enable applications to burst beyond the baseline for as long as needed with Launch Templace advanced options.</li>
</ul>
<h3 id="Launch-Configuration"><a href="#Launch-Configuration" class="headerlink" title="Launch Configuration"></a>Launch Configuration</h3><ul>
<li>AMI + Instance type</li>
<li>User Data</li>
<li>Storage: EBS volumes</li>
<li>Security Group</li>
<li>SSH key pair</li>
</ul>
<h3 id="ASG-with-multiple-instance-types-and-purchase-options"><a href="#ASG-with-multiple-instance-types-and-purchase-options" class="headerlink" title="ASG with multiple instance types and purchase options"></a>ASG with multiple instance types and purchase options</h3><ul>
<li>You can launch and automatically scale a fleet of On-Demand Instances and Spot Instances within a single Auto Scaling group. </li>
<li>In addition to receiving discounts for using Spot Instances, you can use Reserved Instances or a Savings Plan to receive discounted rates of the regular On-Demand Instance pricing. </li>
<li>All of these factors combined help you to optimize your cost savings for Amazon EC2 instances, while making sure that you obtain the desired scale and performance for your application.</li>
<li>You first specify the common configuration parameters in a <strong>launch template</strong>, and choose it when you create an Auto Scaling group. </li>
</ul>
<h3 id="ASG-Health-Check"><a href="#ASG-Health-Check" class="headerlink" title="ASG Health Check"></a>ASG Health Check</h3><ul>
<li>The health status of an Auto Scaling instance is either healthy or unhealthy. </li>
<li>All instances in your Auto Scaling group <strong>start in the healthy state</strong>. </li>
<li>Instances are assumed to be healthy <strong>unless Amazon EC2 Auto Scaling receives notification that they are unhealthy</strong>. </li>
<li>This notification can come from one or more of the following sources: <ol>
<li>Amazon EC2, </li>
<li>Elastic Load Balancing (ELB), </li>
<li>custom health check.</li>
</ol>
</li>
</ul>
<h4 id="EC2-Status-checks"><a href="#EC2-Status-checks" class="headerlink" title="EC2 Status checks"></a>EC2 Status checks</h4><ul>
<li>Healthy status: <code>running</code></li>
<li>Unhealthy status: <code>impaired</code>, <code>stopping</code>, <code>stopped</code>, <code>terminating</code>, <code>terminated</code>.</li>
</ul>
<h4 id="Elastic-Load-Balancing-ELB-Health-Checks"><a href="#Elastic-Load-Balancing-ELB-Health-Checks" class="headerlink" title="Elastic Load Balancing (ELB) Health Checks"></a>Elastic Load Balancing (ELB) Health Checks</h4><ul>
<li>Instances for groups that do not use ELB health checks are considered healthy if they are in the <code>running</code> state. </li>
<li>Instances for groups that use ELB health checks are considered healthy if they are in the <code>running</code> state <strong>AND</strong> they are reported as healthy by the load balancer.</li>
<li>If connection draining is enabled for your load balancer, Amazon EC2 Auto Scaling waits for in-flight requests to complete or the maximum timeout to expire, whichever comes first, before terminating instances due to a scaling event or health check replacement. </li>
</ul>
<h4 id="Custom-Health-Checks"><a href="#Custom-Health-Checks" class="headerlink" title="Custom Health Checks"></a>Custom Health Checks</h4><ul>
<li>If you have custom health checks, you can send the information from your health checks to Amazon EC2 Auto Scaling so that Amazon EC2 Auto Scaling can use this information. </li>
<li>For example, if you determine that an instance is not functioning as expected, you can set the health status of the instance to <code>Unhealthy</code>. </li>
<li>The next time that Amazon EC2 Auto Scaling performs a health check on the instance, it will determine that the instance is unhealthy and then launch a replacement instance. </li>
</ul>
<h3 id="Health-check-grace-period"><a href="#Health-check-grace-period" class="headerlink" title="Health check grace period"></a>Health check grace period</h3><ul>
<li>When an instance launches, Amazon EC2 Auto Scaling uses the value of the <code>HealthCheckGracePeriod</code> for the Auto Scaling group to determine how long to wait before checking the health status of the instance. </li>
<li>Amazon EC2 and Elastic Load Balancing health checks can complete before the health check grace period expires. However, Amazon EC2 Auto Scaling does not act on them until the health check grace period expires.</li>
<li>To provide ample warm-up time for your instances, ensure that the health check grace period covers the <strong>expected startup time</strong> for your application, from when an instance comes into service to when it can receive traffic. </li>
<li>If you add a lifecycle hook, the grace period does not start until the lifecycle hook actions are completed and the instance enters the <code>InService</code> state.</li>
</ul>
<h3 id="Replacing-Unhealthy-Instances"><a href="#Replacing-Unhealthy-Instances" class="headerlink" title="Replacing Unhealthy Instances"></a>Replacing Unhealthy Instances</h3><ul>
<li>After an instance has been marked unhealthy because of a health check, it is almost immediately scheduled for <strong>replacement</strong>. It never automatically recovers its health. </li>
<li>Amazon EC2 Auto Scaling creates a new scaling activity for terminating the unhealthy instance and then <strong>terminates</strong> it. Later, another scaling <strong>activity</strong> launches a new instance to replace the terminated instance.</li>
<li>When your instance is terminated, any associated Elastic IP addresses are disassociated. You must associate these Elastic IP addresses with the new instance <strong>manually</strong>. </li>
<li>When your instance is terminated, its attached EBS volumes are detached. You must attach these EBS volumes to the new instance <strong>manually</strong>. </li>
</ul>
<h2 id="Compare-the-times-related-with-ELB-ASG"><a href="#Compare-the-times-related-with-ELB-ASG" class="headerlink" title="Compare the times related with ELB/ASG"></a>Compare the times related with ELB/ASG</h2><ul>
<li>Scaling Cool-downs will be ignored if a health check fails and causes another auto-scaling event. Health Check Grace Periods will always be in place for the defined amount of time.</li>
<li>During Scaling Warm-Up period the newly scale-out instance is not counted towards the metrics, and ensures you do not create additional instances before the current instance is ready. If a new threshold of alarm is triggered, new scaling actions could still be taken. Cool-down period for simple scaling stops any further scaling actions.</li>
<li>During Health Check Grace Period ASG does not act on a failed health check, so that it does not gets terminated before it is ready.</li>
<li>ALB Slow start is to avoid flooding new instances with requests when it is starting.</li>
<li>Connection draining/deregistration delay is to finish any unfinished requests while stopping sending new requests during Scale-In.</li>
</ul>
<h3 id="Scale-in-related-periods"><a href="#Scale-in-related-periods" class="headerlink" title="Scale-in related periods"></a>Scale-in related periods</h3><ul>
<li>Cool-down</li>
<li>Connection Draining/Target Group De-registration Delay</li>
</ul>
<h3 id="Scale-out-related-periods"><a href="#Scale-out-related-periods" class="headerlink" title="Scale-out related periods"></a>Scale-out related periods</h3><ul>
<li>ALB Slow Start</li>
<li>Scaling Warm-Up</li>
<li>Cool-down</li>
<li>Health Check Grace Period</li>
</ul>
<h2 id="Standby-state-in-Auto-Scaling-group"><a href="#Standby-state-in-Auto-Scaling-group" class="headerlink" title="Standby state in Auto Scaling group"></a><code>Standby</code> state in Auto Scaling group</h2><ul>
<li>You can put an instance that is in the <code>InService</code> state into the <code>Standby</code> state, update or troubleshoot the instance, and then return the instance to service. </li>
<li>Instances that are on standby are still part of the Auto Scaling group, but they do not actively handle application traffic.</li>
<li>The Auto Scaling group does not update the instances that are currently in service. You can terminate these instances and let the Auto Scaling group replace them. Or, you can put the instances on <code>Standby</code>, update the software, and then put the instances back in service.</li>
<li>If there is a load balancer or target group attached to your Auto Scaling group, the instance is deregistered from the load balancer or target group.</li>
<li>By default, the value that you specified as your <strong>desired capacity is decremented when you put an instance on standby</strong>. This prevents the launch of an additional instance while you have this instance on standby. </li>
<li>Alternatively, you can specify that your desired capacity is not decremented. If you specify this option, the Auto Scaling group launches an instance to replace the one on standby. The intention is to help you maintain capacity for your application while one or more instances are on standby.</li>
<li>After you put an instance that was on standby back in service, the desired capacity is incremented. </li>
<li>Amazon EC2 Auto Scaling <strong>does not perform health checks</strong> on instances that are in a standby state. </li>
<li>While the instance is in a standby state, its health status reflects the status that it had <strong>before you put it on standby</strong>. Amazon EC2 Auto Scaling does not perform a health check on the instance until you put it back in service.</li>
</ul>
<img src="https://docs.aws.amazon.com/autoscaling/ec2/userguide/images/standby_lifecycle.png" alt="standby" width="400px"/>

<h2 id="Suspending-and-resuming-scaling-processes"><a href="#Suspending-and-resuming-scaling-processes" class="headerlink" title="Suspending and resuming scaling processes"></a>Suspending and resuming scaling processes</h2><h3 id="Better-Alternatives"><a href="#Better-Alternatives" class="headerlink" title="Better Alternatives"></a>Better Alternatives</h3><ul>
<li>Use the <code>standby</code> feature instead of the suspend-resume feature if you need to troubleshoot or reboot an instance. </li>
<li>Use the instance <strong>scale-in protection</strong> feature to prevent specific instances from being terminated during automatic scale in.</li>
</ul>
<h3 id="Scaling-Processes"><a href="#Scaling-Processes" class="headerlink" title="Scaling Processes"></a>Scaling Processes</h3><ul>
<li>Primary Process Types:<ol>
<li><code>Terminate</code></li>
<li><code>Launch</code></li>
</ol>
</li>
<li>Process Types related to Specific Scaling Features:<ol>
<li><code>AddToLoadBalancer</code>:  When you resume, ASG does not add the instances that were launched while this process was suspended. You must register those instances manually.</li>
<li><code>AlarmNotification</code></li>
<li><code>AZRebalance</code></li>
<li><code>HealthCheck</code>: this process can override the health check status that you write manually</li>
<li><code>ReplaceUnhealthy</code></li>
<li><code>ScheduledActions</code>:Performs the scheduled scaling actions that you create or that are created by the predictive scaling feature of AWS Auto Scaling.</li>
</ol>
</li>
</ul>
<h3 id="Choosing-to-Suspend"><a href="#Choosing-to-Suspend" class="headerlink" title="Choosing to Suspend"></a>Choosing to Suspend</h3><ul>
<li>Each process type can be suspended and resumed independently. </li>
<li>Keep in mind that suspending individual processes might interfere with other processes. Depending on the reason for suspending a process, you might need to suspend multiple processes together.</li>
</ul>
<h3 id="How-Amazon-EC2-Auto-Scaling-works-with-IAM"><a href="#How-Amazon-EC2-Auto-Scaling-works-with-IAM" class="headerlink" title="How Amazon EC2 Auto Scaling works with IAM"></a>How Amazon EC2 Auto Scaling works with IAM</h3><ul>
<li>If you have previously created an IAM role that your applications running on Amazon EC2 can assume, you can choose this role when you create a launch template or launch configuration.</li>
<li>IAM roles attached to an ASG will get assigned to EC2 instances</li>
</ul>
<h2 id="Scaling-Specific-Cooldown-Period"><a href="#Scaling-Specific-Cooldown-Period" class="headerlink" title="Scaling-Specific Cooldown Period"></a>Scaling-Specific Cooldown Period</h2><ul>
<li>One common use for scaling-specific cooldowns is with a scale-in policya policy that terminates instances based on a specific criteria or metric. Because this policy terminates instances, Amazon EC2 Auto Scaling needs less time to determine whether to terminate additional instances.</li>
<li>Specifying a shorter cool-down for scale-in policy will help reduce costs.</li>
</ul>
<h2 id="ASG-Default-Termination-Policy"><a href="#ASG-Default-Termination-Policy" class="headerlink" title="ASG Default Termination Policy"></a>ASG Default Termination Policy</h2><p>The default termination policy is designed to help ensure that your instances span Availability Zones evenly for high availability:</p>
<ol>
<li>Find the AZ which has the most number of instances. </li>
<li>If there are multiple instances in the AZ to choose from, delete the one with the oldest launch configuration.</li>
</ol>
<h1 id="EBS"><a href="#EBS" class="headerlink" title="EBS"></a>EBS</h1><h2 id="EBS-Volume-Types"><a href="#EBS-Volume-Types" class="headerlink" title="EBS Volume Types"></a>EBS Volume Types</h2><ul>
<li>HDD, including Throughput Optimized HDD (st1)    and Cold HDD (sc1), are NOT supported to be root volumes.</li>
<li>Only io1 supports EBS Multi-attach.</li>
<li>gp2 IO increases if the disk size increases; io1 can increase IO independently</li>
<li>io1 and io2 are good for database workloads:<ul>
<li>MongoDB</li>
<li>Cassandra</li>
<li>SQL family</li>
</ul>
</li>
<li>The IOPs threshold to move from gp2 to io1/io2: 16000</li>
<li>Use st1 for:<ol>
<li>Streaming workloads requiring consistent, fast throughput at a low price.    </li>
<li>Apache Kafka</li>
<li>Big data, data warehouses, log processing</li>
</ol>
</li>
<li>Use sc1 (cold HDD) for:<ol>
<li>infrequently accessed data</li>
<li>when lowest storage cost is important</li>
</ol>
</li>
</ul>
<h2 id="EBS-Snapshots"><a href="#EBS-Snapshots" class="headerlink" title="EBS Snapshots"></a>EBS Snapshots</h2><ul>
<li>EBS backups use I/O, and you shouldnt take snapshot when its handling lots of traffic.</li>
<li>Snapshots will be stored in S3 (but you wont directly see them)</li>
<li>Not necessary to detach volume to do snapshot, but recommended</li>
<li>You can copy snapshots across AZ/Region.</li>
<li>Snapshots can be automated using <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/snapshot-lifecycle.html" target="_blank" rel="noopener">Amazon Data Lifecycle Manager</a>.</li>
<li>EBS volumes restored by snapshots need to be pre-warmed (using fio or dd command to read the entire volume)</li>
</ul>
<h2 id="EBS-v-s-Instance-Store"><a href="#EBS-v-s-Instance-Store" class="headerlink" title="EBS v.s. Instance Store"></a>EBS v.s. Instance Store</h2><ul>
<li>Instance Store is <strong>physically</strong> attached to the machine.</li>
<li>Pros:<ol>
<li>Better I/O performance. Very High IOPs (because physical)</li>
<li>Good for buffer/cache/scratch data/temporary content</li>
<li>Data survives reboots</li>
</ol>
</li>
<li>Cons:<ol>
<li>Lose upon stop/termination</li>
<li>Cannot resize</li>
<li>Backups must be operated by the user.</li>
</ol>
</li>
</ul>
<h2 id="EBS-RAID-options"><a href="#EBS-RAID-options" class="headerlink" title="EBS RAID options"></a>EBS RAID options</h2><ul>
<li>RAID is possible as long as your OS supports it (both linux and windows can support RAID)</li>
<li>You could mount volumes in parallel in RAID settings</li>
<li>Increases IOPs beyond the capacity of io1/io2 (64000)</li>
</ul>
<h3 id="RAID-0-Increase-Performance"><a href="#RAID-0-Increase-Performance" class="headerlink" title="RAID 0 (Increase Performance)"></a>RAID 0 (Increase Performance)</h3><ul>
<li>Combining 2 or more volumes and getting the total disk space and I/O </li>
<li>But one disk fails, all the data is failed </li>
<li>Use cases would be:<ol>
<li>An application that needs a lot of IOPS and <strong>doesnt need fault-tolerance</strong> </li>
<li>A database that has replication already built-in </li>
</ol>
</li>
<li>Using this, we can have a very big disk with a lot of IOPS. For example:<ul>
<li>two 500 GiB Amazon EBS io1 volumes with 4,000 provisioned IOPS each will create a 1000 GiB RAID 0 array with an available bandwidth of 8,000 IOPS. </li>
</ul>
</li>
<li>I/O is distributed across the volumes in a stripe. If you add a volume, you get the <strong>straight addition of throughput and IOPS</strong>.</li>
</ul>
<h3 id="RAID-1-Increase-Fault-Tolerance"><a href="#RAID-1-Increase-Fault-Tolerance" class="headerlink" title="RAID 1 (Increase Fault Tolerance)"></a>RAID 1 (Increase Fault Tolerance)</h3><ul>
<li>RAID 1 = Mirroring a volume to another </li>
<li>If one disk fails, our logical volume is still working </li>
<li>We have to send the data to two EBS volume at the same time (2x network) </li>
<li>Use case:     <ol>
<li>Application that need increase volume fault tolerance </li>
<li>Need extra security from the standpoint of data durability</li>
</ol>
</li>
<li>For example: two 500 GiB Amazon EBS io1 volumes with 4,000 provisioned IOPS each will create a 500 GiB RAID 1 array with an available bandwidth of 4,000 IOPS.</li>
<li>Does not provide a write performance improvement; requires more Amazon EC2 to Amazon EBS bandwidth than non-RAID configurations because the data is written to multiple volumes simultaneously.</li>
</ul>
<h1 id="EFS"><a href="#EFS" class="headerlink" title="EFS"></a>EFS</h1><ul>
<li>While EFS does cost more than EBS ($0.30 per GB for EFS vs. $0.10 per GB for EBS), you only pay once per EFS file system. <ul>
<li>This means that if you attach a dozen instances to it, you will still pay the same amount as if you only had one instance attached to it. </li>
</ul>
</li>
<li>Uses security group to control access to EFS.</li>
<li>Encryption at rest using KMS</li>
<li>Compatible with Linux based AMI (not Windows. Use FSx for windows)</li>
<li>File system scales automatically, pay-per-space-use, no capacity planning.</li>
</ul>
<h2 id="EFS-Scale"><a href="#EFS-Scale" class="headerlink" title="EFS Scale"></a>EFS Scale</h2><ul>
<li>1000s of concurrent NFS clients, 10 GB+ /s throughput </li>
<li>Grow to Petabyte-scale network file system, automatically</li>
</ul>
<h2 id="Performance-Mode"><a href="#Performance-Mode" class="headerlink" title="Performance Mode"></a>Performance Mode</h2><ul>
<li>General purpose (default): latency-sensitive use cases</li>
<li>Max I/O   This mode scales to <strong>higher levels of aggregate throughput and performance</strong>, with <em>slightly higher latency</em>.</li>
</ul>
<h2 id="Storage-Tiers"><a href="#Storage-Tiers" class="headerlink" title="Storage Tiers"></a>Storage Tiers</h2><p>Storage Tiers (lifecycle management feature  move file after N days) </p>
<ol>
<li>Standard: for frequently accessed files </li>
<li>Infrequent access (EFS-IA): cost to retrieve files, lower price to store</li>
</ol>
<h1 id="RDS-amp-Aurora"><a href="#RDS-amp-Aurora" class="headerlink" title="RDS &amp; Aurora"></a>RDS &amp; Aurora</h1><h2 id="Amazon-RDS-Backup-and-Restore"><a href="#Amazon-RDS-Backup-and-Restore" class="headerlink" title="Amazon RDS Backup and Restore"></a>Amazon RDS Backup and Restore</h2><ul>
<li>By default, Amazon RDS creates and saves automated backups of your DB instance securely in <strong>Amazon S3</strong> for a user-specified <strong>retention period</strong>. </li>
<li>In addition, you can create <strong>snapshots</strong>, which are user-initiated backups of your instance that are <strong>kept until you explicitly delete them</strong>.</li>
<li>You can create a new instance from a database snapshots whenever you desire. Although database snapshots serve operationally as full backups, you are billed only for incremental <strong>storage use</strong>.</li>
</ul>
<h3 id="Automated-Backups"><a href="#Automated-Backups" class="headerlink" title="Automated Backups"></a>Automated Backups</h3><ul>
<li>Turned on by default.</li>
<li>Amazon RDS automatically creates a <strong>storage volume snapshot</strong> of your DB instance, backing up the entire <strong>DB instance</strong> and not just individual databases.  </li>
<li>Backup of the instance occurs during a <strong>daily</strong> user-configurable 30 minute period known as the <strong>backup window</strong>. </li>
<li>Transaction logs are backed-up by RDS every 5 minutes.</li>
<li>Automated backups are <strong>kept for a configurable number of days (called the backup retention period)</strong>. Your automatic backup retention period can be configured to up to 35 days.</li>
<li>Therefore, your latest restorable time is from the oldest backup (retention period ago) to 5 minutes before.</li>
</ul>
<h3 id="Point-in-time-Restores"><a href="#Point-in-time-Restores" class="headerlink" title="Point-in-time Restores"></a>Point-in-time Restores</h3><ul>
<li>You can restore your DB instance <strong>to any specific time</strong> during the backup retention period, creating a new DB instance. </li>
<li>To restore your database instance, you can use the AWS Console or Command Line Interface.</li>
<li>To determine the latest restorable time for a DB instance, use the AWS Console or Command Line Interface to look at the value returned in the <code>LatestRestorableTime</code> field for the DB instance. </li>
<li>The latest restorable time for a DB instance is typically within 5 minutes of the current time.  </li>
</ul>
<h3 id="Database-Snapshots"><a href="#Database-Snapshots" class="headerlink" title="Database Snapshots"></a>Database Snapshots</h3><ul>
<li>Database snapshots are user-initiated backups of your instance stored in Amazon S3 that are kept <strong>until you explicitly delete them</strong>. </li>
<li>You can create a new instance from a database snapshots whenever you desire. Although database snapshots serve operationally as full backups, you are billed only for incremental storage use.</li>
</ul>
<h3 id="Snapshot-Copies"><a href="#Snapshot-Copies" class="headerlink" title="Snapshot Copies"></a>Snapshot Copies</h3><ul>
<li>With Amazon RDS, you can copy DB snapshots and DB cluster snapshots. </li>
<li>You can copy <strong>automated or manual snapshots</strong>. </li>
<li>After you copy a snapshot, the copy is a <strong>manual snapshot</strong>(kept until you delete them). </li>
<li>You can copy a snapshot within the same AWS Region, you can copy a snapshot across AWS Regions, and you can copy a snapshot across AWS accounts. (similar to AMI and EBS snapshot)</li>
</ul>
<h2 id="Read-Replica-for-Read-Scalability"><a href="#Read-Replica-for-Read-Scalability" class="headerlink" title="Read Replica for Read Scalability"></a>Read Replica for Read Scalability</h2><ul>
<li>At most 5 read replicas for Non-Aurora</li>
<li>At most 15 read replicas for Aurora<h3 id="Read-Replica-for-both-non-Aurora-and-Aurora-RDS"><a href="#Read-Replica-for-both-non-Aurora-and-Aurora-RDS" class="headerlink" title="Read Replica for both non-Aurora and Aurora RDS"></a>Read Replica for both non-Aurora and Aurora RDS</h3></li>
<li>Within AZ, Cross AZ or Cross Region</li>
<li>Read Replica replication is <strong>ASYNC</strong>, so reads are eventually consistent</li>
<li>Read replicas can also be <strong>promoted</strong> when needed to become standalone DB instances. </li>
<li>Applications must update their connection string to leverage read replicas.</li>
</ul>
<h3 id="Non-Aurora-Read-Replica"><a href="#Non-Aurora-Read-Replica" class="headerlink" title="Non-Aurora Read Replica"></a>Non-Aurora Read Replica</h3><ul>
<li>Amazon RDS creates a <strong>second DB instance</strong> using a snapshot of the source DB instance.<br>0 It then uses the engines <strong>native asynchronous replication</strong> to update the read replica whenever there is a change to the source DB instance.</li>
</ul>
<h3 id="Aurora-Read-Replica"><a href="#Aurora-Read-Replica" class="headerlink" title="Aurora Read Replica"></a>Aurora Read Replica</h3><ul>
<li>Amazon Aurora futher extends the benefits of read replicas by employing an SSD-backed virtualized storage layer purpose-built for database workloads.</li>
<li>Amazon Aurora replicas share the same underlying storage as the source instance, lowering costs and avoiding the need to copy data to the replica nodes. </li>
</ul>
<h3 id="Network-Cost"><a href="#Network-Cost" class="headerlink" title="Network Cost"></a>Network Cost</h3><ul>
<li>In AWS theres a network cost when data goes from one AZ to another</li>
<li>To reduce the cost, you can have your read replica in the same AZ</li>
</ul>
<h2 id="RDS-multi-AZ-for-Availability"><a href="#RDS-multi-AZ-for-Availability" class="headerlink" title="RDS multi-AZ for Availability"></a>RDS multi-AZ for Availability</h2><ul>
<li><strong>SYNC</strong> replication between master and standby instances.</li>
<li>One DNS name - <strong>automatic app failover</strong> to standby</li>
<li>Failover automatically</li>
<li>For availability, not for scalability.</li>
</ul>
<img src="rds-multi-az.png" alt="" width="300px"/>

<h1 id="IAM-user-with-full-administrator-access"><a href="#IAM-user-with-full-administrator-access" class="headerlink" title="IAM user with full administrator access"></a>IAM user with full administrator access</h1><ul>
<li>An IAM user with full administrator access can perform almost all AWS tasks except a few tasks designated only for the root account user. </li>
<li>Some of the AWS tasks that only a root account user can do are as follows: <ol>
<li>change account name </li>
<li>change root password or root email address</li>
<li>change <strong>AWS support plan</strong></li>
<li>close AWS account</li>
<li><strong>enable MFA on S3 bucket delete</strong></li>
<li>create <strong>Cloudfront key pair</strong></li>
<li>register for GovCloud</li>
<li>Register as a seller in the <strong>Reserved Instance Marketplace</strong></li>
</ol>
</li>
</ul>
<p>These tasks will be allowed for admin User:<br>    1. delete any IAM user<br>    2. revokes permissions of themselves</p>
<h1 id="CloudFront-Key-Pairs"><a href="#CloudFront-Key-Pairs" class="headerlink" title="CloudFront Key Pairs"></a>CloudFront Key Pairs</h1><p>Each of the <strong>AWS accounts</strong> that you use to create <strong>CloudFront signed URLs</strong> or <strong>signed cookies</strong>your trusted signersmust have its own <strong>CloudFront key pair</strong>, and the key pair must be active. </p>
<h1 id="S3-Lifecycle-Transitions"><a href="#S3-Lifecycle-Transitions" class="headerlink" title="S3 Lifecycle Transitions"></a>S3 Lifecycle Transitions</h1><p>Amazon S3 supports a waterfall model for transitioning between storage classes, as shown in the following diagram.</p>
<img src="https://docs.aws.amazon.com/AmazonS3/latest/dev/images/lifecycle-transitions-v2.png" alt="waterfall model" width="600px"/>

<p>Remember the order:</p>
<ol>
<li>S3 Standard</li>
<li>S3 Standard-IA</li>
<li>S3 Intelligent-Tiering</li>
<li>S3 One Zone-IA</li>
<li>S3 Glacier</li>
<li>S3 Glacier Deep Archive</li>
</ol>
<p>Classes of lower number can go to higher numbered classes.</p>
<h1 id="Cross-Zone-load-balancing"><a href="#Cross-Zone-load-balancing" class="headerlink" title="Cross-Zone load balancing"></a>Cross-Zone load balancing</h1><ul>
<li>By default, cross-zone load balancing is enabled for Application Load Balancer and disabled for Network Load Balancer.</li>
<li>When cross-zone load balancing is enabled, each load balancer node distributes traffic across the registered targets in all the enabled Availability Zones. </li>
<li>When cross-zone load balancing is disabled, each load balancer node distributes traffic only across the registered targets in <strong>its Availability Zone</strong>.</li>
</ul>
<h1 id="ALB-Routing-Conditions"><a href="#ALB-Routing-Conditions" class="headerlink" title="ALB Routing Conditions"></a>ALB Routing Conditions</h1><ol>
<li>Path-based</li>
<li>Host-based</li>
<li>Query string parameter -based</li>
<li>Http header-based: any standard or custom attribute in the HTTP header</li>
<li>HTTP method-based routing</li>
<li>Source Ip address CIDR block-based </li>
</ol>
<h1 id="Amazon-Kinesis-Data-Streams-v-s-SQS"><a href="#Amazon-Kinesis-Data-Streams-v-s-SQS" class="headerlink" title="Amazon Kinesis Data Streams v.s. SQS"></a>Amazon Kinesis Data Streams v.s. SQS</h1><h2 id="Amazon-Kinesis-Data-Streams-Recommended-Cases"><a href="#Amazon-Kinesis-Data-Streams-Recommended-Cases" class="headerlink" title="Amazon Kinesis Data Streams Recommended Cases"></a>Amazon Kinesis Data Streams Recommended Cases</h2><ul>
<li><strong>Routing</strong> related records to the same record processor (as in streaming MapReduce). For example, counting and aggregation are simpler when all records for a given key are routed to the same record processor. A partition key is specified by your data producer while adding data to an Amazon Kinesis data stream.</li>
<li><strong>Ordering</strong> of records. For example, you want to transfer log data from the application host to the processing/archival host while maintaining the order of log statements.</li>
<li>Ability for <strong>multiple applications</strong> to consume the same stream <strong>concurrently</strong>. For example, you have one application that updates a real-time dashboard and another that archives data to Amazon Redshift. You want both applications to consume data from the same stream <strong>concurrently and independently</strong>. They can both work with all the shards, and they share the 2MB/s/shard throughput if enhanced fanout is not enabled. If you enable enhenced-fanout, each consumer has their own 2MB throughput.</li>
<li>Ability to consume records in the same order a few hours <strong>later</strong>. For example, you have a billing application and an audit application that runs a few hours behind the billing application. Because Amazon Kinesis Data Streams stores data for up to 7 days, you can run the audit application up to 7 days behind the billing application.</li>
</ul>
<h2 id="Amazon-SQS-Recommended-Cases"><a href="#Amazon-SQS-Recommended-Cases" class="headerlink" title="Amazon SQS Recommended Cases"></a>Amazon SQS Recommended Cases</h2><ul>
<li>Messaging semantics (such as message-level ack/fail) and visibility timeout. For example, you have a queue of work items and want to <strong>track the successful completion of each item independently</strong>. Amazon SQS tracks the ack/fail, so the application does not have to maintain a persistent checkpoint/cursor. Amazon SQS will delete acked messages and redeliver failed messages after a configured visibility timeout.</li>
<li><strong>Individual message delay</strong>. For example, you have a job queue and need to schedule individual jobs with a delay. With Amazon SQS, you can configure individual messages to have a delay of up to 15 minutes.</li>
<li>Dynamically increasing concurrency/throughput <strong>at read time</strong>. For example, you have a work queue and want to add more readers until the backlog is cleared. With Amazon Kinesis Data Streams, you can scale up to a sufficient number of shards (note, however, that youll need to provision enough shards <em>ahead of time</em>).</li>
<li>Leveraging Amazon SQSs ability to <strong>scale transparently</strong>. For example, you buffer requests and the load changes as a result of occasional load spikes or the natural growth of your business. Because each buffered request can be processed independently, Amazon SQS can scale transparently to handle the load without any provisioning instructions from you.</li>
</ul>
<h1 id="SQS-FIFO-Queue-Important-IDs"><a href="#SQS-FIFO-Queue-Important-IDs" class="headerlink" title="SQS FIFO Queue Important IDs"></a>SQS FIFO Queue Important IDs</h1><h2 id="Message-Group-ID"><a href="#Message-Group-ID" class="headerlink" title="Message Group ID"></a>Message Group ID</h2><p>The tag that specifies that a message belongs to a specific message group. Messages that belong to the same message group are <strong>always processed one by one</strong>, in a strict order relative to the message group (however, messages that belong to different message groups might be processed out of order).</p>
<h2 id="Message-deduplication-ID"><a href="#Message-deduplication-ID" class="headerlink" title="Message deduplication ID"></a>Message deduplication ID</h2><ul>
<li>The token used for <strong>deduplication of sent messages</strong>. </li>
<li>If a message with a particular message deduplication ID is sent successfully, any messages sent with the same message deduplication ID are accepted successfully but arent delivered during the <strong>5-minute deduplication interval</strong>.</li>
</ul>
<h1 id="Multiple-Consumers-of-SQS-and-Kinesis-Data-Stream"><a href="#Multiple-Consumers-of-SQS-and-Kinesis-Data-Stream" class="headerlink" title="Multiple Consumers of SQS and Kinesis Data Stream"></a>Multiple Consumers of SQS and Kinesis Data Stream</h1><ul>
<li>Of course you can have multiple consumers that consume from SQS. The difference is that, with Kinesis Data Stream, these applications can process the same messages concurrently and independently. With SQS, the consumers <strong>split the job</strong> and each process a subset of the message.</li>
<li>How the consumers of SQS FIFO split their job can be decided by the Message Group ID.</li>
<li>Therefore, if the question asks what to do if you want each Desktops data be processed by one consumer, you use SQS Group ID. It will be a waste to use Kinesis Data Stream, because you do not want each consumer to consume all records.</li>
</ul>
<h1 id="Kinesis-Data-Firehose-user-case"><a href="#Kinesis-Data-Firehose-user-case" class="headerlink" title="Kinesis Data Firehose user case"></a>Kinesis Data Firehose user case</h1><ul>
<li>Amazon Kinesis Data Firehose is the easiest way to load <strong>streaming data</strong> into <strong>data stores and analytics tools</strong>. </li>
<li>It can:<ol>
<li><strong>capture, transform, and load</strong> streaming data into Amazon S3, Amazon Redshift, Amazon Elasticsearch Service, and Splunk, </li>
<li>enabling near real-time analytics with existing business intelligence tools and dashboards. </li>
</ol>
</li>
<li>It is a <strong>fully managed service</strong> that <strong>automatically scales</strong> to match the throughput of your data and requires no ongoing administration. </li>
<li>It can also <strong>batch, compress, and encrypt</strong> the data before loading it</li>
<li>It can help <strong>minimise the amount of storage used at the destination</strong> and increasing security.</li>
</ul>
<blockquote>
<p>A geological research agency maintains the seismological data for the last 100 years. The data has a velocity of 1GB per minute. You would like to store the data with only the most relevant attributes to build a predictive model for earthquakes.<br>What AWS services would you use to build the most cost-effective solution with the LEAST amount of infrastructure maintenance?</p>
</blockquote>
<ul>
<li>The correct choice is to ingest the data in Kinesis Data Firehose and use a Lambda function to filter and transform the incoming data before the output is dumped on S3. <ol>
<li>This way you only <strong>store a sliced version of the data</strong> with only the relevant data attributes required for your model.</li>
<li>Also it should be noted that this solution is entirely serverless and requires no infrastructure maintenance.</li>
</ol>
</li>
</ul>
<h1 id="EC2-Auto-Scaling-Lifecycle-Hooks"><a href="#EC2-Auto-Scaling-Lifecycle-Hooks" class="headerlink" title="EC2 Auto Scaling Lifecycle Hooks"></a>EC2 Auto Scaling Lifecycle Hooks</h1><img src="https://docs.aws.amazon.com/autoscaling/ec2/userguide/images/lifecycle_hooks.png"/>

<h1 id="Amazon-MQ"><a href="#Amazon-MQ" class="headerlink" title="Amazon MQ"></a>Amazon MQ</h1><ul>
<li>Amazon MQ is a managed <strong>message broker service</strong> for Apache ActiveMQ that makes it easy to set up and operate message brokers in the cloud. </li>
<li>Message brokers allow different software systemsoften using different programming languages, and on different platformsto <strong>communicate and exchange information</strong>. </li>
<li>If an organization is using messaging with existing applications and wants to move the messaging service to the cloud quickly and easily, AWS recommends Amazon MQ for such a use case. </li>
</ul>
<h1 id="AWS-Storage-Gateway-File-Gateways"><a href="#AWS-Storage-Gateway-File-Gateways" class="headerlink" title="AWS Storage Gateway - File Gateways"></a>AWS Storage Gateway - File Gateways</h1><p>Supports NFS interface.</p>
<img src="https://docs.aws.amazon.com/storagegateway/latest/userguide/images/file-gateway-concepts-diagram.png"/>

<h1 id="Auto-Scaling-Scheduled-Action-desired-min-max"><a href="#Auto-Scaling-Scheduled-Action-desired-min-max" class="headerlink" title="Auto Scaling Scheduled Action: desired, min, max"></a>Auto Scaling Scheduled Action: desired, min, max</h1><ul>
<li>If we know exactly how many instances we want at a certain time, set the auto scaling scheduled action with the desired instance number. When we want to specify a range of instance number, then we must use min and max values.</li>
<li>A scheduled action sets the minimum, maximum, and desired sizes to what is specified by the scheduled action at the time specified by the scheduled action. <strong>It does not keep track of old values and return to the older values after the end time.</strong> You need to schedule another scaling action to go back to the old value if you need.</li>
<li>You can create a maximum of 125 scheduled actions per Auto Scaling group.</li>
<li>You can temporarily disable scheduled scaling without deleting your scheduled actions. </li>
<li>You can schedule scaling beyond EC2:<ol>
<li>EC2</li>
<li>Spot Fleet request</li>
<li>EMR cluster</li>
<li>DynamoDB</li>
<li>Lambda provisioned concurrency </li>
</ol>
</li>
</ul>
<h1 id="DynamoDB-Capacity-setting"><a href="#DynamoDB-Capacity-setting" class="headerlink" title="DynamoDB Capacity setting"></a>DynamoDB Capacity setting</h1><h2 id="Provisioned-Mode-default-free-tier-eligible"><a href="#Provisioned-Mode-default-free-tier-eligible" class="headerlink" title="Provisioned Mode (default, free-tier eligible)"></a>Provisioned Mode (default, free-tier eligible)</h2><ul>
<li>If you choose provisioned mode, you specify the number of reads and writes per second that you require for your application. </li>
<li>You can use <strong>auto scaling</strong> to adjust your tables provisioned capacity automatically in response to traffic changes. This helps you govern your DynamoDB use to stay at or below a defined request rate in order to obtain cost predictability.<h2 id="On-Demand-Mode"><a href="#On-Demand-Mode" class="headerlink" title="On-Demand Mode"></a>On-Demand Mode</h2>Amazon DynamoDB on-demand is a flexible billing option capable of serving thousands of requests per second without capacity planning. DynamoDB on-demand offers <strong>pay-per-request</strong> pricing for read and write requests so that you pay only for what you use.</li>
</ul>
<h1 id="ElastiCache-Redis-vs-Memcached"><a href="#ElastiCache-Redis-vs-Memcached" class="headerlink" title="ElastiCache Redis vs Memcached"></a>ElastiCache Redis vs Memcached</h1><p>Memcached is designed for simplicity while Redis offers a rich set of features that make it effective for a wide range of use cases.</p>
<img src="https://media.datacumulus.com/aws-saa-pt/assets/pt1-q60-i1.jpg"/>

<p>Redis supports:</p>
<ol>
<li>Snapshot</li>
<li>Replication</li>
<li>Pub/Sub</li>
<li>Encryption</li>
<li>Online Cluster Resizing</li>
<li>HIPAA eligible</li>
<li>PCI DSS Compliant</li>
</ol>
<p>Memcached features:</p>
<ol>
<li>Auto Recovery</li>
<li>Simplify the way an application connects to a cluster</li>
<li>Multithreaded architecture</li>
</ol>
<h1 id="Amazon-FSx-for-Lustre"><a href="#Amazon-FSx-for-Lustre" class="headerlink" title="Amazon FSx for Lustre"></a>Amazon FSx for Lustre</h1><ul>
<li>Amazon FSx for Lustre is a fully managed service that provides cost-effective, high-performance storage for <strong>compute workloads</strong>.</li>
<li>FSx for Lustre file systems can also be linked to Amazon S3 buckets, allowing you to access and process data concurrently from both a high-performance file system and from the S3 API.</li>
<li>Example workloads depend on compute instances accessing the <strong>same set of data through high-performance shared storage</strong>:<ol>
<li>machine learning, </li>
<li>high performance computing (HPC), </li>
<li>video rendering, and </li>
<li>financial simulations </li>
</ol>
</li>
<li>Only support <strong>Linux</strong>.</li>
<li>oes not support Microsofts Distributed File System (DFS). If you want DFS, Microsoft AD, Service Message Block (SMB) protocol, Distributed File System Replication (DFSR) service, use FSx for Windows.</li>
</ul>
<h2 id="Linked-with-S3-buckets"><a href="#Linked-with-S3-buckets" class="headerlink" title="Linked with S3 buckets"></a>Linked with S3 buckets</h2><p>Typical user case:</p>
<blockquote>
<p>The hot data needs to be both processed and stored quickly in a parallel and distributed fashion. The cold data needs to be kept for reference with quick access for reads and updates at a low cost.</p>
</blockquote>
<h2 id="FSx-for-Windows"><a href="#FSx-for-Windows" class="headerlink" title="FSx for Windows"></a>FSx for Windows</h2><p>FSx for Windows does not allow you to present S3 objects as files and does not allow you to write changed data back to S3. </p>
<h1 id="AWS-Glue"><a href="#AWS-Glue" class="headerlink" title="AWS Glue"></a>AWS Glue</h1><p>AWS Glue is a fully managed <strong>extract, transform, and load (ETL)</strong> service that makes it easy for customers to <strong>prepare and load their data for analytics</strong>. AWS Glue job is meant to be used for batch ETL data processing. </p>
<h1 id="Route-53-Private-Hosted-Zones"><a href="#Route-53-Private-Hosted-Zones" class="headerlink" title="Route 53 Private Hosted Zones"></a>Route 53 Private Hosted Zones</h1><ul>
<li>A private hosted zone is a container that holds information about how you want Amazon Route 53 to respond to DNS queries for a domain and its subdomains <strong>within one or more VPCs</strong> that you create with the Amazon VPC service. </li>
</ul>
<h2 id="VPC-Config"><a href="#VPC-Config" class="headerlink" title="VPC Config"></a>VPC Config</h2><p>For each VPC that you want to associate with the Route 53 hosted zone, change the following VPC settings to true:</p>
<ol>
<li><code>enableDnsHostnames</code></li>
<li><code>enableDnsSupport</code></li>
</ol>
<h2 id="Supported-routing-policies-for-records-in-a-private-hosted-zone"><a href="#Supported-routing-policies-for-records-in-a-private-hosted-zone" class="headerlink" title="Supported routing policies for records in a private hosted zone"></a>Supported routing policies for records in a private hosted zone</h2><p>You can use the following routing policies when you create records in a private hosted zone:</p>
<ol>
<li>Simple routing</li>
<li>Failover routing</li>
<li>Multivalue answer routing</li>
<li>Weighted routing    </li>
</ol>
<h1 id="Lambda"><a href="#Lambda" class="headerlink" title="Lambda"></a>Lambda</h1><h2 id="Supported-Languages"><a href="#Supported-Languages" class="headerlink" title="Supported Languages"></a>Supported Languages</h2><ul>
<li>C#/.NET</li>
<li>Python</li>
<li>Java</li>
<li>Go</li>
<li>Node.js</li>
<li>Ruby</li>
<li>Powershell</li>
</ul>
<h2 id="Limits"><a href="#Limits" class="headerlink" title="Limits"></a>Limits</h2><ul>
<li>Max <strong>1000</strong> running concurrently</li>
<li><code>/tmp</code> directory can contain up to 500MB</li>
<li>Maximum timeout: 15min</li>
<li>You can allocate any amount of memory to your function between <strong>128MB and 3008MB</strong>, in 64MB increments.</li>
</ul>
<h2 id="Alternative-Serverless-Compute-Fargate"><a href="#Alternative-Serverless-Compute-Fargate" class="headerlink" title="Alternative Serverless Compute: Fargate"></a>Alternative Serverless Compute: Fargate</h2><p>If you need long running tasks (&gt;15 mins) and a custom OS environment, consider using <strong>Fargate</strong>.</p>
<h2 id="Cold-Starts"><a href="#Cold-Starts" class="headerlink" title="Cold Starts"></a>Cold Starts</h2><p>Serverless functions Cold Starts can cause delays in the user experiences. If your web-application relies on being very responsive, you want to re-consider Serverless functions.</p>
<h1 id="IAM-Permissions-Boundaries"><a href="#IAM-Permissions-Boundaries" class="headerlink" title="IAM Permissions Boundaries"></a>IAM Permissions Boundaries</h1><p><strong>IAM permission boundary can only be applied to roles or users, not IAM groups.</strong></p>
<h2 id="Goal-Delegate-permission-management-to-developers"><a href="#Goal-Delegate-permission-management-to-developers" class="headerlink" title="Goal: Delegate permission management to developers"></a>Goal: Delegate permission management to developers</h2><p>Make it easier for you to delegate permissions management to trusted employees.</p>
<img src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2018/07/02/delegated-admin-01.png"/>

<p>Example:</p>
<img src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2018/07/03/delegated-admin-02.png"/>

<h1 id="Elastic-Fabric-Adapter"><a href="#Elastic-Fabric-Adapter" class="headerlink" title="Elastic Fabric Adapter"></a>Elastic Fabric Adapter</h1><ul>
<li>Elastic Fabric Adapter (EFA) is a network interface for Amazon EC2 instances that enables customers to run applications requiring high levels of <strong>inter-node</strong> communications at scale on AWS. </li>
<li>Run HPC and ML applications at scale</li>
<li>With EFA, High Performance Computing (HPC) applications using the Message Passing Interface (MPI) and Machine Learning (ML) applications using NVIDIA Collective Communications Library (NCCL) can scale to thousands of CPUs or GPUs. </li>
<li>As a result, you get the application performance of on-premises HPC clusters with the on-demand elasticity and flexibility of the AWS cloud.</li>
<li>EFA is available as an optional EC2 networking feature that you can enable on any supported EC2 instance at <strong>no additional cost</strong>.</li>
</ul>
<h2 id="High-levels-of-inter-node-communications-and-high-network-traffic-Combo"><a href="#High-levels-of-inter-node-communications-and-high-network-traffic-Combo" class="headerlink" title="High levels of inter-node communications and high network traffic Combo"></a>High levels of inter-node communications and high network traffic Combo</h2><ul>
<li>Deploy EC2 instances with Elastic Fabric Adapter</li>
<li>Deploy EC2 instances in a cluster placement group</li>
</ul>
<h2 id="Cluster-v-s-Partition"><a href="#Cluster-v-s-Partition" class="headerlink" title="Cluster v.s. Partition"></a>Cluster v.s. Partition</h2><ul>
<li>Cluster is when you want low network latency, high network throughput</li>
<li>Partition is typically used by <strong>large distributed and replicated workloads</strong>, such as Hadoop, Cassandra, and Kafka. A partition placement group can have a maximum of seven partitions per Availability Zone. Since the partition placement group can have partitions in <strong>multiple Availability Zones in the same Region</strong>, it cannot support high levels of inter-node communications and high network traffic. Not good fit for HPC workload.</li>
</ul>
<h2 id="HPC-Workloads-Cluster"><a href="#HPC-Workloads-Cluster" class="headerlink" title="HPC Workloads: Cluster"></a>HPC Workloads: Cluster</h2><ul>
<li>HPC (High Performance Computing) workloads need to achieve <strong>low-latency network performance</strong> necessary for <strong>tightly-coupled node-to-node communication</strong> that is typical of HPC applications. </li>
<li>Cluster placement groups pack instances close together inside an Availability Zone.</li>
</ul>
<h1 id="CloudFront-Access-Control"><a href="#CloudFront-Access-Control" class="headerlink" title="CloudFront Access Control"></a>CloudFront Access Control</h1><p>With Amazon CloudFront, you can restrict access to your content through a number of capabilities.</p>
<h2 id="Signed-URLs-and-Signed-Cookies"><a href="#Signed-URLs-and-Signed-Cookies" class="headerlink" title="Signed URLs and Signed Cookies"></a>Signed URLs and Signed Cookies</h2><p>With Signed URLs and Signed Cookies, you can support Token Authentication to restrict access to only <strong>authenticated viewers</strong>. You need to use root account to sign up for a CloudFront Key Pair. </p>
<h2 id="Geo-Restriction"><a href="#Geo-Restriction" class="headerlink" title="Geo-Restriction"></a>Geo-Restriction</h2><ul>
<li>Through geo-restriction capability, you can prevent users in specific geographic locations from accessing content that youre distributing through CloudFront. </li>
<li>Can be paired with Route 53 Geolocation routing policy.</li>
</ul>
<h2 id="Origin-Access-Identity-OAI"><a href="#Origin-Access-Identity-OAI" class="headerlink" title="Origin Access Identity (OAI)"></a>Origin Access Identity (OAI)</h2><p>With Origin Access Identity (OAI) feature, you can restrict access to an <strong>Amazon S3 bucket</strong> to <strong>only be accessible from CloudFront</strong>.</p>
<h1 id="VPC-Peering"><a href="#VPC-Peering" class="headerlink" title="VPC Peering"></a>VPC Peering</h1><ul>
<li>A VPC peering connection is a networking connection between two VPCs that enables you to route traffic between them using <strong>private IPv4 addresses</strong> or IPv6 addresses. </li>
<li>Instances in either VPC can communicate with each other as if they are within the same network. </li>
<li>You can create a VPC peering connection between your own VPCs, or with a VPC in <strong>another AWS account</strong>. </li>
<li>The VPCs can be in <strong>different regions</strong> (also known as an inter-region VPC peering connection).</li>
</ul>
<h2 id="Connection"><a href="#Connection" class="headerlink" title="Connection"></a>Connection</h2><ul>
<li>AWS uses the existing infrastructure of a VPC to create a VPC peering connection; it is neither a gateway nor a VPN connection, and does not rely on a separate piece of physical hardware. </li>
<li>There is <strong>no single point of failure</strong> and <strong>no bandwidth bottleneck</strong>.</li>
</ul>
<h2 id="Inter-Region-VPC-Peering"><a href="#Inter-Region-VPC-Peering" class="headerlink" title="Inter-Region VPC Peering"></a>Inter-Region VPC Peering</h2><ul>
<li>You can establish peering relationships between VPCs across different AWS Regions (also called Inter-Region VPC Peering). </li>
<li>The traffic remains in the private IP space. </li>
<li>All inter-region traffic is <strong>encrypted</strong> with <strong>no single point of failure, or bandwidth bottleneck</strong>. </li>
<li>Traffic always stays on the global AWS backbone, and never traverses the public internet, which reduces threats, such as common exploits, and DDoS attacks. </li>
<li>Inter-Region VPC Peering provides a simple and cost-effective way to share resources between regions or replicate data for geographic redundancy.</li>
</ul>
<h2 id="No-Transitive-Peering"><a href="#No-Transitive-Peering" class="headerlink" title="No Transitive Peering"></a>No Transitive Peering</h2><p>You have a VPC peering connection between VPC A and VPC B (pcx-aaaabbbb), and between VPC A and VPC C (pcx-aaaacccc). There is no VPC peering connection between VPC B and VPC C. You cannot route packets directly from VPC B to VPC C through VPC A.</p>
<img src="https://docs.aws.amazon.com/vpc/latest/peering/images/transitive-peering-diagram.png"/>

<h2 id="No-CIDR-Overlapping"><a href="#No-CIDR-Overlapping" class="headerlink" title="No CIDR Overlapping"></a>No CIDR Overlapping</h2><img src="https://docs.aws.amazon.com/vpc/latest/peering/images/overlapping-cidrs-ipv6-diagram.png"/>

<p>Even if you intend to use the VPC peering connection for IPv6 communication only, you cannot create a VPC peering connection if the VPCs have matching or overlapping IPv4 CIDR blocks.</p>
<h1 id="DynamoDB-Accelerator"><a href="#DynamoDB-Accelerator" class="headerlink" title="DynamoDB Accelerator"></a>DynamoDB Accelerator</h1><img src="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/images/dax_high_level.png"/>

<h1 id="S3-Performance-with-Prefix"><a href="#S3-Performance-with-Prefix" class="headerlink" title="S3 Performance with Prefix"></a>S3 Performance with Prefix</h1><ul>
<li>Your applications can easily achieve thousands of transactions per second in request performance when uploading and retrieving storage from Amazon S3. </li>
<li>Amazon S3 automatically <strong>scales to high request rates</strong>. Your application can achieve at least 3,500 PUT/COPY/POST/DELETE or 5,500 GET/HEAD requests <strong>per second per prefix</strong> in a bucket.</li>
<li>There are <strong>no limits to the number of prefixes</strong> in a bucket. You can increase your read or write performance by <strong>parallelizing reads</strong>. </li>
<li>For example, if you create 10 prefixes in an Amazon S3 bucket to parallelize reads, you could scale your read performance to 55,000 read requests per second. </li>
<li>Please see this example for more clarity on prefixes: if you have a file f1 stored in an S3 object path like so <code>s3://your_bucket_name/folder1/sub_folder_1/f1</code>, then <code>/folder1/sub_folder_1/</code> becomes the prefix for file f1.</li>
<li>Creating customer-specific custom prefixes within the single bucket and then uploading the daily files into those prefixed locations will improve S3 performance for customers. </li>
</ul>
<h1 id="AMI-Copying"><a href="#AMI-Copying" class="headerlink" title="AMI Copying"></a>AMI Copying</h1><p>When the new AMI is copied from region A into region B, it automatically creates a snapshot in region B because AMIs are based on the underlying snapshots. </p>
<img src="https://media.datacumulus.com/aws-saa-pt/assets/pt1-q41-i1.jpg"/>

<h1 id="Auto-Scaling-Activities-Rebalancing-v-s-Scaling"><a href="#Auto-Scaling-Activities-Rebalancing-v-s-Scaling" class="headerlink" title="Auto Scaling Activities: Rebalancing v.s. Scaling"></a>Auto Scaling Activities: Rebalancing v.s. Scaling</h1><h2 id="Rebalancing"><a href="#Rebalancing" class="headerlink" title="Rebalancing"></a>Rebalancing</h2><ul>
<li>Actions such as changing the Availability Zones for your group or explicitly terminating or detaching instances can lead to the Auto Scaling group becoming unbalanced between Availability Zones. Amazon EC2 Auto Scaling compensates by rebalancing the Availability Zones.</li>
<li>When rebalancing, Amazon EC2 Auto Scaling <strong>launches new instances before terminating the old ones</strong>, so that rebalancing <strong>does not compromise the performance or availability of your application</strong>. </li>
</ul>
<img src="https://media.datacumulus.com/aws-saa-pt/assets/pt1-q56-i1.jpg"/>

<h2 id="Replace-Unhealthy"><a href="#Replace-Unhealthy" class="headerlink" title="Replace Unhealthy"></a>Replace Unhealthy</h2><p>The scaling activity of Auto Scaling works in a different sequence compared to the rebalancing activity.</p>
<ul>
<li>Auto Scaling creates a new scaling activity for terminating the unhealthy instance and then terminates it. </li>
<li>Later, another scaling activity launches a new instance to replace the terminated instance.</li>
</ul>
<h1 id="KMS-Deleting-Customer-Master-Key"><a href="#KMS-Deleting-Customer-Master-Key" class="headerlink" title="KMS Deleting Customer Master Key"></a>KMS Deleting Customer Master Key</h1><ul>
<li>AWS Key Management Service (KMS) makes it easy for you to create and manage cryptographic keys and control their use across a wide range of AWS services and in your applications. </li>
<li>AWS KMS is a secure and resilient service that uses hardware security modules that have been validated under FIPS 140-2.</li>
<li>Deleting a customer master key (CMK) in AWS Key Management Service (AWS KMS) is destructive and potentially dangerous. Therefore, AWS KMS enforces a <strong>waiting period</strong>. </li>
<li>To delete a CMK in AWS KMS you <strong>schedule key deletion</strong>. </li>
<li>You can set the waiting period from a minimum of 7 days up to a maximum of 30 days. </li>
<li>The default waiting period is 30 days. </li>
<li>During the waiting period, the CMK status and key state is <strong>Pending deletion</strong>. </li>
<li>To recover the CMK, you can cancel key deletion before the waiting period ends. </li>
<li>After the waiting period ends you cannot cancel key deletion, and AWS KMS deletes the CMK.</li>
</ul>
<h1 id="Amazon-Redshift-Spectrum"><a href="#Amazon-Redshift-Spectrum" class="headerlink" title="Amazon Redshift Spectrum"></a>Amazon Redshift Spectrum</h1><ul>
<li>Amazon Redshift is a fully-managed petabyte-scale cloud-based data warehouse product designed for <strong>large scale data set storage and analysis</strong> (BI).</li>
<li>Using <strong>Amazon Redshift Spectrum</strong>, you can efficiently query and retrieve <em>structured and semistructured</em> data from files in Amazon S3, without having to load the data into Amazon Redshift tables. </li>
<li>Amazon Redshift Spectrum resides on dedicated Amazon Redshift servers that are <em>independent of your cluster</em>. Redshift Spectrum pushes many compute-intensive tasks, such as predicate filtering and aggregation, down to the Redshift Spectrum layer. </li>
<li>Thus, Redshift Spectrum queries use much less of your clusters processing capacity than other queries.</li>
</ul>
<img src="https://d2908q01vomqb2.cloudfront.net/b6692ea5df920cad691c20319a6fffd7a4a766b8/2017/07/18/redshift_spectrum-1.gif"/>

<h2 id="v-s-Athena"><a href="#v-s-Athena" class="headerlink" title="v.s. Athena"></a>v.s. Athena</h2><ul>
<li>Amazon Athena is an interactive query service that makes it easy to analyze data directly in Amazon S3 using standard SQL. </li>
<li>Athena is serverless, so there is no infrastructure to set up or manage, and customers pay only for the queries they run. </li>
<li>You can use Athena to process logs, perform ad-hoc analysis, and run interactive queries. </li>
<li>Providing access to historical data via Athena would mean that historical data reconciliation  would become difficult as the daily report would still be produced via Redshift. </li>
</ul>
<h1 id="AWS-Direct-Connect-VPN-Combine-performance-and-encryption"><a href="#AWS-Direct-Connect-VPN-Combine-performance-and-encryption" class="headerlink" title="AWS Direct Connect + VPN : Combine performance and encryption"></a>AWS Direct Connect + VPN : Combine performance and encryption</h1><img src="direct-connect-vpn.png" width="500px"/>

<ul>
<li>With AWS Direct Connect plus VPN, you can combine one or more AWS Direct Connect dedicated network connections with the Amazon VPC VPN. </li>
<li>This combination provides an <em>IPsec-encrypted private connection</em> that also reduces network costs, increases bandwidth throughput, and provides a more consistent network experience than internet-based VPN connections. </li>
<li>This solution combines the AWS managed benefits of the VPN solution with low latency, increased bandwidth, more consistent benefits of the AWS Direct Connect solution, and an end-to-end, secure IPsec connection. </li>
</ul>
<p><strong>Direct Connect does not come with encryption option. It is just a high-performance dedicated connection</strong></p>
<h1 id="AWS-Transit-Gateway"><a href="#AWS-Transit-Gateway" class="headerlink" title="AWS Transit Gateway"></a>AWS Transit Gateway</h1><ul>
<li>AWS Transit Gateway is a highly available and scalable service to consolidate the AWS VPC routing configuration for a region with a hub-and-spoke architecture. Each spoke VPC only needs to connect to the Transit Gateway to gain access to other connected VPCs.</li>
<li>With large number of VPCs, Transit Gateway provides simpler VPC-to-VPC communication management over VPC Peering.</li>
</ul>
<h1 id="S3-Data-Consistency"><a href="#S3-Data-Consistency" class="headerlink" title="S3 Data Consistency"></a>S3 Data Consistency</h1><h2 id="read-after-write-consistency-for-PUTS"><a href="#read-after-write-consistency-for-PUTS" class="headerlink" title="read-after-write consistency for PUTS"></a>read-after-write consistency for PUTS</h2><ul>
<li>Amazon S3 provides read-after-write consistency for PUTS of new objects in your S3 bucket in all Regions with one caveat . </li>
<li>The caveat is that if you make a HEAD or GET request to a key name before the object is created, then create the object shortly after that, a subsequent GET might not return the object due to eventual consistency. </li>
</ul>
<h2 id="eventual-consistency-for-overwrite-PUTS-and-DELETES-in-all-Regions"><a href="#eventual-consistency-for-overwrite-PUTS-and-DELETES-in-all-Regions" class="headerlink" title="eventual consistency for overwrite PUTS and DELETES in all Regions"></a>eventual consistency for overwrite PUTS and DELETES in all Regions</h2><p>Amazon S3 offers eventual consistency for overwrite PUTS and DELETES in all Regions.<br>Amazon S3 achieves high availability by replicating data across multiple servers within AWS data centers. If a PUT request is successful, your data is safely stored.<br>However, information about the changes must replicate across Amazon S3, which can take some time, and so you <strong>might</strong> observe the following behaviors: A process writes a new object to Amazon S3 and immediately lists keys within its bucket.  </p>
<ul>
<li>Until the change is fully propagated, the object <strong>might</strong> not appear in the list. A process replaces an existing object and immediately tries to read it. Until the change is fully propagated, Amazon S3 <strong>might</strong> return the previous data. A process deletes an existing object and immediately tries to read it. Until the deletion is fully propagated, Amazon S3 <strong>might</strong> return the deleted data. A process deletes an existing object and immediately lists keys within its bucket. Until the deletion is fully propagated, Amazon S3 <strong>might</strong> list the deleted object. </li>
</ul>
<h1 id="Amazon-Glacier-and-Glacier-Deep-Archive-Retrieval"><a href="#Amazon-Glacier-and-Glacier-Deep-Archive-Retrieval" class="headerlink" title="Amazon Glacier and Glacier Deep Archive Retrieval"></a>Amazon Glacier and Glacier Deep Archive Retrieval</h1><h2 id="S3-Glacier"><a href="#S3-Glacier" class="headerlink" title="S3 Glacier"></a>S3 Glacier</h2><h3 id="Expedited-Retrieval"><a href="#Expedited-Retrieval" class="headerlink" title="Expedited Retrieval"></a>Expedited Retrieval</h3><ul>
<li>On-Demand: 1-5 mins</li>
<li>Provisioned: when you need them</li>
</ul>
<h3 id="Standard-Retrieval"><a href="#Standard-Retrieval" class="headerlink" title="Standard Retrieval"></a>Standard Retrieval</h3><p> 3  5 hours.</p>
<h3 id="Bulk-Retrieval"><a href="#Bulk-Retrieval" class="headerlink" title="Bulk Retrieval"></a>Bulk Retrieval</h3><p>5  12 hours.</p>
<h2 id="S3-Glacier-Deep-Archieve"><a href="#S3-Glacier-Deep-Archieve" class="headerlink" title="S3 Glacier Deep Archieve"></a>S3 Glacier Deep Archieve</h2><h3 id="Standard"><a href="#Standard" class="headerlink" title="Standard"></a>Standard</h3><p>within 12 hours</p>
<h3 id="Bulk"><a href="#Bulk" class="headerlink" title="Bulk"></a>Bulk</h3><p>within 48 hours</p>
<h1 id="RDS-encryption"><a href="#RDS-encryption" class="headerlink" title="RDS encryption"></a>RDS encryption</h1><p>On a database instance running with Amazon RDS encryption, data stored at rest in the underlying storage is encrypted, as are its automated backups, read replicas, and snapshots. </p>
<h1 id="RDS-Multi-AZ"><a href="#RDS-Multi-AZ" class="headerlink" title="RDS Multi- AZ"></a>RDS Multi- AZ</h1><h2 id="Active-Instances"><a href="#Active-Instances" class="headerlink" title="Active Instances?"></a>Active Instances?</h2><ul>
<li>Non-Aurora: only the primary instance is active; </li>
<li>Aurora: <strong>all</strong> instances are active</li>
</ul>
<h2 id="Backup"><a href="#Backup" class="headerlink" title="Backup?"></a>Backup?</h2><ul>
<li>Non-Aurora: automated backups are taken from standby; </li>
<li>Aurora: automated backups are taken from shared storage layer</li>
</ul>
<h2 id="Replication"><a href="#Replication" class="headerlink" title="Replication?"></a>Replication?</h2><ul>
<li>Non-Aurora: synchronous replication; </li>
<li>Aurora: asynchronous replication</li>
</ul>
<h1 id="Accessing-S3-data"><a href="#Accessing-S3-data" class="headerlink" title="Accessing S3 data"></a>Accessing S3 data</h1><h2 id="Byte-Range-Fetch"><a href="#Byte-Range-Fetch" class="headerlink" title="Byte Range Fetch"></a>Byte Range Fetch</h2><ul>
<li>Using the <code>Range</code> HTTP header in a GET Object request, you can <strong>fetch a byte-range from an object</strong>, transferring only the specified portion. </li>
<li>You can use <code>concurrent</code> connections to Amazon S3 to fetch different byte ranges from within the same object. This helps you achieve higher aggregate throughput versus a single whole-object request. </li>
<li>Fetching smaller ranges of a large object also allows your application to improve retry times when requests are interrupted. </li>
<li>A byte-range request is a perfect way to get the beginning of a file and ensuring we remain efficient during our scan of our S3 bucket.</li>
</ul>
<h2 id="S3-Select"><a href="#S3-Select" class="headerlink" title="S3 Select"></a>S3 Select</h2><p>S3 Select, now generally available, enables applications to retrieve only a <strong>subset</strong> of objects from an object by using simple <strong>SQL expressions</strong>. By using S3 Select to retrieve only the data needed by your application, you can achieve drastic performance increase.</p>
<h3 id="S3-Select-ScanRange"><a href="#S3-Select-ScanRange" class="headerlink" title="S3 Select ScanRange"></a>S3 Select ScanRange</h3><ul>
<li>With Amazon S3 Select, you can scan a subset of an object by <strong>specifying a range of bytes to query</strong> using the ScanRange parameter. </li>
<li>This capability lets you <strong>parallelize scanning</strong> the whole object by splitting the work into separate Amazon S3 Select requests for a series of non-overlapping scan ranges. </li>
<li>Use the Amazon S3 Select <code>ScanRange</code> parameter and <code>Start</code> at (Byte) and <code>End</code> at (Byte).</li>
</ul>
<img src="https://media.datacumulus.com/aws-saa-pt/assets/pt2-q60-i1.jpg"/>

<h2 id="Glacier-Select"><a href="#Glacier-Select" class="headerlink" title="Glacier Select"></a>Glacier Select</h2><p>Glacier Select allows you to to perform filtering directly against a Glacier object using standard SQL statements.<br>Glacier Select is priced in 3 dimensions.</p>
<ul>
<li>GB of Data Scanned</li>
<li>GB of Data Returned</li>
<li>Select Requests</li>
</ul>
<p>Pricing for each dimension is determined by the speed at which you want your results returned: expedited (1-5 minutes), standard (3-5 hours), and bulk (5-12 hours).</p>
<h1 id="SQS-FIFO-vs-Kinesis-Data-Stream"><a href="#SQS-FIFO-vs-Kinesis-Data-Stream" class="headerlink" title="SQS FIFO vs Kinesis Data Stream"></a>SQS FIFO vs Kinesis Data Stream</h1><blockquote>
<p>You are establishing a monitoring solution for desktop systems, that will be sending telemetry data into AWS every 1 minute. Data for each system must be processed in order, independently, and you would like to <strong>scale the number of consumers to be possibly equal to the number of desktop systems that are being monitored</strong>. What do you recommend?</p>
</blockquote>
<h2 id="SQS-GroupID"><a href="#SQS-GroupID" class="headerlink" title="SQS GroupID"></a>SQS GroupID</h2><ul>
<li>If we dont specify a GroupID, then all the messages are in absolute order, but we can only have 1 consumer at most. </li>
<li>To allow for multiple consumers to read data for each Desktop application, and to scale the number of consumers, we should use the <code>Group ID</code> attribute. </li>
<li>The message group ID is the tag that specifies that a message belongs to a <strong>specific message group</strong>.</li>
<li>Messages that belong to the same message group are always processed one by one, in a strict order relative to the message group (however, messages that belong to different message groups might be processed out of order).</li>
</ul>
<h1 id="Kinesis-Data-Firehose"><a href="#Kinesis-Data-Firehose" class="headerlink" title="Kinesis Data Firehose"></a>Kinesis Data Firehose</h1><ul>
<li>Amazon Kinesis Data Firehose is the easiest way to reliably load streaming data into data lakes, data stores, and analytics tools. </li>
<li>It can capture, transform, and load streaming data into Amazon S3, Amazon Redshift, Amazon Elasticsearch Service, and Splunk, enabling near real-time analytics with existing business intelligence tools and dashboards youre already using today. </li>
<li>It is a fully managed service that automatically scales to match the throughput of your data and requires no ongoing administration.</li>
</ul>
<h1 id="Retrieving-instance-metadata"><a href="#Retrieving-instance-metadata" class="headerlink" title="Retrieving instance metadata"></a>Retrieving instance metadata</h1><p><code>http://169.254.169.254/latest/meta-data/</code></p>
<ul>
<li>The IP address <code>169.254.169.254</code> is a <strong>link-local address</strong> and is valid only from the instance.</li>
<li>Note that you are not billed for HTTP requests used to retrieve instance metadata and user data.</li>
<li>You can also use instance metadata to access user data that you specified when launching your instance. </li>
</ul>
<h2 id="Available-in-metadata"><a href="#Available-in-metadata" class="headerlink" title="Available in metadata:"></a>Available in metadata:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[ec2-user@ip-172-31-55-48 ~]$ curl http:&#x2F;&#x2F;169.254.169.254&#x2F;latest&#x2F;meta-data</span><br><span class="line">ami-id</span><br><span class="line">ami-launch-index</span><br><span class="line">ami-manifest-path</span><br><span class="line">block-device-mapping&#x2F;</span><br><span class="line">events&#x2F;</span><br><span class="line">hostname</span><br><span class="line">identity-credentials&#x2F;</span><br><span class="line">instance-action</span><br><span class="line">instance-id</span><br><span class="line">instance-life-cycle</span><br><span class="line">instance-type</span><br><span class="line">local-hostname</span><br><span class="line">local-ipv4</span><br><span class="line">mac</span><br><span class="line">metrics&#x2F;</span><br><span class="line">network&#x2F;</span><br><span class="line">placement&#x2F;</span><br><span class="line">profile</span><br><span class="line">public-hostname</span><br><span class="line">public-ipv4</span><br><span class="line">public-keys&#x2F;</span><br><span class="line">reservation-id</span><br><span class="line">security-groups</span><br></pre></td></tr></table></figure>

<h1 id="Snowball-mobile-Capcity"><a href="#Snowball-mobile-Capcity" class="headerlink" title="Snowball, mobile Capcity"></a>Snowball, mobile Capcity</h1><p><code>100PB = 100 * 1000 TB</code><br>Snowmobile is an Exabyte-scale data transfer service. <code>1EB = 1000PB</code></p>
<p>For &gt; 10PB, use snowmobile.</p>
<h2 id="Snowball-Edge-Storage-Optimized"><a href="#Snowball-Edge-Storage-Optimized" class="headerlink" title="Snowball Edge Storage Optimized"></a>Snowball Edge Storage Optimized</h2><ul>
<li><strong>80 TB</strong> of HDD capacity for block volumes and Amazon S3-compatible object storage</li>
<li>40 vCPU</li>
<li>well suited for local storage and large scale-data transfer</li>
</ul>
<h2 id="Snowball-Edge-Compute-Optimized"><a href="#Snowball-Edge-Compute-Optimized" class="headerlink" title="Snowball Edge Compute Optimized"></a>Snowball Edge Compute Optimized</h2><ul>
<li>52 vCPU</li>
<li>an optional GPU</li>
<li><strong>42 TB</strong> usable HDD capacity</li>
</ul>
<h1 id="S3"><a href="#S3" class="headerlink" title="S3"></a>S3</h1><h2 id="S3-Security"><a href="#S3-Security" class="headerlink" title="S3 Security"></a>S3 Security</h2><img src="s3-ops.png" alt="" width="600px"/>

<h2 id="Hosting-Static-website-on-S3"><a href="#Hosting-Static-website-on-S3" class="headerlink" title="Hosting Static website on S3"></a>Hosting Static website on S3</h2><p>To host a static website on Amazon S3, you:</p>
<ol>
<li>Configure an Amazon S3 bucket for website hosting, and then </li>
<li>Upload your website content to the bucket</li>
</ol>
<h3 id="URL-of-your-index-page"><a href="#URL-of-your-index-page" class="headerlink" title="URL of your index page"></a>URL of your index page</h3><p>Depending on your Region, your Amazon S3 website endpoint follows one of these two formats.</p>
<ol>
<li>s3-website dash (-) Region  <code>http://bucket-name.s3-website-Region.amazonaws.com</code></li>
<li>s3-website dot (.) Region  <code>http://bucket-name.s3-website.Region.amazonaws.com</code></li>
</ol>
<h3 id="Configure-Permissions"><a href="#Configure-Permissions" class="headerlink" title="Configure Permissions"></a>Configure Permissions</h3><p>When you configure a bucket as a static website, if you want your website to be public, you can grant public read access. </p>
<ol>
<li><strong>disable block public access settings</strong> for the bucket </li>
<li>write a <strong>bucket policy</strong> that grants public read access</li>
<li>If your bucket contains objects that are not owned by the bucket owner, you might also need to add an <strong>object access control list (ACL)</strong> that grants everyone read access.</li>
</ol>
<p>Bucket Policy looks like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">       &quot;Version&quot;: &quot;2012-10-17&quot;,</span><br><span class="line">       &quot;Statement&quot;: [</span><br><span class="line">           &#123;</span><br><span class="line">               &quot;Sid&quot;: &quot;PublicReadGetObject&quot;,</span><br><span class="line">               &quot;Effect&quot;: &quot;Allow&quot;,</span><br><span class="line">               &quot;Principal&quot;: &quot;*&quot;,</span><br><span class="line">               &quot;Action&quot;: [</span><br><span class="line">                   &quot;s3:GetObject&quot;</span><br><span class="line">               ],</span><br><span class="line">               &quot;Resource&quot;: [</span><br><span class="line">                   &quot;arn:aws:s3:::example.bucket.name&#x2F;*&quot;</span><br><span class="line">               ]</span><br><span class="line">           &#125;</span><br><span class="line">       ]</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h1 id="SQS-Short-Polling-and-Long-Polling"><a href="#SQS-Short-Polling-and-Long-Polling" class="headerlink" title="SQS Short Polling and Long Polling"></a>SQS Short Polling and Long Polling</h1><h2 id="Short-Polling"><a href="#Short-Polling" class="headerlink" title="Short Polling"></a>Short Polling</h2><p>When you consume messages from a queue using short polling, Amazon SQS samples a <strong>subset of its servers</strong> (based on a weighted random distribution) and returns messages from only those servers. Thus, a particular ReceiveMessage request <strong>might not</strong> return all of your messages.</p>
<img src="https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/images/ArchOverview_Receive.png" width="600px"/>

<h2 id="Long-Polling"><a href="#Long-Polling" class="headerlink" title="Long Polling"></a>Long Polling</h2><ul>
<li>Query <strong>all</strong> SQS Servers.</li>
<li>Return messages as soon as they become available.</li>
<li>When the wait time for the ReceiveMessage API action is greater than 0, long polling is in effect. The maximum long polling wait time is 20 seconds. Long polling helps reduce the cost of using Amazon SQS by eliminating the number of empty responses (when there are no messages available for a ReceiveMessage request) and false empty responses (when messages are available but arent included in a response because it is not in the subset of servers being queried by short polling).</li>
</ul>
<h1 id="Roles-for-EC2-Instances"><a href="#Roles-for-EC2-Instances" class="headerlink" title="Roles for EC2 Instances"></a>Roles for EC2 Instances</h1><p>Applications that run on the instance can use the <strong>role-supplied temporary credentials</strong> to <strong>sign API requests</strong>.</p>
<img src="https://media.datacumulus.com/aws-saa-pt/assets/pt2-q3-i1.jpg" width="600px"/>

<h1 id="EC2-Data-transfer-pricing"><a href="#EC2-Data-transfer-pricing" class="headerlink" title="EC2 Data transfer pricing"></a>EC2 Data transfer pricing</h1><h2 id="Out-to-Internet"><a href="#Out-to-Internet" class="headerlink" title="Out to Internet"></a>Out to Internet</h2><img src="ec2-public-ip.png" alt="" width="400px"/>

<h2 id="Using-Public-IPv4-IPv6-incurs-a-unified-charge"><a href="#Using-Public-IPv4-IPv6-incurs-a-unified-charge" class="headerlink" title="Using Public IPv4/IPv6 incurs a unified charge"></a>Using Public IPv4/IPv6 incurs a unified charge</h2><p>IPv4: Data transferred in to <strong>and</strong> out from public or Elastic IPv4 address is charged at $0.01/GB <strong>in each direction</strong>.<br>IPv6: Data transferred in to and out from an IPv6 address in a different VPC is charged at $0.01/GB in each direction.</p>
<h2 id="Across-AZ"><a href="#Across-AZ" class="headerlink" title="Across AZ"></a>Across AZ</h2><p>Data transferred in to and out from Amazon EC2, Amazon RDS, Amazon Redshift , Amazon DynamoDB Accelerator (DAX), and Amazon ElastiCache instances or Elastic Network Interfaces across Availability Zones or VPC Peering connections in the same AWS Region is charged at $0.01/GB <strong>in each direction</strong>.</p>
<p>Data transferred between Amazon EC2, Amazon RDS, Amazon Redshift, Amazon ElastiCache instances and Elastic Network Interfaces in the same Availability Zone is free. </p>
<h2 id="EC2-gt-Services-Free-transfer"><a href="#EC2-gt-Services-Free-transfer" class="headerlink" title="EC2 -&gt; Services Free transfer"></a>EC2 -&gt; Services Free transfer</h2><p>Data transferred between Amazon S3, Amazon Glacier, Amazon DynamoDB, Amazon SES, Amazon SQS, Amazon Kinesis, Amazon ECR, Amazon SNS or Amazon SimpleDB and Amazon EC2 instances in the same AWS Region is free. </p>
<p>Data transferred in to and out from Amazon Classic and Application Elastic Load Balancers using private IP addresses, between EC2 instances and the load balancer in the same AWS Region is free.</p>
<h1 id="Security-Group-Rules"><a href="#Security-Group-Rules" class="headerlink" title="Security Group Rules"></a>Security Group Rules</h1><h2 id="Outbound-Rule-Port"><a href="#Outbound-Rule-Port" class="headerlink" title="Outbound Rule Port"></a>Outbound Rule Port</h2><img src="security-group.png" alt="" width="600px"/>

<p>Security Group A removes the Outbound Rule to allow all traffic.<br>Instead, it only allows traffic towards <strong>the port 1433 of instances in Security Group B</strong>. This port is the port of its destination.</p>
<h2 id="Default-Security-Group"><a href="#Default-Security-Group" class="headerlink" title="Default Security Group"></a>Default Security Group</h2><img src="default-security-group.png" alt="" width="700px"/>

<ul>
<li>For each VPC, there is a default security group. </li>
<li>Default SG cannot be deleted.</li>
<li>You can EDIT your default SG for each VPC.</li>
</ul>
<h3 id="Default-SG-Rules"><a href="#Default-SG-Rules" class="headerlink" title="Default SG Rules:"></a>Default SG Rules:</h3><ul>
<li>Outbound Rules: Allow all</li>
<li>Inbound Rules: Allow inbound traffic from network interfaces (and their associated instances) that are assigned to <strong>the same security group</strong>. </li>
</ul>
<h2 id="Default-Rules-of-a-user-created-Security-Group"><a href="#Default-Rules-of-a-user-created-Security-Group" class="headerlink" title="Default Rules of a user-created Security Group"></a>Default Rules of a user-created Security Group</h2><ul>
<li>Allows <strong>no inbound traffic</strong></li>
<li>Allows all outbound traffic</li>
</ul>
<img src="security-group-default-rules.png" width="600px"/>

<h1 id="IAM-Policies"><a href="#IAM-Policies" class="headerlink" title="IAM Policies"></a>IAM Policies</h1><ul>
<li>A policy is an object in AWS that, when associated with an identity or resource, defines their permissions. </li>
<li>AWS evaluates these policies when an IAM principal (user or role) makes a request.</li>
<li>AWS supports six types of policies: <ol>
<li>identity-based policies, </li>
<li>resource-based policies, </li>
<li>permissions boundaries, </li>
<li>Organizations SCPs, </li>
<li>ACLs,</li>
<li>session policies</li>
</ol>
</li>
</ul>
<img src="s3-read-only.png" alt="" width="500px"/>

<h2 id="Resource-field-of-a-Policy"><a href="#Resource-field-of-a-Policy" class="headerlink" title="Resource field of a Policy"></a>Resource field of a Policy</h2><p>The <code>Resource</code> field specifies the resource being granted/denied access for the principle.</p>
<ul>
<li><code>s3:ListBucket</code> is applied to buckets, so the ARN is in the form <code>Resource&quot;:&quot;arn:aws:s3:::mybucket</code>, without a trailing / </li>
<li><code>s3:GetObject</code> is applied to objects within the bucket, so the ARN is in the form Resource:<code>arn:aws:s3:::mybucket/*</code>, with a trailing <code>/*</code> to indicate all objects within the bucket mybucket</li>
</ul>
<h2 id="Policy-Conditions"><a href="#Policy-Conditions" class="headerlink" title="Policy Conditions"></a>Policy Conditions</h2><h3 id="aws-SourceIp"><a href="#aws-SourceIp" class="headerlink" title="aws:SourceIp"></a>aws:SourceIp</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"Version"</span>: <span class="string">"2012-10-17"</span>,</span><br><span class="line">  <span class="attr">"Statement"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"Sid"</span>: <span class="string">"StartInstanceFromOffice"</span>,</span><br><span class="line">      <span class="attr">"Action"</span>: [</span><br><span class="line">        <span class="string">"ec2:RunInstances"</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">"Effect"</span>: <span class="string">"Allow"</span>,</span><br><span class="line">      <span class="attr">"Resource"</span>: <span class="string">"*"</span>,</span><br><span class="line">      <span class="attr">"Condition"</span>: &#123;</span><br><span class="line">        <span class="attr">"IpAddress"</span>: &#123;</span><br><span class="line">          <span class="attr">"aws:SourceIp"</span>: <span class="string">"34.50.31.0/24"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The <code>aws:SourceIP</code> in this condition always represents the IP of the <strong>caller</strong> of the API. That is very helpful if you want to restrict access to certain AWS API for example from the public IP of your on-premises infrastructure.</p>
<h3 id="aws-calledVia"><a href="#aws-calledVia" class="headerlink" title="aws: calledVia"></a>aws: calledVia</h3><p>Use this key to compare the services in the policy with the services that made requests on behalf of the IAM principal (user or role). </p>
<h3 id="aws-CurrentTime"><a href="#aws-CurrentTime" class="headerlink" title="aws:CurrentTime"></a>aws:CurrentTime</h3><p>Use this key to compare the date and time of the request with the date and time that you specify in the policy. </p>
<h3 id="aws-MultiFactorAuthAge"><a href="#aws-MultiFactorAuthAge" class="headerlink" title="aws:MultiFactorAuthAge"></a>aws:MultiFactorAuthAge</h3><p>Use this key to compare the number of seconds since the requesting principal was authorized using MFA with the number that you specify in the policy.</p>
<h3 id="aws-PrincipalAccount"><a href="#aws-PrincipalAccount" class="headerlink" title="aws:PrincipalAccount"></a>aws:PrincipalAccount</h3><p>Use this key to compare the account to which the requesting principal belongs with the account identifier that you specify in the policy.</p>
<h3 id="aws-RequestedRegion"><a href="#aws-RequestedRegion" class="headerlink" title="aws:RequestedRegion"></a>aws:RequestedRegion</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"Version"</span>: <span class="string">"2012-10-17"</span>,</span><br><span class="line">  <span class="attr">"Statement"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"Sid"</span>: <span class="string">"Allow Running Instances from eu-west-1"</span>,</span><br><span class="line">      <span class="attr">"Action"</span>: [</span><br><span class="line">        <span class="string">"ec2:RunInstances"</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">"Effect"</span>: <span class="string">"Allow"</span>,</span><br><span class="line">      <span class="attr">"Resource"</span>: <span class="string">"*"</span>,</span><br><span class="line">      <span class="attr">"Condition"</span>: &#123;</span><br><span class="line">        <span class="attr">"StringEquals"</span>: &#123;</span><br><span class="line">          <span class="attr">"aws:RequestedRegion"</span>: <span class="string">"eu-west-1"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>You can use the <code>aws:RequestedRegion</code> key to compare the AWS Region that was called in the request with the Region that you specify in the policy. You can use this global condition key to control which Regions can be requested.</li>
<li><code>aws:RequestedRegion</code> represents the <strong>target</strong> of the API call. So in this example, we can only launch EC2 instances in eu-west-1, and we can do this API call from anywhere.</li>
</ul>
<h3 id="aws-SourceVpc"><a href="#aws-SourceVpc" class="headerlink" title="aws:SourceVpc"></a>aws:SourceVpc</h3><p>Use this key to check whether the request comes from the VPC that you specify in the policy. </p>
<h1 id="Consider-the-timeout-of-your-job-when-choosing-Lambda"><a href="#Consider-the-timeout-of-your-job-when-choosing-Lambda" class="headerlink" title="Consider the timeout of your job when choosing Lambda"></a>Consider the timeout of your job when choosing Lambda</h1><img src="lambda-timeout.png" alt="" width="600px"/>

<h2 id="Lambda-15-min-time-out"><a href="#Lambda-15-min-time-out" class="headerlink" title="Lambda: 15 min time out"></a>Lambda: 15 min time out</h2><ul>
<li>AWS Lambda lets you run code without provisioning or managing servers. You pay only for the compute time you consume.</li>
<li>Lambda would be the perfect fit if our script could run in less than 15 minutes, as this is the maximum timeout for Lambda.</li>
</ul>
<h2 id="Spot-Blocks-Cheap-solution-for-jobs-above-15-mins"><a href="#Spot-Blocks-Cheap-solution-for-jobs-above-15-mins" class="headerlink" title="Spot Blocks: Cheap solution for jobs above 15 mins"></a>Spot Blocks: Cheap solution for jobs above 15 mins</h2><p>-A Spot Instance is an unused EC2 instance that is available for less than the On-Demand price. Because Spot Instances enable you to request unused EC2 instances at steep discounts, you can lower your Amazon EC2 costs significantly. The hourly price for a Spot Instance is called a Spot price.</p>
<ul>
<li>Spot Instances with a defined duration (also known as Spot blocks) are designed not to be interrupted and will run continuously for the duration you select. This makes them ideal for jobs that take a finite time to complete, such as batch processing, encoding and rendering, modeling and analysis, and continuous integration.</li>
<li>Running our load on a Spot Instance with Spot Block sounds like the perfect use case, as we can block the spot instance for 1 hour, run the script there, and then the instance will be terminated.</li>
</ul>
<h2 id="Fargate"><a href="#Fargate" class="headerlink" title="Fargate"></a>Fargate</h2><p>If you need a container and you want to run more than 15 minutes, you can also think of Fargate, the serverless Container solution.</p>
<h1 id="Automated-Reboot"><a href="#Automated-Reboot" class="headerlink" title="Automated Reboot"></a>Automated Reboot</h1><p>Using <strong>Amazon CloudWatch alarm actions</strong>, you can create alarms that automatically stop, terminate, reboot, or recover your EC2 instances. </p>
<p>You can create an Amazon CloudWatch alarm that monitors an Amazon EC2 instance and automatically reboots the instance. </p>
<p>The <strong>reboot</strong> alarm action is recommended for <em>Instance Health Check</em> failures (as opposed to the <strong>recover</strong> alarm action, which is suited for <em>System Health Check</em> failures).</p>
<h2 id="Reboot-upon-Instance-Health-Check-failure"><a href="#Reboot-upon-Instance-Health-Check-failure" class="headerlink" title="Reboot upon Instance Health Check failure"></a>Reboot upon Instance Health Check failure</h2><p>EC2 -&gt; Instances -&gt; Instance-&gt;Monitoring -&gt; Create Alarm -&gt; Take the action: Reboot the instance</p>
<img src="cloudwatch-alarm-action.png" alt="" width="700px"/>

<blockquote>
<p>Using CloudWatch event or CloudWatch alarm to trigger a lambda function to reboot the instance, directly or indirectly, is wasteful of resources. You should just use the EC2 Reboot CloudWatch Alarm Action to reboot the instance.</p>
</blockquote>
<h2 id="Recover-upon-System-Health-Check-failure"><a href="#Recover-upon-System-Health-Check-failure" class="headerlink" title="Recover upon System Health Check failure"></a>Recover upon System Health Check failure</h2><img src="cloudwatch-alarm-action-recover.png" width="700px" alt=""/>

<ul>
<li>A recovered instance is <strong>identical</strong> to the original instance, including the instance ID, private IP addresses, Elastic IP addresses, and all instance metadata. </li>
<li>If the impaired instance is in a placement group, the recovered instance runs in the placement group. </li>
<li>If your instance has a public IPv4 address, it retains the public IPv4 address after recovery.</li>
<li>During instance recovery, the instance is migrated during an instance reboot, and any data that is in-memory is lost.</li>
</ul>
<h1 id="Amazon-S3-notification"><a href="#Amazon-S3-notification" class="headerlink" title="Amazon S3 notification"></a>Amazon S3 notification</h1><ul>
<li>The Amazon S3 notification feature enables you to receive notifications when certain events happen <strong>in your bucket</strong>. </li>
<li>To enable notifications, you must:<ol>
<li>add a notification configuration that identifies the events you want Amazon S3 to publish </li>
<li>define the destinations where you want Amazon S3 to send the notifications.</li>
</ol>
</li>
</ul>
<h2 id="Amazon-S3-notification-supported-Destinations"><a href="#Amazon-S3-notification-supported-Destinations" class="headerlink" title="Amazon S3 notification supported Destinations"></a>Amazon S3 notification supported Destinations</h2><p>Amazon S3 supports the following destinations where it can publish events:</p>
<ol>
<li>Amazon Simple Notification Service (Amazon SNS) topic</li>
<li>Amazon Simple Queue Service (Amazon SQS) queue (Standard only. FIFO is not supported.)</li>
<li>AWS Lambda</li>
</ol>
<h1 id="Amazon-Aurora-Global-Database"><a href="#Amazon-Aurora-Global-Database" class="headerlink" title="Amazon Aurora Global Database"></a>Amazon Aurora Global Database</h1><p>Amazon Aurora features a <strong>distributed, fault-tolerant, self-healing storage system</strong> that auto-scales up to 64TB per database instance. Aurora is not an in-memory database.</p>
<ul>
<li>Amazon Aurora Global Database is designed for globally distributed applications, allowing <strong>a single Amazon Aurora database to span multiple AWS regions</strong>. </li>
<li>It <strong>replicates</strong> your data with no impact on database performance, enables fast local reads with low latency in each region, and provides disaster recovery from region-wide outages. </li>
</ul>
<h1 id="DynamoDB-Global-Tables"><a href="#DynamoDB-Global-Tables" class="headerlink" title="DynamoDB Global Tables"></a>DynamoDB Global Tables</h1><ul>
<li>Global Tables builds upon DynamoDBs global footprint to provide you with a fully managed, multi-region, and multi-master database that provides fast, local, read, and write performance for massively scaled, global applications. </li>
<li>Global Tables replicates your Amazon DynamoDB tables automatically across your choice of AWS regions.</li>
</ul>
<h1 id="Sharing-Resources-across-accounts-VPC"><a href="#Sharing-Resources-across-accounts-VPC" class="headerlink" title="Sharing Resources across accounts/VPC"></a>Sharing Resources across accounts/VPC</h1><h2 id="AWS-Resource-Access-Manager-RAM-cross-account-same-region"><a href="#AWS-Resource-Access-Manager-RAM-cross-account-same-region" class="headerlink" title="AWS Resource Access Manager (RAM): cross-account, same region"></a>AWS Resource Access Manager (RAM): cross-account, same region</h2><ul>
<li>AWS Resource Access Manager (RAM) is a service that enables you to easily and securely <strong>share AWS resources with any AWS account or within your AWS Organization</strong>. </li>
<li>You can share <strong>AWS Transit Gateways</strong>, <strong>Subnets</strong>, <strong>AWS License Manager configurations</strong>, and <strong>Amazon Route 53 Resolver rules</strong> resources with RAM. </li>
<li>RAM eliminates the need to create duplicate resources in multiple accounts, reducing the operational overhead of managing those resources in every single account you own. </li>
<li>You can create resources centrally in a multi-account environment, and use RAM to share those resources across accounts in three simple steps: <ol>
<li>create a Resource Share, </li>
<li>specify resources, and </li>
<li>specify accounts. </li>
</ol>
</li>
<li>RAM is available to you at no additional charge.</li>
<li>THe resources you share cannot cross region.</li>
</ul>
<h2 id="Resource-Access-Manager-v-s-VPC-Peering"><a href="#Resource-Access-Manager-v-s-VPC-Peering" class="headerlink" title="Resource Access Manager v.s. VPC Peering"></a>Resource Access Manager v.s. VPC Peering</h2><ul>
<li>A VPC peering connection is a networking connection between two VPCs that enables you to route traffic between them using private IPv4 addresses or IPv6 addresses. Instances in either VPC can communicate with each other as if they are within the same network. You can create a VPC peering connection <strong>between your VPCs, or with a VPC in another AWS account</strong>. <strong>The VPCs can be in different regions (also known as an inter-region VPC peering connection)</strong>. </li>
<li>VPC peering connections will work, but <strong>wont efficiently scale</strong> if you add more accounts (youll have to create many connections).</li>
</ul>
<ol>
<li>Resource and the destination to share in the <strong>same region</strong> in different accounts -&gt; AWS RAM</li>
<li>Resource and destination to share in a <strong>different region</strong> &gt; VPC Peering</li>
</ol>
<h2 id="RAM-v-s-Transit-Gateway"><a href="#RAM-v-s-Transit-Gateway" class="headerlink" title="RAM v.s. Transit Gateway"></a>RAM v.s. Transit Gateway</h2><p>AWS Transit Gateway is a service that enables customers to connect their Amazon Virtual Private Clouds (VPCs) and their on-premises networks to a single gateway.<br>A Transit Gateway will work but will be an <strong>expensive</strong> solution. </p>
<h2 id="VPC-Peering-v-s-Transit-Gateway"><a href="#VPC-Peering-v-s-Transit-Gateway" class="headerlink" title="VPC Peering v.s. Transit Gateway"></a>VPC Peering v.s. Transit Gateway</h2><p>Transit Gateway solves the complexity involved with creating and managing multiple VPC peering connections <strong>at scale</strong>. While this makes TGW a good default for most network architectures, VPC peering is still a valid choice due to the following advantages it has over TGW:</p>
<ol>
<li>Low Cost</li>
<li>No bandwidth limits (With Transit Gateway, Maximum bandwidth (burst) per Availability Zone per VPC connection is 50 Gbps. VPC peering has no aggregate bandwidth.)</li>
<li>Latency (Unlike VPC peering, Transit Gateway is an additional hop between VPCs)</li>
<li>Security Groups compatibility (Security groups referencing works with intra-Region VPC peering. It does not currently work with Transit Gateway)</li>
</ol>
<p>Within your Landing Zone setup, VPC Peering can be used in combination with the <strong>hub and spoke model</strong> enabled by Transit Gateway.</p>
<h2 id="Transit-Gateway-hub-and-spoke-model"><a href="#Transit-Gateway-hub-and-spoke-model" class="headerlink" title="Transit Gateway hub and spoke model"></a>Transit Gateway hub and spoke model</h2><ul>
<li>AWS Transit Gateway connects VPCs and on-premises networks through <strong>a central hub</strong>. </li>
<li>This simplifies your network and <strong>puts an end to complex peering relationships</strong>. </li>
<li>It acts as a <strong>cloud router</strong>  each new connection is only made once.</li>
</ul>
<img src="peering-vs-transit-gateway.png" alt="" width="800px"/>

<h1 id="AWS-Glue-1"><a href="#AWS-Glue-1" class="headerlink" title="AWS Glue"></a>AWS Glue</h1><ul>
<li>Extract, Transform, Load</li>
<li>Prepare your data to be analysed.</li>
<li>You simply point AWS Glue to your data stored on AWS </li>
<li>AWS Glue discovers your data and stores the associated metadata (e.g. table definition and schema) in the <strong>AWS Glue Data Catalog</strong></li>
</ul>
<img src="https://d1.awsstatic.com/Products/product-name/diagrams/product-page-diagram_Glue_Queries-Against-an-Amazo-S3-Data-Lake.0b355cc000b96c506babaa28fa8d7b4211b50c6f.png" width="600px"/>

<img src="https://d1.awsstatic.com/Products/product-name/diagrams/product-page-diagram_Glue_Event-driven-ETL-Pipelines.e24d59bb79a9e24cdba7f43ffd234ec0482a60e2.png" width="600px"/>

<h1 id="RDS-multi-AZ-multi-region-read-replica"><a href="#RDS-multi-AZ-multi-region-read-replica" class="headerlink" title="RDS multi-AZ, multi-region, read-replica"></a>RDS multi-AZ, multi-region, read-replica</h1><img src="rds-multi-read.png" alt="" width="800px"/>

<h1 id="Recover-from-AZ-failure-for-ONE-server"><a href="#Recover-from-AZ-failure-for-ONE-server" class="headerlink" title="Recover from AZ failure for ONE server"></a>Recover from AZ failure for ONE server</h1><ul>
<li>Create an auto-scaling group that spans across 2 AZ, which min=1, max=1, desired=1</li>
<li>Create an Elastic IP and use the EC2 user-data script to attach it<ol>
<li>With an Elastic IP address, you can mask the failure of an instance or software by rapidly remapping the address to another instance in your account.</li>
<li>If we use an ALB, things will still work, but we will have to pay for the provisioned ALB which sends traffic to only one EC2 instance.</li>
</ol>
</li>
</ul>
<h1 id="Minimise-Bootstrap-Time"><a href="#Minimise-Bootstrap-Time" class="headerlink" title="Minimise Bootstrap Time"></a>Minimise Bootstrap Time</h1><img src="hibernate.png" alt="" width="600px"/>

<h2 id="AMI-saves-installation-time"><a href="#AMI-saves-installation-time" class="headerlink" title="AMI saves installation time"></a>AMI saves installation time</h2><p>Creating an AMI may help with all the system dependencies, but it wont help us with speeding up the application start time.</p>
<h2 id="Hibernate-saves-time-to-start-an-application"><a href="#Hibernate-saves-time-to-start-an-application" class="headerlink" title="Hibernate saves time to start an application"></a>Hibernate saves time to start an application</h2><p>By using EC2 hibernate, we have the capability to resume it at any point of time, with the application already launched, thus helping us cut the application start time.</p>
<h1 id="WAF-to-defense-against-traffic-pattern-IP"><a href="#WAF-to-defense-against-traffic-pattern-IP" class="headerlink" title="WAF to defense against traffic pattern/IP"></a>WAF to defense against traffic pattern/IP</h1><img src="waf-shield.png" alt="" width="700px"/>

<img src="waf-filter-block.png" width="300px" alt=""/>

<ul>
<li>AWS WAF is a web application firewall that helps protect your web applications or APIs against common web exploits that may affect availability, compromise security, or <strong>consume excessive resources</strong>. </li>
<li>AWS WAF gives you control over how traffic reaches your applications by enabling you to create security rules that <strong>block common attack patterns</strong>, such as <ol>
<li>SQL injection </li>
<li>cross-site scripting, </li>
<li>specific traffic patterns</li>
</ol>
</li>
</ul>
<h2 id="Rate-based-rule"><a href="#Rate-based-rule" class="headerlink" title="Rate-based rule"></a>Rate-based rule</h2><p>A rate-based rule tracks the rate of requests for each originating IP address, and triggers the rule action on IPs with rates that go over a limit. You set the limit as the number of requests per 5-minute time span. </p>
<h2 id="IP-match-conditions"><a href="#IP-match-conditions" class="headerlink" title="IP match conditions"></a>IP match conditions</h2><p>If you want to allow or block web requests based on the IP addresses that the requests originate from, create one or more IP match conditions. An IP match condition lists up to 10,000 IP addresses or IP address ranges that your requests originate from.</p>
<h2 id="WAF-Geo-Match"><a href="#WAF-Geo-Match" class="headerlink" title="WAF Geo Match"></a>WAF Geo Match</h2><p>To block specific countries, you can create a WAF geo match statement listing the countries that you want to block.</p>
<h2 id="v-s-AWS-Shield"><a href="#v-s-AWS-Shield" class="headerlink" title="v.s. AWS Shield"></a>v.s. AWS Shield</h2><p>AWS Shield Advanced will give you DDoS protection overall, and you cannot set up rate-based rules in Shield.</p>
<h1 id="Transactional-Processing-gt-Relational-Database"><a href="#Transactional-Processing-gt-Relational-Database" class="headerlink" title="Transactional Processing -&gt; Relational Database"></a>Transactional Processing -&gt; Relational Database</h1><p>Be mindful of what the data schema should be.<br>DynamoDB -&gt; key-value pair, items, attributes, keys</p>
<h1 id="Choose-Load-Balancer-for-bastion-hosts"><a href="#Choose-Load-Balancer-for-bastion-hosts" class="headerlink" title="Choose Load Balancer for bastion hosts"></a>Choose Load Balancer for bastion hosts</h1><p>An ALB only supports HTTP traffic, which is layer 7, while the SSH protocol is based on TCP and is layer 4.</p>
<h1 id="Migrate-an-account-from-one-Organisation-to-Another"><a href="#Migrate-an-account-from-one-Organisation-to-Another" class="headerlink" title="Migrate an account from one Organisation to Another"></a>Migrate an account from one Organisation to Another</h1><p>To migrate accounts from one organization to another, you must have root or IAM access to both the member and master accounts.<br>Here are the steps to follow: </p>
<ol>
<li>Remove the member account from the old organization </li>
<li>Send an invite to the new organization </li>
<li>Accept the invite to the new organization from the member account</li>
</ol>
<h1 id="AWS-DataSync"><a href="#AWS-DataSync" class="headerlink" title="AWS DataSync"></a>AWS DataSync</h1><img src="https://d1.awsstatic.com/cloud-storage/AWS-DataSync-How-it-Works-Diagram.d27ec6f14be8ca9c2d434f94dd4a98c3fdf5c88c.png" width="800px"/>

<h2 id="User-Cases"><a href="#User-Cases" class="headerlink" title="User Cases"></a>User Cases</h2><p>AWS DataSync makes it simple and fast to <strong>move large amounts of data online</strong> between on-premises storage and:</p>
<ol>
<li>Amazon S3, </li>
<li>Amazon Elastic File System (Amazon EFS), or </li>
<li>Amazon FSx for Windows File Server. </li>
</ol>
<h2 id="Performance"><a href="#Performance" class="headerlink" title="Performance"></a>Performance</h2><h3 id="Automation"><a href="#Automation" class="headerlink" title="Automation"></a>Automation</h3><ul>
<li>Manual tasks related to data transfers can slow down migrations and burden IT operations.<br>DataSync eliminates or automatically handles many of these tasks, including:<ol>
<li>scripting copy jobs, </li>
<li>scheduling and monitoring transfers, </li>
<li>validating data, and </li>
<li>optimizing network utilization. </li>
</ol>
</li>
<li>The DataSync software agent connects to your Network File System (NFS), Server Message Block (SMB) storage, and your self-managed object storage, so you dont have to modify your applications. </li>
</ul>
<h3 id="Outcome"><a href="#Outcome" class="headerlink" title="Outcome"></a>Outcome</h3><ul>
<li>DataSync can transfer hundreds of terabytes and millions of files at speeds up to 10 times faster than open-source tools or command line tools, <strong>over the internet or AWS Direct Connect links</strong>.</li>
<li>DataSync uses a purpose-built network protocol and scale-out architecture to transfer data. A single DataSync agent is capable of saturating a 10 Gbps network link.</li>
</ul>
<h2 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h2><ul>
<li>Automatic encryption</li>
<li>Automatic data integrity check at rest and in transit</li>
</ul>
<h2 id="Service-Integration"><a href="#Service-Integration" class="headerlink" title="Service Integration"></a>Service Integration</h2><p>It is natively integrated with:</p>
<ol>
<li>Amazon S3, </li>
<li>Amazon EFS, </li>
<li>Amazon FSx for Windows File Server, </li>
<li>Amazon CloudWatch, and </li>
<li>AWS CloudTrail, </li>
</ol>
<p>which provides seamless and secure access to your storage services, as well as detailed monitoring of the transfer.</p>
<p>If you have large amounts of cold data stored in expensive on-premises storage systems, you can move this data <strong>directly</strong> to durable and secure long-term storage such as Amazon S3 Glacier or Amazon S3 Glacier Deep Archive. </p>
<h1 id="AWS-Transfers-Family"><a href="#AWS-Transfers-Family" class="headerlink" title="AWS Transfers Family"></a>AWS Transfers Family</h1><img src="https://d1.awsstatic.com/product-marketing/AWS%20Transfer%20Family/How-it-works-diagram-Transfer-family.9253476414113931316355159133dd1657ab5128.jpg" width="800px"/>

<p>The AWS Transfer Family provides fully managed support for file transfers directly into and out of Amazon S3. With support for Secure File Transfer Protocol (SFTP), File Transfer Protocol over SSL (FTPS), and File Transfer Protocol (FTP), the AWS Transfer Family helps you seamlessly migrate your file transfer workflows to AWS by integrating with existing authentication systems, and providing DNS routing with Amazon Route 53 so nothing changes for your customers and partners, or their applications.</p>
<h1 id="Route-53-Resolver-Resolving-DNS-queries-between-VPCs-and-your-network"><a href="#Route-53-Resolver-Resolving-DNS-queries-between-VPCs-and-your-network" class="headerlink" title="Route 53 Resolver: Resolving DNS queries between VPCs and your network"></a>Route 53 Resolver: Resolving DNS queries between VPCs and your network</h1><p>When you create a VPC using Amazon VPC, Route 53 Resolver automatically answers DNS queries for local VPC domain names for EC2 instances (ec2-192-0-2-44.compute-1.amazonaws.com) and records in private hosted zones (acme.example.com). For all other domain names, Resolver performs recursive lookups against public name servers.</p>
<p>You also can integrate DNS resolution <strong>between Resolver and DNS resolvers</strong> on your network by configuring forwarding rules. Your network can include any network that is reachable from your VPC, such as the following:</p>
<ol>
<li>The VPC itself</li>
<li>Another peered VPC</li>
<li>An on-premises network that is connected to AWS with AWS Direct Connect, a VPN, or a network address translation (NAT) gateway</li>
</ol>
<h2 id="Inbound-endpoint"><a href="#Inbound-endpoint" class="headerlink" title="Inbound endpoint"></a>Inbound endpoint</h2><p><strong>DNS resolvers on your network</strong> can forward DNS queries to Route 53 Resolver via this endpoint</p>
<h2 id="Outbound-endpoint"><a href="#Outbound-endpoint" class="headerlink" title="Outbound endpoint"></a>Outbound endpoint</h2><p>Resolver conditionally forwards queries to resolvers on your network via this endpoint.<br>To forward selected queries, you create Resolver rules that specify the domain names for the DNS queries that you want to forward (such as example.com), and the IP addresses of the DNS resolvers on your network that you want to forward the queries to.</p>
<h2 id="Regional"><a href="#Regional" class="headerlink" title="Regional"></a>Regional</h2><p>Like Amazon VPC, <strong>Resolver is regional</strong>.<br>In each region where you have VPCs, you can choose whether to </p>
<ol>
<li>forward queries from your VPCs to your network (outbound queries), </li>
<li>from your network to your VPCs (inbound queries), </li>
</ol>
<h1 id="S3-Glacier-default-automatic-encryption"><a href="#S3-Glacier-default-automatic-encryption" class="headerlink" title="S3 Glacier default automatic encryption"></a>S3 Glacier default automatic encryption</h1><p>Amazon S3 Glacier automatically encrypts data at rest using Advanced Encryption Standard (AES) 256-bit symmetric keys and supports secure transfer of your data over Secure Sockets Layer (SSL).</p>
<p>The S3 class family does not support encyption by default.</p>
<h1 id="AWS-CloudFormation-StackSets-and-templates"><a href="#AWS-CloudFormation-StackSets-and-templates" class="headerlink" title="AWS CloudFormation StackSets and templates"></a>AWS CloudFormation StackSets and templates</h1><h2 id="Templates"><a href="#Templates" class="headerlink" title="Templates"></a>Templates</h2><ul>
<li>CloudFormation template is a JSON or YAML-format, text-based file that describes all the AWS resources you need to deploy to run your application. </li>
<li>A template acts as a <strong>blueprint for a stack</strong>. </li>
<li>CloudFormation templates can NOT be used to deploy the same template across AWS accounts and regions.</li>
</ul>
<h2 id="Stack"><a href="#Stack" class="headerlink" title="Stack"></a>Stack</h2><p>CloudFormation stack is <strong>a set of AWS resources</strong> that are created and managed as a <strong>single unit</strong> when AWS CloudFormation instantiates a template.</p>
<h2 id="StackSets"><a href="#StackSets" class="headerlink" title="StackSets"></a>StackSets</h2><ul>
<li>AWS CloudFormation StackSet extends the functionality of stacks by enabling you to create, update, or delete stacks <strong>across multiple accounts and regions</strong> with a single operation. </li>
<li>A stack set lets you create stacks in AWS accounts across regions by using a single AWS CloudFormation template. </li>
<li>Using an administrator account of an AWS Organization, you define and manage an AWS CloudFormation template, and use the template as the basis for provisioning stacks into selected target accounts of an AWS Organization across specified regions.</li>
</ul>
<h3 id="Administrator-and-target-accounts"><a href="#Administrator-and-target-accounts" class="headerlink" title="Administrator and target accounts"></a>Administrator and target accounts</h3><ul>
<li>An administrator account is the AWS account in which you <strong>create stack sets</strong>. </li>
<li>A stack set is managed by signing in to the AWS administrator account in which it was created. </li>
<li>A target account is the account into which you create, update, or delete one or more stacks in your stack set. </li>
<li>Before you can use a stack set to create stacks in a target account, you must set up a <strong>trust relationship</strong> between the administrator and target accounts.</li>
</ul>
<h3 id="Stack-instances-reference-to-a-stack"><a href="#Stack-instances-reference-to-a-stack" class="headerlink" title="Stack instances: reference to a stack"></a>Stack instances: reference to a stack</h3><ul>
<li>A stack instance is a <strong>reference to a stack</strong> in a target account within a Region. </li>
<li>A stack instance can exist without a stack; for example, if the stack could not be created for some reason, the stack instance shows the reason for stack creation failure. </li>
<li>A stack instance is associated with only one stack set.</li>
</ul>
<h1 id="AWS-Config"><a href="#AWS-Config" class="headerlink" title="AWS Config"></a>AWS Config</h1><p>Use AWS Config to review resource configurations to meet compliance guidelines and maintain a history of resource configuration changes</p>
<img src="https://d1.awsstatic.com/Products/product-name/diagrams/product-page-diagram-Config_how-it-works.bd28728a9066c55d7ee69c0a655109001462e25b.png" width="600px"/>

<p>Automatically evaluates the recorded configurations, against the configurations you specify.</p>
<h1 id="AWS-Database-Migration-Service-DMS"><a href="#AWS-Database-Migration-Service-DMS" class="headerlink" title="AWS Database Migration Service (DMS)"></a>AWS Database Migration Service (DMS)</h1><ul>
<li>AWS Database Migration Service helps you migrate databases to AWS quickly and securely. </li>
<li>The source database remains fully operational during the migration, minimizing downtime to applications that rely on the database. </li>
</ul>
<h2 id="Homogeneous-Migrations"><a href="#Homogeneous-Migrations" class="headerlink" title="Homogeneous Migrations"></a>Homogeneous Migrations</h2><p>AWS Database Migration Service supports homogeneous migrations such as Oracle to Oracle, as well as heterogeneous migrations between different database platforms, such as Oracle or Microsoft SQL Server to Amazon Aurora. </p>
<img src="https://d1.awsstatic.com/product-marketing/DMS/product-page-diagram-AWS-DMS_database-consolidation.86418ac11df3b896a07ff4efad07854003644f3d.png" width="600px"/>

<h2 id="into-Data-Warehouse"><a href="#into-Data-Warehouse" class="headerlink" title="into Data Warehouse"></a>into Data Warehouse</h2><p>With AWS Database Migration Service, you can continuously replicate your data with high availability and consolidate databases into a petabyte-scale data warehouse by streaming data to Amazon Redshift and Amazon S3.</p>
<h2 id="Continuous-Data-Replication"><a href="#Continuous-Data-Replication" class="headerlink" title="Continuous Data Replication"></a>Continuous Data Replication</h2><img src="https://d1.awsstatic.com/product-marketing/DMS/product-page-diagram-AWS-DMS_continuous-data-replication.a0e3bd328d2a4bd9b40a83e767199dcc13cf678f.png" width="600px"/>

<h2 id="Pricing-2"><a href="#Pricing-2" class="headerlink" title="Pricing"></a>Pricing</h2><p>When migrating databases to Amazon Aurora, Amazon Redshift, Amazon DynamoDB or Amazon DocumentDB (with MongoDB compatibility) you can use DMS free for six months.</p>
<h1 id="Aurora-v-s-Aurora-Serverless"><a href="#Aurora-v-s-Aurora-Serverless" class="headerlink" title="Aurora v.s. Aurora Serverless"></a>Aurora v.s. Aurora Serverless</h1><p>Aurora features a distributed, fault-tolerant, self-healing storage system that auto-scales up to <strong>64TB per database instance</strong>. But, its not a complete auto scaling solution.</p>
<h2 id="Aurora-Serverless"><a href="#Aurora-Serverless" class="headerlink" title="Aurora Serverless"></a>Aurora Serverless</h2><h3 id="Serverless"><a href="#Serverless" class="headerlink" title="Serverless"></a>Serverless</h3><p>Amazon Aurora Serverless is an on-demand, auto-scaling configuration for Amazon Aurora (MySQL-compatible and PostgreSQL-compatible editions), where the database will automatically start-up, shut down, and scale capacity up or down based on your applications needs. It enables you to run your database in the cloud <strong>without managing any database instances</strong>. </p>
<h3 id="User-case"><a href="#User-case" class="headerlink" title="User case"></a>User case</h3><p>Its a simple, cost-effective option for <strong>infrequent, intermittent, or unpredictable</strong> workloads. </p>
<h3 id="Billing"><a href="#Billing" class="headerlink" title="Billing"></a>Billing</h3><p>You pay on a per-second basis for the database capacity you use when the database is active. </p>
<h3 id="Migration"><a href="#Migration" class="headerlink" title="Migration"></a>Migration</h3><p>You migrate between standard and serverless configurations with a few clicks in the Amazon RDS Management Console.</p>
<h1 id="VPN-CloudHub-Providing-secure-communication-between-sites"><a href="#VPN-CloudHub-Providing-secure-communication-between-sites" class="headerlink" title="VPN CloudHub: Providing secure communication between sites"></a>VPN CloudHub: Providing secure communication between sites</h1><h2 id="User-Case"><a href="#User-Case" class="headerlink" title="User Case"></a>User Case</h2><ul>
<li>If you have multiple AWS Site-to-Site VPN connections, you can provide <strong>secure communication between sites</strong> using the AWS VPN CloudHub. </li>
<li>This enables your remote sites to communicate with each other, and not just with the VPC.</li>
<li>This design is suitable if you have multiple branch offices and <strong>existing internet connections</strong> and would like to implement a convenient, potentially low-cost hub-and-spoke model for primary or backup connectivity between these remote offices.</li>
</ul>
<h2 id="How-it-works"><a href="#How-it-works" class="headerlink" title="How it works"></a>How it works</h2><ul>
<li>Sites that use <strong>AWS Direct Connect connections to the virtual private gateway</strong> can also be <em>part of the AWS VPN CloudHub</em>. </li>
<li>The VPN CloudHub operates on a simple <strong>hub-and-spoke</strong> model that you can use with or without a VPC. </li>
</ul>
<img src="https://docs.aws.amazon.com/vpn/latest/s2svpn/images/AWS_VPN_CloudHub-diagram.png" width="600px"/>

<h1 id="Kinesis-Enhanced-Fan-out"><a href="#Kinesis-Enhanced-Fan-out" class="headerlink" title="Kinesis Enhanced Fan-out"></a>Kinesis Enhanced Fan-out</h1><p>By default, the 2MB/second/shard output is shared between all of the applications consuming data from the stream.<br>You should use enhanced fan-out if you have multiple consumers retrieving data from a stream in parallel.<br>With enhanced fan-out developers can register stream consumers to use enhanced fan-out and <strong>receive their own 2MB/second pipe of read throughput per shard</strong>, and this throughput automatically scales with the number of shards in a stream.</p>
<img src="https://media.datacumulus.com/aws-saa-pt/assets/pt4-q38-i1.jpg" width="600px"/>

<h1 id="Kinesis-Data-Firehose-Destination-limination"><a href="#Kinesis-Data-Firehose-Destination-limination" class="headerlink" title="Kinesis Data Firehose Destination limination"></a>Kinesis Data Firehose Destination limination</h1><ul>
<li>Kinesis Data Firehose can only write to: <ol>
<li>S3, </li>
<li>Redshift, </li>
<li><strong>Elasticsearch</strong></li>
<li>Splunk</li>
</ol>
</li>
<li>You cant have applications consuming data streams from Kinesis Data Firehose, thats the job of Kinesis Data Streams.</li>
</ul>
<h1 id="SQS-Standard-gt-FIFO"><a href="#SQS-Standard-gt-FIFO" class="headerlink" title="SQS Standard-&gt;FIFO"></a>SQS Standard-&gt;FIFO</h1><p>If you have an existing application that uses standard queues and you want to take advantage of the ordering or exactly-once processing features of FIFO queues, you need to configure the queue and your application correctly. You cant convert an existing standard queue into a FIFO queue. To make the move, you must either create a new FIFO queue for your application or delete your existing standard queue and recreate it as a FIFO queue.</p>
<h2 id="FIFO-naming"><a href="#FIFO-naming" class="headerlink" title="FIFO naming"></a>FIFO naming</h2><p>The name of a FIFO queue must end with the .fifo suffix. The suffix counts towards the 80-character queue name limit. To determine whether a queue is FIFO, you can check whether the queue name ends with the suffix.</p>
<h1 id="Things-that-you-cannot-edit-convert-and-have-to-recreate"><a href="#Things-that-you-cannot-edit-convert-and-have-to-recreate" class="headerlink" title="Things that you cannot edit/convert, and have to recreate"></a>Things that you cannot edit/convert, and have to recreate</h1><ol>
<li>AMI</li>
<li>Launch Configuration</li>
<li>Launch Template</li>
<li>SQS Standard &lt;-&gt; FIFO</li>
</ol>
<h1 id="Service-Control-Policies-SCP"><a href="#Service-Control-Policies-SCP" class="headerlink" title="Service Control Policies (SCP)"></a>Service Control Policies (SCP)</h1><ul>
<li>If a user or role has an IAM permission policy that grants access to an action that is either not allowed or explicitly denied by the applicable SCPs, the user or role cant perform that action</li>
<li>SCPs affect all users and <strong>roles</strong> in attached accounts, including the <strong>root user</strong></li>
<li>SCPs do <strong>not</strong> affect service-linked role</li>
</ul>
<h1 id="S3-Glacier-Vault-and-Vault-Lock"><a href="#S3-Glacier-Vault-and-Vault-Lock" class="headerlink" title="S3 Glacier Vault and Vault Lock"></a>S3 Glacier Vault and Vault Lock</h1><ul>
<li><p>Amazon S3 Glacier is a secure, durable, and extremely low-cost Amazon S3 cloud storage class for data archiving and long-term backup. </p>
</li>
<li><p>It is designed to deliver 99.999999999% durability, and provide comprehensive security and compliance capabilities that can help meet even the most stringent regulatory requirements.</p>
</li>
<li><p>An <strong>S3 Glacier vault</strong> is a container for storing archives. </p>
</li>
<li><p>When you create a vault, you specify a <strong>vault name</strong> and the <strong>AWS Region</strong> in which you want to create the vault. </p>
</li>
<li><p>S3 Glacier <strong>Vault Lock</strong> allows you to easily deploy and enforce <em>compliance controls for individual S3 Glacier vaults</em> with a <strong>vault lock policy</strong>. </p>
</li>
<li><p>You can specify controls such as write once read many (WORM) in a vault lock policy and lock the policy from future edits.</p>
</li>
</ul>
<h1 id="S3-object-metadata-is-not-encrypted"><a href="#S3-object-metadata-is-not-encrypted" class="headerlink" title="S3 object metadata is not encrypted"></a>S3 object metadata is not encrypted</h1><p>Metadata, which can be included with the object, is not encrypted while being stored on Amazon S3. Therefore, AWS recommends that customers not place sensitive information in Amazon S3 metadata.</p>
<h1 id="AWS-Step-Functions"><a href="#AWS-Step-Functions" class="headerlink" title="AWS Step Functions"></a>AWS Step Functions</h1><ul>
<li>AWS Step Functions lets you coordinate and orchestrate multiple AWS services such as AWS Lambda and AWS Glue into <strong>serverless workflows</strong>. </li>
<li>Workflows are made up of a series of steps, with the <em>output of one step acting as input into the next</em>. </li>
<li>A Step Function automatically <strong>triggers and tracks each step</strong>, and retries when there are errors, so your application executes in order and as expected. </li>
<li>The Step Function can ensure that the Glue ETL job and the Lambda functions execute <strong>in order</strong> and complete successfully as per the workflow defined in the given use-case. </li>
</ul>
<h1 id="AWS-Amazon-Simple-Workflow-Service-SWF"><a href="#AWS-Amazon-Simple-Workflow-Service-SWF" class="headerlink" title="AWS Amazon Simple Workflow Service (SWF)"></a>AWS Amazon Simple Workflow Service (SWF)</h1><ul>
<li>Amazon Simple Workflow Service (SWF) is a web service that makes it easy to <strong>coordinate work across distributed application components</strong>.</li>
<li>Amazon SWF enables applications for a range of use cases, including media processing, web application back-ends, business process workflows, and analytics pipelines, to be designed as a coordination of tasks</li>
<li>Tasks represent invocations of various processing steps in an application which can be performed by executable code, web service calls, human actions, and scripts.</li>
<li>The coordination of tasks involves managing execution dependencies, scheduling, and concurrency in accordance with the logical flow of the application.</li>
</ul>
<h2 id="Amazon-SWF-vs-AWS-Step-Functions"><a href="#Amazon-SWF-vs-AWS-Step-Functions" class="headerlink" title="Amazon SWF vs. AWS Step Functions"></a>Amazon SWF vs. AWS Step Functions</h2><ul>
<li>AWS Step Functions is a fully managed service that makes it easy to coordinate the <strong>components of distributed applications</strong> and microservices using visual workflows. </li>
<li>Instead of writing a Decider program, you define state machines in JSON. </li>
<li>AWS customers should <strong>consider using Step Functions for new applications</strong>. </li>
<li>If Step Functions does not fit your needs, then you should consider Amazon Simple Workflow (SWF). </li>
<li>Amazon SWF provides you <strong>complete control over your orchestration logic</strong>, but increases the complexity of developing applications. </li>
<li>You may write decider programs in the programming language of your choice, or you may use the Flow framework to use programming constructs that structure asynchronous interactions for you. </li>
<li>AWS will continue to provide the Amazon SWF service, Flow framework, and support all Amazon SWF customers.</li>
</ul>
<h2 id="Amazon-SWF-v-s-Amazon-SQS"><a href="#Amazon-SWF-v-s-Amazon-SQS" class="headerlink" title="Amazon SWF v.s. Amazon SQS"></a>Amazon SWF v.s. Amazon SQS</h2><ul>
<li>Amazon SWF API actions are <strong>task-oriented</strong>. Amazon SQS API actions are <strong>message-oriented</strong>.</li>
<li>Amazon SWF keeps track of all tasks and events in an application. Amazon SQS requires you to implement your own application-level tracking, especially if your application uses multiple queues.</li>
<li>The Amazon SWF Console and visibility APIs provide an application-centric view that lets you search for executions, drill down into an executions details, and administer executions. Amazon SQS requires implementing such additional functionality.</li>
<li>Amazon SWF offers several features that facilitate application development, such as passing data between tasks, signaling, and flexibility in distributing tasks. Amazon SQS requires you to implement some application-level functionality.</li>
<li>In addition to a core SDK that calls service APIs, Amazon SWF provides the AWS Flow Framework with which you can write distributed applications using programming constructs that structure asynchronous interactions.</li>
</ul>
<h1 id="NAT-gateway-v-s-NAT-instance"><a href="#NAT-gateway-v-s-NAT-instance" class="headerlink" title="NAT gateway v.s. NAT instance"></a>NAT gateway v.s. NAT instance</h1><img src="https://media.datacumulus.com/aws-saa-pt/assets/pt4-q12-i1.jpg" alt="" width="600px"/>

<p>NAT Gateway does NOT support Port forwarding.</p>
<h1 id="Snowball-or-Snowmobile"><a href="#Snowball-or-Snowmobile" class="headerlink" title="Snowball or Snowmobile"></a>Snowball or Snowmobile</h1><blockquote>
<p>To migrate large datasets of 10PB or more in a single location, you should use Snowmobile. </p>
</blockquote>
<h1 id="Default-EC2-monitoring"><a href="#Default-EC2-monitoring" class="headerlink" title="Default EC2 monitoring"></a>Default EC2 monitoring</h1><ul>
<li>By default, basic monitoring is enabled when you use the AWS management console to create a launch configuration. </li>
<li>Detailed monitoring is enabled by default when you create a launch configuration using the AWS CLI or SDK</li>
</ul>
<h1 id="VPC-Sharing"><a href="#VPC-Sharing" class="headerlink" title="VPC Sharing"></a>VPC Sharing</h1><p>VPC sharing allows customers to share subnets with other AWS accounts within the same AWS Organization.</p>
<ul>
<li>VPC sharing (<strong>part of Resource Access Manager</strong>) allows multiple AWS accounts to create their application resources such as EC2 instances, RDS databases, Redshift clusters, and Lambda functions, into <strong>shared and centrally-managed Amazon Virtual Private Clouds (VPCs)</strong>. </li>
<li>To set this up, the account that owns the VPC (owner) shares one or more subnets with other accounts (participants) that belong to the same organization from AWS Organizations. </li>
<li>After a subnet is shared, the participants can <strong>view, create, modify, and delete their application resources</strong> in the subnets shared with them. Participants cannot view, modify, or delete resources that belong to other participants or the VPC owner.</li>
<li>You can share Amazon VPCs to leverage the implicit routing within a VPC for applications that require a high degree of interconnectivity and are within the same trust boundaries. </li>
<li>This reduces the number of VPCs that you create and manage while using separate accounts for billing and access control. </li>
</ul>
<blockquote>
<p>VPC Peering does not provide <strong>shared and centrally managed VPC</strong></p>
</blockquote>
<h1 id="Global-Accelerator-v-s-CloudFront"><a href="#Global-Accelerator-v-s-CloudFront" class="headerlink" title="Global Accelerator v.s. CloudFront"></a>Global Accelerator v.s. CloudFront</h1><ul>
<li><p>AWS Global Accelerator and Amazon CloudFront are separate services that use the AWS global network and its edge locations around the world. </p>
</li>
<li><p>CloudFront improves performance for both <strong>cacheable content</strong> (such as images and videos) and <strong>dynamic content</strong> (such as API acceleration and dynamic site delivery). </p>
</li>
<li><p>Global Accelerator improves performance for a wide range of applications over TCP or UDP by <em>proxying packets at the edge</em> to applications running in one or more AWS Regions.</p>
</li>
<li><p>Global Accelerator is a good fit for <strong>non-HTTP use cases</strong>, such as gaming (UDP), IoT (MQTT), or Voice over IP, as well as for HTTP use cases that specifically require static IP addresses or deterministic, fast regional failover. </p>
</li>
<li><p>Both services integrate with AWS Shield for DDoS protection.</p>
</li>
</ul>
<h1 id="Schema-Conversion-Tool-of-DMS"><a href="#Schema-Conversion-Tool-of-DMS" class="headerlink" title="Schema Conversion Tool of DMS"></a>Schema Conversion Tool of DMS</h1><img src="https://d1.awsstatic.com/product-marketing/DMS/product-page-diagram_AWS-DMS_heterogeneous-database-migrations-2.3616bac30ab86d4310ddadfdec5d6e6ba4d8b81d.png" width="600px"/>

<h1 id="File-Gateway-v-s-Volume-Gateway"><a href="#File-Gateway-v-s-Volume-Gateway" class="headerlink" title="File Gateway v.s. Volume Gateway"></a>File Gateway v.s. Volume Gateway</h1><h2 id="File-Gateway"><a href="#File-Gateway" class="headerlink" title="File Gateway"></a>File Gateway</h2><ul>
<li>Used to access <strong>objects</strong></li>
<li>Network File System (NFS) and Server Message Block (SMB)</li>
</ul>
<h2 id="Volume-Gateway"><a href="#Volume-Gateway" class="headerlink" title="Volume Gateway"></a>Volume Gateway</h2><ul>
<li>Unlike File Gateways which are used for accessing objects, Volume Gateways present your on-premise application with the <em>iSCSI block storage</em> instead.</li>
<li>Volume Gateways allow you to have point-in-time backups of your volumes stored as EBS snapshots, and come in two different operational modes: stored and cached.</li>
</ul>
<h2 id="Tape-Gateway"><a href="#Tape-Gateway" class="headerlink" title="Tape Gateway"></a>Tape Gateway</h2><p>A tape gateway provides cloud-backed virtual tape storage. The tape gateway is deployed into your on-premises environment as a VM running on VMware ESXi, KVM, or Microsoft Hyper-V hypervisor.</p>
<h1 id="Site-to-Site-VPN-terms"><a href="#Site-to-Site-VPN-terms" class="headerlink" title="Site-to-Site VPN terms"></a>Site-to-Site VPN terms</h1><ul>
<li>Customer Gateway: An <strong>AWS resource</strong> that provides information to AWS about your Customer Gateway device.</li>
<li>Customer Gateway device: A physical device or software application on the customer side of the Site-to-Site VPN connection.</li>
<li>Virtual private gateway: A Virtual Private Gateway (also known as a VPN Gateway) is the endpoint on the <strong>AWS VPC side of your VPN connection</strong>.</li>
</ul>
<h1 id="Basic-Schema-Copy-of-DMS"><a href="#Basic-Schema-Copy-of-DMS" class="headerlink" title="Basic Schema Copy of DMS"></a>Basic Schema Copy of DMS</h1><p> To quickly migrate a database schema to your target instance you can rely on the Basic Schema Copy feature of AWS Database Migration Service. Basic Schema Copy will automatically create tables and primary keys in the target instance if the target does not already contain tables with the same names. Basic Schema Copy is great for doing a test migration, or when you are migrating databases heterogeneously e.g. Oracle to MySQL or SQL Server to Oracle. Basic Schema Copy will not migrate secondary indexes, foreign keys or stored procedures. When you need to use a more customizable schema migration process (e.g. when you are migrating your production database and need to move your stored procedures and secondary database objects), you must use the AWS Schema Conversion Tool.</p>
<h1 id="Limitations-to-changing-tenancy"><a href="#Limitations-to-changing-tenancy" class="headerlink" title="Limitations to changing tenancy"></a>Limitations to changing tenancy</h1><p>Dedicated and Host can change between each other.</p>
<p>Dedicated/Host cannot change to Default.<br>Default cannot change to Dedicated/host.</p>
<h1 id="SQS-Delay-Queues"><a href="#SQS-Delay-Queues" class="headerlink" title="SQS Delay Queues"></a>SQS Delay Queues</h1><p><code>DelaySeconds</code> value.</p>
<blockquote>
<p>As the consuming components need additional time to process SQS messages, the company wants to postpone the delivery of new messages to the queue for a few seconds.</p>
</blockquote>
<h1 id="VPC-Wizard-Configs"><a href="#VPC-Wizard-Configs" class="headerlink" title="VPC Wizard Configs"></a>VPC Wizard Configs</h1><ol>
<li>VPC with a single public subnet</li>
<li>VPC with public and private subnets</li>
<li>VPC with public and private subnets and AWS Site-to-Site VPN access</li>
<li>VPC with a private subnet only and AWS Site-to-Site VPN access</li>
</ol>
<h1 id="EFS-is-POSIX-compliant"><a href="#EFS-is-POSIX-compliant" class="headerlink" title="EFS is POSIX-compliant"></a>EFS is POSIX-compliant</h1><p>Amazon EFS provides elastic, shared file storage that is POSIX-compliant. </p>
<h1 id="VPC-Sharing-1"><a href="#VPC-Sharing-1" class="headerlink" title="VPC Sharing"></a>VPC Sharing</h1><p>VPC sharing allows customers to share subnets with other AWS accounts within the same AWS Organization. This is a very powerful concept that allows for a number of benefits:</p>
<ul>
<li>Separation of duties: centrally controlled VPC structure, routing, IP address allocation.</li>
<li>Application owners continue to own resources, accounts, and security groups.</li>
<li>VPC sharing participants can <strong>reference security group IDs of each other</strong>.</li>
<li>Efficiencies: higher density in subnets, <strong>efficient use of VPNs and AWS Direct Connect</strong>.</li>
<li>Hard limits can be avoided, for example, 50 VIFs per AWS Direct Connect connection through simplified network architecture.</li>
<li>Costs can be optimized through <strong>reuse of NAT gateways, VPC interface endpoints, and intra-Availability Zone traffic</strong>.</li>
</ul>
<h1 id="DataSync"><a href="#DataSync" class="headerlink" title="DataSync"></a>DataSync</h1><p>DataSync is ideal for customers who need online migrations for active data sets, timely transfers for continuously generated data, or replication for business continuity. </p>
<!-- flag of hidden posts -->
        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        <span style="font-size:1rem;font-weight:lighter">Link with Anran at:</span>
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/niuniuanran">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        
        <li>
            <a target="_blank"  href="https://www.linkedin.com/in/anran-niu-897b4b197">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-linkedin"></i>
                            </span>
            </a>
        </li>
        

    </ul>
    
    <p>
        Created With <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud" target="_blank" rel="noopener">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
